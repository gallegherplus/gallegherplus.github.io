
<!-- saved from url=(0132)blob:https://03hpmm7gzzsd3uhmp7trahox8vw2u2015pgbhfsulni74bi1pg-h852644758.scf.usercontent.goog/160dea12-76af-4319-84bf-0b5ebebde164 -->
<html lang="es"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>
        @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);
        html {
          font-family: 'Google Sans Text', 'Google Sans';
          font-size: 14px;
          color-scheme: light dark;
          background: light-dark(white, black);
          color: light-dark(black, white);
        }
        </style>
        
        <script type="importmap">{"imports":{"@modelcontextprotocol/sdk/":"https://esm.sh/@modelcontextprotocol/sdk/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/client/index?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/client/index?target=es2022","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/types?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/types?target=es2022","react/":"https://esm.sh/react@^19.2.3/","react":"https://esm.sh/react@^19.2.3","lucide-react":"https://esm.sh/lucide-react@^0.562.0","react-dom/":"https://esm.sh/react-dom@^19.2.3/","@/index":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@/types":"data:application/javascript;base64,ZXhwb3J0IHZhciBHYW1lU3RhdHVzOwooZnVuY3Rpb24gKEdhbWVTdGF0dXMpIHsKICAgIEdhbWVTdGF0dXNbR2FtZVN0YXR1c1siTUVOVSJdID0gMF0gPSAiTUVOVSI7CiAgICBHYW1lU3RhdHVzW0dhbWVTdGF0dXNbIlBMQVlJTkciXSA9IDFdID0gIlBMQVlJTkciOwogICAgR2FtZVN0YXR1c1tHYW1lU3RhdHVzWyJMRVZFTF9UUkFOU0lUSU9OIl0gPSAyXSA9ICJMRVZFTF9UUkFOU0lUSU9OIjsKICAgIEdhbWVTdGF0dXNbR2FtZVN0YXR1c1siR0FNRV9PVkVSIl0gPSAzXSA9ICJHQU1FX09WRVIiOwogICAgR2FtZVN0YXR1c1tHYW1lU3RhdHVzWyJWSUNUT1JZIl0gPSA0XSA9ICJWSUNUT1JZIjsKICAgIEdhbWVTdGF0dXNbR2FtZVN0YXR1c1siUEFVU0VEIl0gPSA1XSA9ICJQQVVTRUQiOwogICAgR2FtZVN0YXR1c1tHYW1lU3RhdHVzWyJFTkRJTkdfQ1VUU0NFTkUiXSA9IDZdID0gIkVORElOR19DVVRTQ0VORSI7CiAgICBHYW1lU3RhdHVzW0dhbWVTdGF0dXNbIk5BTUVfRU5UUlkiXSA9IDddID0gIk5BTUVfRU5UUlkiOwogICAgR2FtZVN0YXR1c1tHYW1lU3RhdHVzWyJMRUFERVJCT0FSRCJdID0gOF0gPSAiTEVBREVSQk9BUkQiOwp9KShHYW1lU3RhdHVzIHx8IChHYW1lU3RhdHVzID0ge30pKTsK","@/constants":"data:application/javascript;base64,ZXhwb3J0IGNvbnN0IEdSQVZJVFkgPSAwLjY7CmV4cG9ydCBjb25zdCBGUklDVElPTiA9IDAuODU7CmV4cG9ydCBjb25zdCBNT1ZFX1NQRUVEID0gMC44OyAvLyBJbmNyZWFzZWQgYmFzZSBhY2NlbGVyYXRpb24gZm9yIGF1dG8tcnVuIGZlZWwKZXhwb3J0IGNvbnN0IFNQUklOVF9NVUxUSVBMSUVSID0gMS4wOyAvLyBEZXByZWNhdGVkIGVmZmVjdGl2ZWx5LCBtZXJnaW5nIGludG8gYmFzZSBzcGVlZApleHBvcnQgY29uc3QgSlVNUF9GT1JDRSA9IC0xNDsKZXhwb3J0IGNvbnN0IE1BWF9TUEVFRCA9IDk7IC8vIFNsaWdodGx5IGZhc3RlciBvdmVyYWxsIHRvcCBzcGVlZApleHBvcnQgY29uc3QgVklUQUxJVFlfREVDQVkgPSAwLjAxNTsgLy8gTXVjaCBzbG93ZXIgZGVjYXkgZm9yIGxvbmdlciBsaWZlCmV4cG9ydCBjb25zdCBHQU1FX1dJRFRIID0gODAwOwpleHBvcnQgY29uc3QgR0FNRV9IRUlHSFQgPSA0NTA7CmV4cG9ydCBjb25zdCBUSUxFX1NJWkUgPSA0MDsKZXhwb3J0IGNvbnN0IExFVkVMX0NPTkZJR1MgPSBbCiAgICAvLyBOaXZlbCAxOiBBbWFuZWNlciAoRGF3bikgLSBSb3NhcyB5IE5hcmFuamFzIHN1YXZlcwogICAgeyBsZW5ndGg6IDYwMDAsIGNvbG9yVG9wOiAnI0ZGOUE5RScsIGNvbG9yQm90OiAnI0ZFQ0ZFRicsIG5hbWU6ICdOaXZlbCAxOiBBbWFuZWNlciBlbiBsYSBDb3N0YScsIGNsb3VkT3BhY2l0eTogMC44IH0sCiAgICAvLyBOaXZlbCAyOiBEw61hIChEYXkpIC0gQXp1bCBicmlsbGFudGUKICAgIHsgbGVuZ3RoOiA3MDAwLCBjb2xvclRvcDogJyM0RkFDRkUnLCBjb2xvckJvdDogJyMwMEYyRkUnLCBuYW1lOiAnTml2ZWwgMjogTWVkaW9kw61hIGVuIGVsIFBhbnRhbm8nLCBjbG91ZE9wYWNpdHk6IDAuOSB9LAogICAgLy8gTml2ZWwgMzogQXRhcmRlY2VyIChTdW5zZXQpIC0gTmFyYW5qYSBpbnRlbnNvIHkgVmlvbGV0YQogICAgeyBsZW5ndGg6IDQwMDAsIGNvbG9yVG9wOiAnI0ZBNzA5QScsIGNvbG9yQm90OiAnI0ZFRTE0MCcsIG5hbWU6ICdOaXZlbCAzOiBBdGFyZGVjZXIgZGVsIFlhY2Fyw6knLCBjbG91ZE9wYWNpdHk6IDAuNiB9LAogICAgLy8gTml2ZWwgNDogQW5vY2hlY2VyIChEdXNrKSAtIEF6dWwgb3NjdXJvIHkgTW9yYWRvCiAgICB7IGxlbmd0aDogNzAwMCwgY29sb3JUb3A6ICcjMjQzOTQ5JywgY29sb3JCb3Q6ICcjNTE3ZmE0JywgbmFtZTogJ05pdmVsIDQ6IENyZXDDunNjdWxvIFNlbHbDoXRpY28nLCBjbG91ZE9wYWNpdHk6IDAuNCB9LAogICAgLy8gTml2ZWwgNTogTm9jaGUgY29uIEx1bmEgKE5pZ2h0KSAtIE5lZ3JvIHkgQXp1bCBtdXkgb3NjdXJvCiAgICB7IGxlbmd0aDogODAwMCwgY29sb3JUb3A6ICcjMGYyMDI3JywgY29sb3JCb3Q6ICcjMjAzYTQzJywgbmFtZTogJ05pdmVsIDU6IFLDrW8gTm9jdHVybm8nLCBjbG91ZE9wYWNpdHk6IDAuMyB9LAogICAgLy8gTml2ZWwgNjogUGVzYWRpbGxhL0luZmllcm5vIChCb3NzIE5pZ2h0KSAtIFJvaml6byBvc2N1cm8geSBOZWdybwogICAgeyBsZW5ndGg6IDUwMDAsIGNvbG9yVG9wOiAnIzNFMjcyMycsIGNvbG9yQm90OiAnIzAwMDAwMCcsIG5hbWU6ICdOaXZlbCA2OiBOaWRvIGRlIGxhIEFuYWNvbmRhJywgY2xvdWRPcGFjaXR5OiAwLjIgfQpdOwpleHBvcnQgY29uc3QgQ09MT1JTID0gewogICAgV0FURVI6ICcjNEI3Qjg3JywKICAgIEdSQVNTX1RPUDogJyM2OEEzNTcnLAogICAgRElSVDogJyM1RDQwMzcnLAogICAgUExBWUVSOiAnIzc5NTU0OCcsCiAgICBNQVRFOiAnIzJFN0QzMicsCiAgICBZRVJCQTogJyNGNTdGMTcnLCAvLyBBbWFyaWxsby9OYXJhbmphIGRlIHBhcXVldGUgZGUgeWVyYmEKICAgIFRPUlRBX0ZSSVRBOiAnI0ZGRDU0RicsCiAgICBNT1NRVUlUTzogJyMyMTIxMjEnLAogICAgWUFDQVJFOiAnIzMzNjkxRScsCiAgICBCT1NTOiAnIzRBMTQ4QycsCiAgICBBTkFDT05EQTogJyMyRTdEMzInLAogICAgQU5BQ09OREFfU1BPVDogJyMxQjVFMjAnLAogICAgUE9SVEFMOiAnIzlDMjdCMCcKfTsK","@/components/GameCanvas":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgR2FtZVN0YXR1cyB9IGZyb20gJ0AvdHlwZXMnOwppbXBvcnQgeyBHUkFWSVRZLCBGUklDVElPTiwgTU9WRV9TUEVFRCwgSlVNUF9GT1JDRSwgTUFYX1NQRUVELCBWSVRBTElUWV9ERUNBWSwgR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQsIENPTE9SUywgTEVWRUxfQ09ORklHUyB9IGZyb20gJ0AvY29uc3RhbnRzJzsKaW1wb3J0IHsgYXVkaW9NYW5hZ2VyIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdWRpb01hbmFnZXInOwppbXBvcnQgeyBnZW5lcmF0ZUxldmVsIH0gZnJvbSAnQC9zZXJ2aWNlcy9sZXZlbEdlbmVyYXRvcic7CmV4cG9ydCBjb25zdCBHYW1lQ2FudmFzID0gKHsgZ2FtZVN0YXRlLCBvbkdhbWVPdmVyLCBvbkxldmVsQ29tcGxldGUgfSkgPT4gewogICAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3QgcmVxdWVzdFJlZiA9IHVzZVJlZigwKTsKICAgIGNvbnN0IGtleXNQcmVzc2VkID0gdXNlUmVmKHt9KTsKICAgIC8vIFRyYWNrIGdhbWVwYWQganVtcCBidXR0b24gdG8gcHJldmVudCByYXBpZCBmaXJlIGp1bXBpbmcgaWYgdGhhdCB3YXMgYW4gaXNzdWUgKHRob3VnaCBpc0dyb3VuZGVkIGhhbmRsZXMgbW9zdCkKICAgIGNvbnN0IGdhbWVwYWRKdW1wUHJlc3NlZCA9IHVzZVJlZihmYWxzZSk7CiAgICBjb25zdCBwbGF5ZXJJbWFnZVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHBsYXllckp1bXBJbWFnZVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHlhY2FyZUxhbmRJbWFnZVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHNuYWtlTWluaW9uSW1hZ2VSZWYgPSB1c2VSZWYobnVsbCk7IC8vIE5ldyBTbmFrZSBNaW5pb24KICAgIGNvbnN0IHlhY2FyZVdhdGVySW1hZ2VSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCB5YWNhcmVCb3NzSW1hZ2VSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBhbmFjb25kYUltYWdlUmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3Qgb25HYW1lT3ZlclJlZiA9IHVzZVJlZihvbkdhbWVPdmVyKTsKICAgIGNvbnN0IG9uTGV2ZWxDb21wbGV0ZVJlZiA9IHVzZVJlZihvbkxldmVsQ29tcGxldGUpOwogICAgLy8gSGVscGVyIHRvIGRyYXcgcm91bmRlZCByZWN0cyBjb21wYXRpYmxlIHdpdGggYWxsIGJyb3dzZXJzCiAgICBjb25zdCBkcmF3Um91bmRlZFJlY3QgPSAoY3R4LCB4LCB5LCB3LCBoLCByKSA9PiB7CiAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgIGN0eC5tb3ZlVG8oeCArIHIsIHkpOwogICAgICAgIGN0eC5saW5lVG8oeCArIHcgLSByLCB5KTsKICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgdywgeSwgeCArIHcsIHkgKyByKTsKICAgICAgICBjdHgubGluZVRvKHggKyB3LCB5ICsgaCAtIHIpOwogICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3LCB5ICsgaCwgeCArIHcgLSByLCB5ICsgaCk7CiAgICAgICAgY3R4LmxpbmVUbyh4ICsgciwgeSArIGgpOwogICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyBoLCB5ICsgaCAtIHIpOwogICAgICAgIGN0eC5saW5lVG8oeCwgeSArIHIpOwogICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByLCB5KTsKICAgICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICB9OwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBvbkdhbWVPdmVyUmVmLmN1cnJlbnQgPSBvbkdhbWVPdmVyOwogICAgICAgIG9uTGV2ZWxDb21wbGV0ZVJlZi5jdXJyZW50ID0gb25MZXZlbENvbXBsZXRlOwogICAgfSwgW29uR2FtZU92ZXIsIG9uTGV2ZWxDb21wbGV0ZV0pOwogICAgLy8gTG9hZCBBc3NldHMgd2l0aCBTbWFydCBCYWNrZ3JvdW5kIFJlbW92YWwKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgbG9hZEltYWdlID0gKHNyYywgdGFyZ2V0UmVmKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICBpbWcuY3Jvc3NPcmlnaW4gPSAiQW5vbnltb3VzIjsKICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgb2Zmc2NyZWVuLndpZHRoID0gaW1nLndpZHRoOwogICAgICAgICAgICAgICAgICAgIG9mZnNjcmVlbi5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pOwogICAgICAgICAgICAgICAgICAgIGlmICghY3R4KQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIGNvbnRleHQiKTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBpbWcud2lkdGgsIGltZy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBpbWFnZURhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAvLyBTbWFydCBCYWNrZ3JvdW5kIFJlbW92YWw6IFNhbXBsZSB0b3AtbGVmdCBwaXhlbAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJnUiA9IGRhdGFbMF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmdHID0gZGF0YVsxXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiZ0IgPSBkYXRhWzJdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJnQSA9IGRhdGFbM107CiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIGlmIHRoZSBpbWFnZSBoYXMgYSBiYWNrZ3JvdW5kIChhbHBoYSAyNTUpCiAgICAgICAgICAgICAgICAgICAgaWYgKGJnQSA9PT0gMjU1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvbGVyYW5jZSA9IDI1OyAvLyBMb3dlciB0b2xlcmFuY2UgdG8gcHJlc2VydmUgY2hhcmFjdGVyIGRldGFpbHMKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGcgPSBkYXRhW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBkYXRhW2kgKyAyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhyIC0gYmdSKSA8IHRvbGVyYW5jZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGcgLSBiZ0cpIDwgdG9sZXJhbmNlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoYiAtIGJnQikgPCB0b2xlcmFuY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2kgKyAzXSA9IDA7IC8vIFNldCB0cmFuc3BhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkSW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZEltZy5zcmMgPSBvZmZzY3JlZW4udG9EYXRhVVJMKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJlZi5jdXJyZW50ID0gcHJvY2Vzc2VkSW1nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW1hZ2UgaXMgYWxyZWFkeSB0cmFuc3BhcmVudAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZWYuY3VycmVudCA9IGltZzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiSW1hZ2UgcHJvY2Vzc2luZyBlcnJvciAobGlrZWx5IENPUlMpLiBVc2luZyByYXcgaW1hZ2UuIiwgZSk7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UmVmLmN1cnJlbnQgPSBpbWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGltZy5vbmVycm9yID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tJbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgICAgIGZhbGxiYWNrSW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgIGZhbGxiYWNrSW1nLm9ubG9hZCA9ICgpID0+IHsgdGFyZ2V0UmVmLmN1cnJlbnQgPSBmYWxsYmFja0ltZzsgfTsKICAgICAgICAgICAgfTsKICAgICAgICB9OwogICAgICAgIC8vIE1haW4gc3ByaXRlIHNoZWV0CiAgICAgICAgbG9hZEltYWdlKCJodHRwczovL2ltYWdlczQuaW1hZ2ViYW0uY29tL2U5LzI2LzE4L01FMTlLSU01X28ucG5nIiwgcGxheWVySW1hZ2VSZWYpOwogICAgICAgIC8vIEp1bXAgc3ByaXRlIHNoZWV0CiAgICAgICAgbG9hZEltYWdlKCJodHRwczovL2ltYWdlczQuaW1hZ2ViYW0uY29tL2Y2LzAyLzFjL01FMTlLS0RBX28ucG5nIiwgcGxheWVySnVtcEltYWdlUmVmKTsKICAgICAgICAvLyBZYWNhcmUgTGFuZCAoTmV3IEltYWdlKQogICAgICAgIGxvYWRJbWFnZSgiaHR0cHM6Ly9pbWFnZXM0LmltYWdlYmFtLmNvbS85MS9iZi8wMS9NRTE5TEhES19vLnBuZyIsIHlhY2FyZUxhbmRJbWFnZVJlZik7CiAgICAgICAgLy8gU25ha2UgTWluaW9uIChGb3IgQW5hY29uZGEgbGV2ZWxzKQogICAgICAgIGxvYWRJbWFnZSgiaHR0cHM6Ly9pbWFnZXM0LmltYWdlYmFtLmNvbS9hMy9lYy84NS9NRTE5TEhMV19vLnBuZyIsIHNuYWtlTWluaW9uSW1hZ2VSZWYpOwogICAgICAgIC8vIFlhY2FyZSBXYXRlcgogICAgICAgIGxvYWRJbWFnZSgiaHR0cHM6Ly9pbWFnZXM0LmltYWdlYmFtLmNvbS83ZS9mMi83OS9NRTE5S1NOOF9vLnBuZyIsIHlhY2FyZVdhdGVySW1hZ2VSZWYpOwogICAgICAgIC8vIFlhY2FyZSBCb3NzIC0gVVBEQVRFRCBJTUFHRSAoMzYgZnJhbWVzLCAzMDcyeDMwNzIpCiAgICAgICAgbG9hZEltYWdlKCJodHRwczovL2ltYWdlczQuaW1hZ2ViYW0uY29tLzYwLzIxLzkxL01FMTlMS0ZDX28ucG5nIiwgeWFjYXJlQm9zc0ltYWdlUmVmKTsKICAgICAgICAvLyBBbmFjb25kYSBCb3NzIChVUERBVEVEIElNQUdFIDI1NjB4MjA0OCAyMCBmcmFtZXMpCiAgICAgICAgbG9hZEltYWdlKCJodHRwczovL2ltYWdlczQuaW1hZ2ViYW0uY29tLzAxL2M2L2FlL01FMTlMS1ZIX28ucG5nIiwgYW5hY29uZGFJbWFnZVJlZik7CiAgICB9LCBbXSk7CiAgICAvLyBJbnB1dCBoYW5kbGluZwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGUpID0+IHsKICAgICAgICAgICAgLy8gSW5pdCBhdWRpbyBvbiBmaXJzdCBpbnRlcmFjdGlvbgogICAgICAgICAgICBhdWRpb01hbmFnZXIuaW5pdCgpOwogICAgICAgICAgICBrZXlzUHJlc3NlZC5jdXJyZW50W2UuY29kZV0gPSB0cnVlOwogICAgICAgICAgICAvLyBKVU1QOiBDaGFuZ2VkIGZyb20gU3BhY2UgdG8gS2V5UwogICAgICAgICAgICBpZiAoZS5jb2RlID09PSAnS2V5UycgJiYgIWUucmVwZWF0ICYmIGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9PT0gR2FtZVN0YXR1cy5QTEFZSU5HKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBnYW1lU3RhdGUuY3VycmVudC5wbGF5ZXI7CiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmlzR3JvdW5kZWQpIHsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudnkgPSBKVU1QX0ZPUkNFOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5pc0dyb3VuZGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLmp1bXAoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBTSE9PVDogQ2hhbmdlZCBmcm9tIEtleVogdG8gS2V5QQogICAgICAgICAgICBpZiAoZS5jb2RlID09PSAnS2V5QScgJiYgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID09PSBHYW1lU3RhdHVzLlBMQVlJTkcpIHsKICAgICAgICAgICAgICAgIHNob290UHJvamVjdGlsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBjb25zdCBoYW5kbGVLZXlVcCA9IChlKSA9PiB7CiAgICAgICAgICAgIGtleXNQcmVzc2VkLmN1cnJlbnRbZS5jb2RlXSA9IGZhbHNlOwogICAgICAgIH07CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBoYW5kbGVLZXlVcCk7CiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApOwogICAgICAgIH07CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcwogICAgfSwgW10pOwogICAgY29uc3Qgc2hvb3RQcm9qZWN0aWxlID0gKCkgPT4gewogICAgICAgIGNvbnN0IHN0YXRlID0gZ2FtZVN0YXRlLmN1cnJlbnQ7CiAgICAgICAgaWYgKHN0YXRlLnBsYXllci5jb29sZG93biA+IDApCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBhdWRpb01hbmFnZXIuc2hvb3QoKTsKICAgICAgICBzdGF0ZS5wcm9qZWN0aWxlcy5wdXNoKHsKICAgICAgICAgICAgaWQ6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSwKICAgICAgICAgICAgdHlwZTogJ3Byb2plY3RpbGUnLAogICAgICAgICAgICB4OiBzdGF0ZS5wbGF5ZXIueCArIChzdGF0ZS5wbGF5ZXIuZmFjaW5nUmlnaHQgPyBzdGF0ZS5wbGF5ZXIud2lkdGggOiAwKSwKICAgICAgICAgICAgeTogc3RhdGUucGxheWVyLnkgKyBzdGF0ZS5wbGF5ZXIuaGVpZ2h0IC8gMiAtIDE1LAogICAgICAgICAgICB3aWR0aDogMzAsIC8vIEluY3JlYXNlZCBzaXplIGZyb20gMTUKICAgICAgICAgICAgaGVpZ2h0OiAzMCwgLy8gSW5jcmVhc2VkIHNpemUgZnJvbSAxNQogICAgICAgICAgICB2eDogc3RhdGUucGxheWVyLmZhY2luZ1JpZ2h0ID8gMTIgOiAtMTIsCiAgICAgICAgICAgIHZ5OiAtMiwKICAgICAgICAgICAgbWFya2VkRm9yRGVsZXRpb246IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgc3RhdGUucGxheWVyLmNvb2xkb3duID0gMTU7IC8vIEZyYW1lcwogICAgfTsKICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHsKICAgICAgICBjb25zdCBzdGF0ZSA9IGdhbWVTdGF0ZS5jdXJyZW50OwogICAgICAgIC8vIC0tLSBHQU1FUEFEIFBPTExJTkcgLS0tCiAgICAgICAgY29uc3QgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTsKICAgICAgICBjb25zdCBncCA9IGdhbWVwYWRzWzBdOyAvLyBBc3N1bWUgcGxheWVyIDEgaXMgaW5kZXggMAogICAgICAgIC8vIC0tLSBBVFRSQUNUIE1PREUgKE1FTlUgVE9VUikgLS0tCiAgICAgICAgaWYgKHN0YXRlLnN0YXR1cyA9PT0gR2FtZVN0YXR1cy5NRU5VKSB7CiAgICAgICAgICAgIC8vIFNjcm9sbCBDYW1lcmEKICAgICAgICAgICAgc3RhdGUuY2FtZXJhLnggKz0gMi41OwogICAgICAgICAgICAvLyBMb29wIExldmVscyBsb2dpYwogICAgICAgICAgICBjb25zdCB2aXNpYmxlV2lkdGggPSBHQU1FX1dJRFRIOwogICAgICAgICAgICBpZiAoc3RhdGUuY2FtZXJhLnggPiBzdGF0ZS5sZXZlbExlbmd0aCAtIHZpc2libGVXaWR0aCkgewogICAgICAgICAgICAgICAgLy8gU3dpdGNoIHRvIG5leHQgbGV2ZWwgZm9yIHRoZSB0b3VyCiAgICAgICAgICAgICAgICBjb25zdCBtYXhMZXZlbHMgPSBMRVZFTF9DT05GSUdTLmxlbmd0aDsKICAgICAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IChzdGF0ZS5jdXJyZW50TGV2ZWwgJSBtYXhMZXZlbHMpICsgMTsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGEgPSBnZW5lcmF0ZUxldmVsKG5leHRMZXZlbCk7CiAgICAgICAgICAgICAgICAvLyBTZWFtbGVzc2x5IHN3YXAgZGF0YQogICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudExldmVsID0gbmV4dExldmVsOwogICAgICAgICAgICAgICAgc3RhdGUucGxhdGZvcm1zID0gbmV3RGF0YS5wbGF0Zm9ybXMgfHwgW107CiAgICAgICAgICAgICAgICBzdGF0ZS5lbmVtaWVzID0gbmV3RGF0YS5lbmVtaWVzIHx8IFtdOwogICAgICAgICAgICAgICAgc3RhdGUuaXRlbXMgPSBuZXdEYXRhLml0ZW1zIHx8IFtdOwogICAgICAgICAgICAgICAgc3RhdGUubGV2ZWxMZW5ndGggPSBuZXdEYXRhLmxldmVsTGVuZ3RoIHx8IDMwMDA7CiAgICAgICAgICAgICAgICBzdGF0ZS5jYW1lcmEueCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQW5pbWF0ZSBFbnZpcm9ubWVudCAoc28gaXQgbG9va3MgYWxpdmUpCiAgICAgICAgICAgIHN0YXRlLnBsYXRmb3Jtcy5mb3JFYWNoKHBsYXRmb3JtID0+IHsKICAgICAgICAgICAgICAgIGlmIChwbGF0Zm9ybS5zdWJ0eXBlID09PSAneWFjYXJlX2Zsb2F0aW5nJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gcGxhdGZvcm0uaWQuc3BsaXQoJ18nKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBnYXBTdGFydFggPSBwYXJzZUZsb2F0KHBhcnRzWzJdIHx8ICcwJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUZsb2F0KHBhcnRzWzNdIHx8ICcwJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVjYWxjdWxhdGUgdGhlIGZpeGVkIGFuY2hvciBiYXNlZCBvbiBnZW5lcmF0aW9uIGxvZ2ljCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yWCA9IGdhcFN0YXJ0WCArIChpbmRleCAqIDEwMCkgKyA2MDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlZCA9IDAuMDAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gMzU7IC8vIFJlZHVjZWQgcmFuZ2UgZm9yIHNhZmV0eQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ggPSBhbmNob3JYICsgTWF0aC5zaW4oRGF0ZS5ub3coKSAqIHNwZWVkKSAqIHJhbmdlOwogICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtLnggPSBuZXdYOwogICAgICAgICAgICAgICAgICAgIC8vIEZJWDogVXNlIGFic29sdXRlIFkgcG9zaXRpb25pbmcgdG8gcHJldmVudCBkcmlmdAogICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtLnkgPSAoR0FNRV9IRUlHSFQgLSAzNSkgKyBNYXRoLnNpbihEYXRlLm5vdygpIC8gNDAwKSAqIDU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzdGF0ZS5lbmVtaWVzLmZvckVhY2goZW5lbXkgPT4gewogICAgICAgICAgICAgICAgaWYgKGVuZW15LmVuZW15VHlwZSA9PT0gJ21vc3F1aXRvJykgewogICAgICAgICAgICAgICAgICAgIGVuZW15LnkgKz0gTWF0aC5zaW4oRGF0ZS5ub3coKSAvIDIwMCkgKiAyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIHBsYXllciBwaHlzaWNzCiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZS5zdGF0dXMgIT09IEdhbWVTdGF0dXMuUExBWUlORykKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcjsKICAgICAgICAvLyBBdXRvLXJ1biBsb2dpYzogTW92aW5nIGRldGVybWluZXMgc3BlZWQKICAgICAgICBjb25zdCBjdXJyZW50TW92ZVNwZWVkID0gTU9WRV9TUEVFRDsKICAgICAgICBjb25zdCBjdXJyZW50TWF4U3BlZWQgPSBNQVhfU1BFRUQ7CiAgICAgICAgLy8gLS0tIFBsYXllciBNb3ZlbWVudCAoS2V5Ym9hcmQgKyBHYW1lcGFkKSAtLS0KICAgICAgICBsZXQgbW92aW5nTGVmdCA9IGtleXNQcmVzc2VkLmN1cnJlbnRbJ0Fycm93TGVmdCddOwogICAgICAgIGxldCBtb3ZpbmdSaWdodCA9IGtleXNQcmVzc2VkLmN1cnJlbnRbJ0Fycm93UmlnaHQnXTsKICAgICAgICBpZiAoZ3ApIHsKICAgICAgICAgICAgLy8gRC1QYWQgTGVmdC9SaWdodCAoU3RhbmRhcmQgbWFwcGluZzogMTQ9TGVmdCwgMTU9UmlnaHQpCiAgICAgICAgICAgIGlmIChncC5idXR0b25zWzE0XT8ucHJlc3NlZCkKICAgICAgICAgICAgICAgIG1vdmluZ0xlZnQgPSB0cnVlOwogICAgICAgICAgICBpZiAoZ3AuYnV0dG9uc1sxNV0/LnByZXNzZWQpCiAgICAgICAgICAgICAgICBtb3ZpbmdSaWdodCA9IHRydWU7CiAgICAgICAgICAgIC8vIEFuYWxvZyBTdGljawogICAgICAgICAgICBpZiAoZ3AuYXhlc1swXSA8IC0wLjUpCiAgICAgICAgICAgICAgICBtb3ZpbmdMZWZ0ID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGdwLmF4ZXNbMF0gPiAwLjUpCiAgICAgICAgICAgICAgICBtb3ZpbmdSaWdodCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChtb3ZpbmdSaWdodCkgewogICAgICAgICAgICBwbGF5ZXIudnggKz0gY3VycmVudE1vdmVTcGVlZDsKICAgICAgICAgICAgcGxheWVyLmZhY2luZ1JpZ2h0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKG1vdmluZ0xlZnQpIHsKICAgICAgICAgICAgcGxheWVyLnZ4IC09IGN1cnJlbnRNb3ZlU3BlZWQ7CiAgICAgICAgICAgIHBsYXllci5mYWNpbmdSaWdodCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICAvLyAtLS0gR0FNRVBBRCBBQ1RJT05TIC0tLQogICAgICAgIGlmIChncCkgewogICAgICAgICAgICAvLyBTaG9vdDogQnV0dG9uIDEgKEluZGV4IDApCiAgICAgICAgICAgIGlmIChncC5idXR0b25zWzBdPy5wcmVzc2VkKSB7CiAgICAgICAgICAgICAgICBzaG9vdFByb2plY3RpbGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBKdW1wOiBCdXR0b24gMiAoSW5kZXggMSkKICAgICAgICAgICAgaWYgKGdwLmJ1dHRvbnNbMV0/LnByZXNzZWQpIHsKICAgICAgICAgICAgICAgIGlmICghZ2FtZXBhZEp1bXBQcmVzc2VkLmN1cnJlbnQgJiYgcGxheWVyLmlzR3JvdW5kZWQpIHsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudnkgPSBKVU1QX0ZPUkNFOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5pc0dyb3VuZGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLmp1bXAoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGdhbWVwYWRKdW1wUHJlc3NlZC5jdXJyZW50ID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGdhbWVwYWRKdW1wUHJlc3NlZC5jdXJyZW50ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gRGV0ZXJtaW5lIFNwcmludCBTdGF0ZSBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHNwZWVkCiAgICAgICAgLy8gSWYgbW92aW5nIGZhc3RlciB0aGFuIDYwJSBvZiBtYXggc3BlZWQsIHBsYXkgc3ByaW50IGFuaW1hdGlvbgogICAgICAgIHBsYXllci5pc1NwcmludGluZyA9IE1hdGguYWJzKHBsYXllci52eCkgPiAoY3VycmVudE1heFNwZWVkICogMC42KTsKICAgICAgICAvLyBGcmljdGlvbgogICAgICAgIHBsYXllci52eCAqPSBGUklDVElPTjsKICAgICAgICBwbGF5ZXIudnkgKz0gR1JBVklUWTsKICAgICAgICAvLyBNYXggU3BlZWQgQ2FwCiAgICAgICAgaWYgKHBsYXllci52eCA+IGN1cnJlbnRNYXhTcGVlZCkKICAgICAgICAgICAgcGxheWVyLnZ4ID0gY3VycmVudE1heFNwZWVkOwogICAgICAgIGlmIChwbGF5ZXIudnggPCAtY3VycmVudE1heFNwZWVkKQogICAgICAgICAgICBwbGF5ZXIudnggPSAtY3VycmVudE1heFNwZWVkOwogICAgICAgIC8vIEFwcGx5IFZlbG9jaXR5CiAgICAgICAgcGxheWVyLnggKz0gcGxheWVyLnZ4OwogICAgICAgIHBsYXllci55ICs9IHBsYXllci52eTsKICAgICAgICAvLyBWaXRhbGl0eSBEZWNheQogICAgICAgIGlmICghc3RhdGUuYm9zc0FjdGl2ZSkgewogICAgICAgICAgICBwbGF5ZXIudml0YWxpdHkgLT0gVklUQUxJVFlfREVDQVk7CiAgICAgICAgfQogICAgICAgIGlmIChwbGF5ZXIudml0YWxpdHkgPD0gMCkgewogICAgICAgICAgICBwbGF5ZXIudml0YWxpdHkgPSAwOwogICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSBHYW1lU3RhdHVzLkdBTUVfT1ZFUjsKICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLmdhbWVPdmVyKCk7CiAgICAgICAgICAgIG9uR2FtZU92ZXJSZWYuY3VycmVudChzdGF0ZS5zY29yZSwgZmFsc2UpOwogICAgICAgICAgICByZXR1cm47IC8vIFN0b3AgdXBkYXRlIHRvIHByZXZlbnQgZnVydGhlciBsb2dpYwogICAgICAgIH0KICAgICAgICAvLyBDb29sZG93bnMKICAgICAgICBpZiAocGxheWVyLmNvb2xkb3duID4gMCkKICAgICAgICAgICAgcGxheWVyLmNvb2xkb3duLS07CiAgICAgICAgaWYgKHBsYXllci5pbnZpbmNpYmxlVW50aWwgPiAwKQogICAgICAgICAgICBwbGF5ZXIuaW52aW5jaWJsZVVudGlsLS07CiAgICAgICAgLy8gLS0tIENvbGxpc2lvbiBEZXRlY3Rpb24gKEFBQkIpIC0tLQogICAgICAgIHBsYXllci5pc0dyb3VuZGVkID0gZmFsc2U7CiAgICAgICAgLy8gRmxvb3IgYm91bmRhcnkKICAgICAgICBpZiAocGxheWVyLnkgKyBwbGF5ZXIuaGVpZ2h0ID4gR0FNRV9IRUlHSFQpIHsKICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gR2FtZVN0YXR1cy5HQU1FX09WRVI7CiAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5nYW1lT3ZlcigpOwogICAgICAgICAgICBvbkdhbWVPdmVyUmVmLmN1cnJlbnQoc3RhdGUuc2NvcmUsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBQbGF0Zm9ybSBDb2xsaXNpb25zCiAgICAgICAgZm9yIChjb25zdCBwbGF0Zm9ybSBvZiBzdGF0ZS5wbGF0Zm9ybXMpIHsKICAgICAgICAgICAgLy8gRmxvYXRpbmcgcGxhdGZvcm0gbG9naWMKICAgICAgICAgICAgbGV0IHBsYXRmb3JtRHggPSAwOwogICAgICAgICAgICBpZiAocGxhdGZvcm0uc3VidHlwZSA9PT0gJ3lhY2FyZV9mbG9hdGluZycpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gcGxhdGZvcm0uaWQuc3BsaXQoJ18nKTsKICAgICAgICAgICAgICAgIGNvbnN0IGdhcFN0YXJ0WCA9IHBhcnNlRmxvYXQocGFydHNbMl0gfHwgJzAnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VGbG9hdChwYXJ0c1szXSB8fCAnMCcpOwogICAgICAgICAgICAgICAgLy8gUmVjYWxjdWxhdGUgdGhlIGZpeGVkIGFuY2hvciBiYXNlZCBvbiBnZW5lcmF0aW9uIGxvZ2ljCiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3JYID0gZ2FwU3RhcnRYICsgKGluZGV4ICogMTAwKSArIDYwOwogICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSAwLjAwMjsKICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gMzU7IC8vIFJlZHVjZWQgcmFuZ2UgZm9yIHNhZmV0eQogICAgICAgICAgICAgICAgY29uc3QgbmV3WCA9IGFuY2hvclggKyBNYXRoLnNpbihEYXRlLm5vdygpICogc3BlZWQpICogcmFuZ2U7CiAgICAgICAgICAgICAgICBwbGF0Zm9ybUR4ID0gbmV3WCAtIHBsYXRmb3JtLng7CiAgICAgICAgICAgICAgICBwbGF0Zm9ybS54ID0gbmV3WDsKICAgICAgICAgICAgICAgIHBsYXRmb3JtLnZ4ID0gcGxhdGZvcm1EeDsKICAgICAgICAgICAgICAgIC8vIEZJWDogVXNlIGFic29sdXRlIFkgcG9zaXRpb25pbmcgdG8gcHJldmVudCBkcmlmdAogICAgICAgICAgICAgICAgcGxhdGZvcm0ueSA9IChHQU1FX0hFSUdIVCAtIDM1KSArIE1hdGguc2luKERhdGUubm93KCkgLyA0MDApICogNTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGxheWVyLnggPCBwbGF0Zm9ybS54ICsgcGxhdGZvcm0ud2lkdGggJiYKICAgICAgICAgICAgICAgIHBsYXllci54ICsgcGxheWVyLndpZHRoID4gcGxhdGZvcm0ueCAmJgogICAgICAgICAgICAgICAgcGxheWVyLnkgKyBwbGF5ZXIuaGVpZ2h0ID4gcGxhdGZvcm0ueSAmJgogICAgICAgICAgICAgICAgcGxheWVyLnkgPCBwbGF0Zm9ybS55ICsgcGxhdGZvcm0uaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBwcmV2WSA9IHBsYXllci55IC0gcGxheWVyLnZ5OwogICAgICAgICAgICAgICAgLy8gQ29sbGlzaW9uIHRvbGVyYW5jZQogICAgICAgICAgICAgICAgaWYgKHByZXZZICsgcGxheWVyLmhlaWdodCA8PSBwbGF0Zm9ybS55ICsgMTUgJiYgcGxheWVyLnZ5ID49IDApIHsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueSA9IHBsYXRmb3JtLnkgLSBwbGF5ZXIuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIHBsYXllci52eSA9IDA7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmlzR3JvdW5kZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChwbGF0Zm9ybS52eCAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueCArPSBwbGF0Zm9ybS52eDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gLS0tIEVudGl0eSBVcGRhdGVzIC0tLQogICAgICAgIC8vIFByb2plY3RpbGVzCiAgICAgICAgc3RhdGUucHJvamVjdGlsZXMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgcC54ICs9IHAudng7CiAgICAgICAgICAgIHAueSArPSBwLnZ5OwogICAgICAgICAgICBpZiAocC50eXBlID09PSAncHJvamVjdGlsZScpIHsKICAgICAgICAgICAgICAgIHAudnkgKz0gR1JBVklUWSAqIDAuNTsgLy8gVG9ydGEgZnJpdGEgZ3Jhdml0eQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwLnkgPiBHQU1FX0hFSUdIVCB8fCBwLnkgPCAtMTAwKQogICAgICAgICAgICAgICAgcC5tYXJrZWRGb3JEZWxldGlvbiA9IHRydWU7CiAgICAgICAgICAgIGlmIChwLnR5cGUgPT09ICdib3NzX3Byb2plY3RpbGUnKSB7CiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmludmluY2libGVVbnRpbCA8PSAwICYmCiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnggPCBwLnggKyBwLndpZHRoICYmCiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnggKyBwbGF5ZXIud2lkdGggPiBwLnggJiYKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueSA8IHAueSArIHAuaGVpZ2h0ICYmCiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnkgKyBwbGF5ZXIuaGVpZ2h0ID4gcC55KSB7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZpdGFsaXR5IC09IDI1OwogICAgICAgICAgICAgICAgICAgIHBsYXllci5pbnZpbmNpYmxlVW50aWwgPSA2MDsKICAgICAgICAgICAgICAgICAgICBhdWRpb01hbmFnZXIuaGl0KCk7CiAgICAgICAgICAgICAgICAgICAgcC5tYXJrZWRGb3JEZWxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyBFbmVtaWVzICYgQm9zcwogICAgICAgIHN0YXRlLmVuZW1pZXMuZm9yRWFjaChlbmVteSA9PiB7CiAgICAgICAgICAgIGlmIChlbmVteS5lbmVteVR5cGUgPT09ICdtb3NxdWl0bycpIHsKICAgICAgICAgICAgICAgIGVuZW15LnggLT0gMjsKICAgICAgICAgICAgICAgIGVuZW15LnkgKz0gTWF0aC5zaW4oRGF0ZS5ub3coKSAvIDIwMCkgKiAyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGVuZW15LmVuZW15VHlwZSA9PT0gJ3lhY2FyZScpIHsKICAgICAgICAgICAgICAgIGVuZW15LnggKz0gZW5lbXkudng7CiAgICAgICAgICAgICAgICBpZiAoZW5lbXkueCA+IGVuZW15LnBhdHJvbEVuZCB8fCBlbmVteS54IDwgZW5lbXkucGF0cm9sU3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICBlbmVteS52eCAqPSAtMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbmVteS5lbmVteVR5cGUgPT09ICdib3NzJykgewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdmlzaWJpbGl0eSBmb3IgYWN0aXZhdGlvbgogICAgICAgICAgICAgICAgY29uc3QgaXNPblNjcmVlbiA9IGVuZW15LnggPCBzdGF0ZS5jYW1lcmEueCArIEdBTUVfV0lEVEg7CiAgICAgICAgICAgICAgICBpZiAoaXNPblNjcmVlbikgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmJvc3NBY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVuZW15LnggKz0gZW5lbXkudng7CiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEJPU1MgTU9WRU1FTlQgTE9HSUMgVVBEQVRFRCAtLS0KICAgICAgICAgICAgICAgICAgICAvLyBMaW1pdCBib3NzIHRvIHRoZSBSSUdIVCBIQUxGIG9mIHRoZSBzY3JlZW4KICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW5YID0gc3RhdGUuY2FtZXJhLnggKyAoR0FNRV9XSURUSCAvIDIpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFggPSBzdGF0ZS5jYW1lcmEueCArIEdBTUVfV0lEVEggLSBlbmVteS53aWR0aCAtIDIwOwogICAgICAgICAgICAgICAgICAgIGlmIChlbmVteS54IDwgbWluWCkgewogICAgICAgICAgICAgICAgICAgICAgICBlbmVteS54ID0gbWluWDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXkudnggPSBNYXRoLmFicyhlbmVteS52eCk7IC8vIEZvcmNlIG1vdmUgcmlnaHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZW5lbXkueCA+IG1heFgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXkueCA9IG1heFg7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnZ4ID0gLU1hdGguYWJzKGVuZW15LnZ4KTsgLy8gRm9yY2UgbW92ZSBsZWZ0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIE9yaWdpbmFsIHBhdHJvbCBsb2dpYyBhcyBmYWxsYmFjawogICAgICAgICAgICAgICAgICAgIGlmIChlbmVteS54ID4gZW5lbXkucGF0cm9sRW5kKQogICAgICAgICAgICAgICAgICAgICAgICBlbmVteS52eCA9IC1NYXRoLmFicyhlbmVteS52eCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15LnggPCBlbmVteS5wYXRyb2xTdGFydCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXkudnggPSBNYXRoLmFicyhlbmVteS52eCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZW15LmF0dGFja0Nvb2xkb3duICYmIGVuZW15LmF0dGFja0Nvb2xkb3duID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBlbmVteS5hdHRhY2tDb29sZG93bi0tOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLnNob290KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gcGxheWVyLnggLSBlbmVteS54OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeSA9IHBsYXllci55IC0gZW5lbXkueTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hZyA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYWcgPT09IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWcgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wcm9qZWN0aWxlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYm9zc19wcm9qZWN0aWxlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVuZW15LnggKyBlbmVteS53aWR0aCAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbmVteS55ICsgZW5lbXkuaGVpZ2h0IC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2eDogKGR4IC8gbWFnKSAqIDUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2eTogKGR5IC8gbWFnKSAqIDUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWRGb3JEZWxldGlvbjogZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LmF0dGFja0Nvb2xkb3duID0gMTIwICsgTWF0aC5yYW5kb20oKSAqIDYwOyAvLyBJbmNyZWFzZWQgcmFuZG9tIGNvb2xkb3duCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIC0tLSBFbmVteSBDb2xsaXNpb24gJiBTdG9tcCBMb2dpYyAtLS0KICAgICAgICAgICAgLy8gUmVkdWNlZCBoaXRib3ggcGFkZGluZyBlbnN1cmVzIHlvdSBoYXZlIHRvICJ0b3VjaCIgdGhlIGVuZW15LAogICAgICAgICAgICAvLyBidXQgdGhlIGxvZ2ljIGJlbG93IHByaW9yaXRpemVzIHRoZSBTdG9tcCBpZiB5b3UgYXJlIGFib3ZlIHRoZW0uCiAgICAgICAgICAgIGNvbnN0IGhpdGJveFBhZGRpbmcgPSAyOwogICAgICAgICAgICBpZiAocGxheWVyLnggPCBlbmVteS54ICsgZW5lbXkud2lkdGggLSBoaXRib3hQYWRkaW5nICYmCiAgICAgICAgICAgICAgICBwbGF5ZXIueCArIHBsYXllci53aWR0aCA+IGVuZW15LnggKyBoaXRib3hQYWRkaW5nICYmCiAgICAgICAgICAgICAgICBwbGF5ZXIueSA8IGVuZW15LnkgKyBlbmVteS5oZWlnaHQgJiYKICAgICAgICAgICAgICAgIHBsYXllci55ICsgcGxheWVyLmhlaWdodCA+IGVuZW15LnkpIHsKICAgICAgICAgICAgICAgIC8vIEVhc2llciBTdG9tcCBMb2dpYzoKICAgICAgICAgICAgICAgIC8vIDEuIElzIHRoZSBwbGF5ZXIgbW92aW5nIGRvd24gKHZ5ID4gLTIgYWxsb3dzIGZvciBwZWFrIG9mIGp1bXApPwogICAgICAgICAgICAgICAgLy8gMi4gQXJlIHRoZSBwbGF5ZXIncyBmZWV0IHJvdWdobHkgaW4gdGhlIHVwcGVyIDYwJSBvZiB0aGUgZW5lbXk/IAogICAgICAgICAgICAgICAgLy8gICAgVGhpcyBwcmV2ZW50cyBzdG9tcGluZyB3aGVuIHdhbGtpbmcgaW50byB0aGVtIGZyb20gdGhlIGZsb29yLgogICAgICAgICAgICAgICAgY29uc3QgZW5lbXlDZW50ZXJZID0gZW5lbXkueSArIGVuZW15LmhlaWdodCAvIDI7CiAgICAgICAgICAgICAgICBjb25zdCBpc1N0b21wID0gKHBsYXllci52eSA+IC0yKSAmJiAoKHBsYXllci55ICsgcGxheWVyLmhlaWdodCkgPCAoZW5lbXlDZW50ZXJZICsgMTUpKTsKICAgICAgICAgICAgICAgIGlmIChpc1N0b21wICYmIGVuZW15LmVuZW15VHlwZSAhPT0gJ2Jvc3MnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gU3VjY2VzcyBTdG9tcAogICAgICAgICAgICAgICAgICAgIGVuZW15LmhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgZW5lbXkubWFya2VkRm9yRGVsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHBsYXllci52eSA9IC04OyAvLyBCb3VuY2UgdXAKICAgICAgICAgICAgICAgICAgICBhdWRpb01hbmFnZXIuZW5lbXlIaXQoKTsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zY29yZSArPSAyMDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChwbGF5ZXIuaW52aW5jaWJsZVVudGlsIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBQbGF5ZXIgRGFtYWdlCiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZpdGFsaXR5IC09IDIwOwogICAgICAgICAgICAgICAgICAgIHBsYXllci52eSA9IC01OwogICAgICAgICAgICAgICAgICAgIHBsYXllci52eCA9IHBsYXllci54IDwgZW5lbXkueCA/IC0xMCA6IDEwOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5pbnZpbmNpYmxlVW50aWwgPSA2MDsKICAgICAgICAgICAgICAgICAgICBhdWRpb01hbmFnZXIuaGl0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUucHJvamVjdGlsZXMuZm9yRWFjaChwcm9qID0+IHsKICAgICAgICAgICAgICAgIGlmIChwcm9qLnR5cGUgPT09ICdwcm9qZWN0aWxlJyAmJgogICAgICAgICAgICAgICAgICAgICFwcm9qLm1hcmtlZEZvckRlbGV0aW9uICYmCiAgICAgICAgICAgICAgICAgICAgcHJvai54IDwgZW5lbXkueCArIGVuZW15LndpZHRoICYmCiAgICAgICAgICAgICAgICAgICAgcHJvai54ICsgcHJvai53aWR0aCA+IGVuZW15LnggJiYKICAgICAgICAgICAgICAgICAgICBwcm9qLnkgPCBlbmVteS55ICsgZW5lbXkuaGVpZ2h0ICYmCiAgICAgICAgICAgICAgICAgICAgcHJvai55ICsgcHJvai5oZWlnaHQgPiBlbmVteS55KSB7CiAgICAgICAgICAgICAgICAgICAgcHJvai5tYXJrZWRGb3JEZWxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgLy8gRGFtYWdlIExvZ2ljCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGFtYWdlID0gZW5lbXkuZW5lbXlUeXBlID09PSAnYm9zcycgPyA0IDogMTsKICAgICAgICAgICAgICAgICAgICBlbmVteS5oZWFsdGggPSAoZW5lbXkuaGVhbHRoIHx8IDEpIC0gZGFtYWdlOwogICAgICAgICAgICAgICAgICAgIGlmIChlbmVteS5oZWFsdGggPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBlbmVteS5tYXJrZWRGb3JEZWxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmVteS5lbmVteVR5cGUgPT09ICdib3NzJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyB0aGUgRklOQUwgbGV2ZWwgKDYpIG9yIGEgbWlkLWJvc3MgKDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuY3VycmVudExldmVsIDwgNikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5sZXZlbFdpbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnNjb3JlICs9IDIwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBsZXZlbCBjb21wbGV0ZSBpbnN0ZWFkIG9mIGdhbWUgdmljdG9yeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTGV2ZWxDb21wbGV0ZVJlZi5jdXJyZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYm9zc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluYWwgQm9zcyBEZWZlYXRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5sZXZlbFdpbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnNjb3JlICs9IDUwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuc3RhdHVzID0gR2FtZVN0YXR1cy5WSUNUT1JZOyAvLyBXaWxsIGJlIGludGVyY2VwdGVkIGJ5IEFwcCBsb2dpYyBmb3IgY3V0c2NlbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdhbWVPdmVyUmVmLmN1cnJlbnQoc3RhdGUuc2NvcmUsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLmVuZW15SGl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zY29yZSArPSAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5ib3NzSGl0KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzdGF0ZS5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoIWl0ZW0ubWFya2VkRm9yRGVsZXRpb24gJiYKICAgICAgICAgICAgICAgIHBsYXllci54IDwgaXRlbS54ICsgaXRlbS53aWR0aCAmJgogICAgICAgICAgICAgICAgcGxheWVyLnggKyBwbGF5ZXIud2lkdGggPiBpdGVtLnggJiYKICAgICAgICAgICAgICAgIHBsYXllci55IDwgaXRlbS55ICsgaXRlbS5oZWlnaHQgJiYKICAgICAgICAgICAgICAgIHBsYXllci55ICsgcGxheWVyLmhlaWdodCA+IGl0ZW0ueSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21hdGUnKSB7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZpdGFsaXR5ID0gTWF0aC5taW4ocGxheWVyLnZpdGFsaXR5ICsgMjUsIHBsYXllci5tYXhWaXRhbGl0eSk7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc2NvcmUgKz0gNTA7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5tYXJrZWRGb3JEZWxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLmNvbGxlY3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3llcmJhJykgewogICAgICAgICAgICAgICAgICAgIC8vIFllcmJhIGdpdmVzIG1vcmUgcG9pbnRzIGJ1dCBsZXNzIGhlYWx0aCB0aGFuIG1hdGUKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudml0YWxpdHkgPSBNYXRoLm1pbihwbGF5ZXIudml0YWxpdHkgKyA1LCBwbGF5ZXIubWF4Vml0YWxpdHkpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLnNjb3JlICs9IDE1MDsKICAgICAgICAgICAgICAgICAgICBpdGVtLm1hcmtlZEZvckRlbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBhdWRpb01hbmFnZXIuY29sbGVjdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSAncG9ydGFsJykgewogICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5sZXZlbFdpbigpOwogICAgICAgICAgICAgICAgICAgIGl0ZW0ubWFya2VkRm9yRGVsZXRpb24gPSB0cnVlOyAvLyBNYXJrIGFzIGRlbGV0ZWQgdG8gcHJldmVudCBkb3VibGUgdHJpZ2dlcmluZwogICAgICAgICAgICAgICAgICAgIG9uTGV2ZWxDb21wbGV0ZVJlZi5jdXJyZW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBzdGF0ZS5lbmVtaWVzID0gc3RhdGUuZW5lbWllcy5maWx0ZXIoZSA9PiAhZS5tYXJrZWRGb3JEZWxldGlvbik7CiAgICAgICAgc3RhdGUuaXRlbXMgPSBzdGF0ZS5pdGVtcy5maWx0ZXIoaSA9PiAhaS5tYXJrZWRGb3JEZWxldGlvbik7CiAgICAgICAgc3RhdGUucHJvamVjdGlsZXMgPSBzdGF0ZS5wcm9qZWN0aWxlcy5maWx0ZXIocCA9PiAhcC5tYXJrZWRGb3JEZWxldGlvbik7CiAgICAgICAgbGV0IHRhcmdldENhbVggPSBwbGF5ZXIueCAtIEdBTUVfV0lEVEggKiAwLjM7CiAgICAgICAgY29uc3QgbWF4U2Nyb2xsID0gc3RhdGUubGV2ZWxMZW5ndGggLSBHQU1FX1dJRFRIOwogICAgICAgIC8vIENhbWVyYSBsb2NraW5nIGxvZ2ljIGZvciBib3NzIGZpZ2h0cwogICAgICAgIGlmIChzdGF0ZS5ib3NzQWN0aXZlKSB7CiAgICAgICAgICAgIC8vIExvY2sgdG8gdGhlIGVuZCBvZiB0aGUgbGV2ZWwgKHRoZSBhcmVuYSkKICAgICAgICAgICAgdGFyZ2V0Q2FtWCA9IG1heFNjcm9sbDsKICAgICAgICB9CiAgICAgICAgaWYgKHRhcmdldENhbVggPCAwKQogICAgICAgICAgICB0YXJnZXRDYW1YID0gMDsKICAgICAgICBpZiAodGFyZ2V0Q2FtWCA+IG1heFNjcm9sbCkKICAgICAgICAgICAgdGFyZ2V0Q2FtWCA9IG1heFNjcm9sbDsKICAgICAgICBzdGF0ZS5jYW1lcmEueCArPSAodGFyZ2V0Q2FtWCAtIHN0YXRlLmNhbWVyYS54KSAqIDAuMTsKICAgICAgICAvLyAtLS0gUExBWUVSIEJPVU5EUyBDTEFNUElORyAtLS0KICAgICAgICAvLyAxLiBHbG9iYWwgV29ybGQgQm91bmRzICgwIHRvIEVuZCkKICAgICAgICBpZiAocGxheWVyLnggPCAwKQogICAgICAgICAgICBwbGF5ZXIueCA9IDA7CiAgICAgICAgaWYgKHBsYXllci54ID4gc3RhdGUubGV2ZWxMZW5ndGggLSBwbGF5ZXIud2lkdGgpCiAgICAgICAgICAgIHBsYXllci54ID0gc3RhdGUubGV2ZWxMZW5ndGggLSBwbGF5ZXIud2lkdGg7CiAgICAgICAgLy8gMi4gQ2FtZXJhIFZpZXcgQm91bmRzIChPbmx5IHdoZW4gQm9zcyBpcyBBY3RpdmUpCiAgICAgICAgaWYgKHN0YXRlLmJvc3NBY3RpdmUpIHsKICAgICAgICAgICAgaWYgKHBsYXllci54IDwgc3RhdGUuY2FtZXJhLngpCiAgICAgICAgICAgICAgICBwbGF5ZXIueCA9IHN0YXRlLmNhbWVyYS54OwogICAgICAgICAgICBpZiAocGxheWVyLnggPiBzdGF0ZS5jYW1lcmEueCArIEdBTUVfV0lEVEggLSBwbGF5ZXIud2lkdGgpCiAgICAgICAgICAgICAgICBwbGF5ZXIueCA9IHN0YXRlLmNhbWVyYS54ICsgR0FNRV9XSURUSCAtIHBsYXllci53aWR0aDsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGlzdGFuY2UgPSBNYXRoLmZsb29yKHBsYXllci54IC8gMTApOwogICAgfTsKICAgIGNvbnN0IGRyYXcgPSAoY3R4KSA9PiB7CiAgICAgICAgY29uc3Qgc3RhdGUgPSBnYW1lU3RhdGUuY3VycmVudDsKICAgICAgICBjb25zdCBjb25maWcgPSBMRVZFTF9DT05GSUdTW3N0YXRlLmN1cnJlbnRMZXZlbCAtIDFdIHx8IExFVkVMX0NPTkZJR1NbMF07CiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBHQU1FX1dJRFRILCBHQU1FX0hFSUdIVCk7CiAgICAgICAgLy8gLS0tIEJhY2tncm91bmQgLS0tCiAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMCwgR0FNRV9IRUlHSFQpOwogICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBjb25maWcuY29sb3JUb3ApOwogICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBjb25maWcuY29sb3JCb3QpOwogICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDsKICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQpOwogICAgICAgIC8vIC0tLSBDbG91ZHMgKFBhcmFsbGF4KSAtLS0KICAgICAgICAvLyBTaW1wbGUgcHJvY2VkdXJhbCBjbG91ZHMgd2l0aCBGaXhlZCBTcGFjaW5nIHRvIHByZXZlbnQgb3ZlcmxhcAogICAgICAgIGNvbnN0IGRyYXdDbG91ZHMgPSAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNsb3VkQ291bnQgPSA0OyAvLyBGZXdlciBjbG91ZHMgdG8gZW5zdXJlIHNwYWNlCiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpICogMC4wMjsgLy8gU2xvdyBkcmlmdAogICAgICAgICAgICBjb25zdCBwYXJhbGxheFggPSBzdGF0ZS5jYW1lcmEueCAqIDAuMjsKICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7Y29uZmlnLmNsb3VkT3BhY2l0eSB8fCAwLjZ9KWA7CiAgICAgICAgICAgIC8vIERlZmluZSB0b3RhbCB2aXJ0dWFsIHdpZHRoIGZvciBjbG91ZHMgdG8gbG9vcCBpbgogICAgICAgICAgICBjb25zdCB0b3RhbFdpZHRoID0gR0FNRV9XSURUSCArIDMwMDsKICAgICAgICAgICAgY29uc3Qgc3BhY2luZyA9IHRvdGFsV2lkdGggLyBjbG91ZENvdW50OwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsb3VkQ291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5pc3RpYyByYW5kb20gcHJvcGVydGllcwogICAgICAgICAgICAgICAgY29uc3QgYmFzZVkgPSA1MCArIChpICogMTIzNDUgJSAxNTApOwogICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IDYwICsgKGkgKiA5ODc2NSAlIDQwKTsKICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBiYXNlIHNsb3QgcG9zaXRpb24gKyBtb3ZlbWVudAogICAgICAgICAgICAgICAgLy8gRWFjaCBjbG91ZCBoYXMgYSBmaXhlZCAic2xvdCIgKGkgKiBzcGFjaW5nKQogICAgICAgICAgICAgICAgLy8gTWludXMgdGltZSBhbmQgcGFyYWxsYXggZm9yIG1vdmVtZW50CiAgICAgICAgICAgICAgICAvLyBNb2R1bG8gdG90YWxXaWR0aCB0byBsb29wCiAgICAgICAgICAgICAgICBsZXQgeCA9IChpICogc3BhY2luZykgLSAodGltZSArIHBhcmFsbGF4WCkgJSB0b3RhbFdpZHRoOwogICAgICAgICAgICAgICAgLy8gV3JhcCBsb2dpYzogSWYgaXQgZ29lcyB0b28gZmFyIGxlZnQsIG1vdmUgdG8gcmlnaHQKICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBhIGJ1ZmZlciBvZiAxNTBweAogICAgICAgICAgICAgICAgaWYgKHggPCAtMTUwKQogICAgICAgICAgICAgICAgICAgIHggKz0gdG90YWxXaWR0aDsKICAgICAgICAgICAgICAgIC8vIERyYXcgYSBzaW1wbGUgZmx1ZmZ5IGNsb3VkIHNoYXBlIHVzaW5nIGNpcmNsZXMKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5hcmMoeCwgYmFzZVksIHNpemUgKiAwLjUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5hcmMoeCArIHNpemUgKiAwLjUsIGJhc2VZIC0gc2l6ZSAqIDAuMiwgc2l6ZSAqIDAuNiwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgY3R4LmFyYyh4ICsgc2l6ZSwgYmFzZVksIHNpemUgKiAwLjUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGRyYXdDbG91ZHMoKTsKICAgICAgICAvLyBXYXRlcgogICAgICAgIGN0eC5maWxsU3R5bGUgPSBDT0xPUlMuV0FURVI7CiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIEdBTUVfSEVJR0hUIC0gNjAsIEdBTUVfV0lEVEgsIDYwKTsKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC50cmFuc2xhdGUoLXN0YXRlLmNhbWVyYS54LCAwKTsKICAgICAgICAvLyBQbGF0Zm9ybXMKICAgICAgICBzdGF0ZS5wbGF0Zm9ybXMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgaWYgKHAuc3VidHlwZSA9PT0gJ3lhY2FyZV9mbG9hdGluZycpIHsKICAgICAgICAgICAgICAgIGlmICh5YWNhcmVXYXRlckltYWdlUmVmLmN1cnJlbnQgJiYgeWFjYXJlV2F0ZXJJbWFnZVJlZi5jdXJyZW50LmNvbXBsZXRlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyB3YXRlciB5YWNhcmUgc3ByaXRlCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0geWFjYXJlV2F0ZXJJbWFnZVJlZi5jdXJyZW50OwogICAgICAgICAgICAgICAgICAgIC8vIEFkanVzdCBkcmF3aW5nIHRvIGJldHRlciBmaXQgaGl0Ym94CiAgICAgICAgICAgICAgICAgICAgLy8gUmVkdWNlZCBzY2FsZSBieSAyNSUgKGZyb20gMC4yIHRvIDAuMTUpCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSAwLjE1OwogICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwLnggKyBwLndpZHRoIC8gMiwgcC55ICsgcC5oZWlnaHQgLyAyKTsKICAgICAgICAgICAgICAgICAgICAvLyBBc3N1bWluZyBzcHJpdGUgZmFjZXMgbGVmdCBvciByaWdodCwgd2UganVzdCBkcmF3IGNlbnRlcmVkCiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2UgaXQncyBmbG9hdGluZywgbGV0J3MgYWRkIGEgbGl0dGxlIGJvYiB2aXN1YWwgb2Zmc2V0IGFscmVhZHkgaGFuZGxlZCBieSBwLnkgaW4gdXBkYXRlCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBpbWFnZQogICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAtaW1nLndpZHRoICogc2NhbGUgLyAyLCAtaW1nLmhlaWdodCAqIHNjYWxlIC8gMiwgaW1nLndpZHRoICogc2NhbGUsIGltZy5oZWlnaHQgKiBzY2FsZSk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IENPTE9SUy5ZQUNBUkU7CiAgICAgICAgICAgICAgICAgICAgZHJhd1JvdW5kZWRSZWN0KGN0eCwgcC54LCBwLnkgKyAxMCwgcC53aWR0aCwgcC5oZWlnaHQgLSAxMCwgNSk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3llbGxvdyc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5hcmMocC54ICsgMTUsIHAueSArIDUsIDQsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IENPTE9SUy5ESVJUOwogICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHAueCwgcC55LCBwLndpZHRoLCBwLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gQ09MT1JTLkdSQVNTX1RPUDsKICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChwLngsIHAueSwgcC53aWR0aCwgMTApOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gSXRlbXMKICAgICAgICBzdGF0ZS5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWF0ZScpIHsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBDT0xPUlMuTUFURTsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5hcmMoaXRlbS54ICsgaXRlbS53aWR0aCAvIDIsIGl0ZW0ueSArIGl0ZW0uaGVpZ2h0IC8gMiArIDUsIDEwLCAwLCBNYXRoLlBJLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGl0ZW0ueCArIGl0ZW0ud2lkdGggLyAyIC0gMTAsIGl0ZW0ueSArIGl0ZW0uaGVpZ2h0IC8gMiAtIDUsIDIwLCAxMCk7CiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI0MwQzBDMCc7CiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oaXRlbS54ICsgaXRlbS53aWR0aCAvIDIgKyA1LCBpdGVtLnkgKyBpdGVtLmhlaWdodCAvIDIgLSA1KTsKICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oaXRlbS54ICsgaXRlbS53aWR0aCAvIDIgKyAxNSwgaXRlbS55ICsgaXRlbS5oZWlnaHQgLyAyIC0gMjApOwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3llcmJhJykgewogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IENPTE9SUy5ZRVJCQTsKICAgICAgICAgICAgICAgIGRyYXdSb3VuZGVkUmVjdChjdHgsIGl0ZW0ueCwgaXRlbS55LCBpdGVtLndpZHRoLCBpdGVtLmhlaWdodCwgMyk7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgLy8gTGFiZWwgLyBEZXRhaWwgb24gcGFja2FnZQogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGJzsKICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzEwcHggbW9ub3NwYWNlJzsKICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiWUVSIiwgaXRlbS54ICsgMiwgaXRlbS55ICsgMTUpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJCQSIsIGl0ZW0ueCArIDQsIGl0ZW0ueSArIDI1KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdwb3J0YWwnKSB7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gQ09MT1JTLlBPUlRBTDsKICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5lbGxpcHNlKGl0ZW0ueCArIGl0ZW0ud2lkdGggLyAyLCBpdGVtLnkgKyBpdGVtLmhlaWdodCAvIDIsIDMwLCA1MCwgMCwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEuMDsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgICAgICAgICAgICBjdHguZm9udCA9ICcyMHB4IFZUMzIzJzsKICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiRklOIiwgaXRlbS54ICsgMTUsIGl0ZW0ueSArIDQwKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIEVuZW1pZXMgJiBCb3NzCiAgICAgICAgc3RhdGUuZW5lbWllcy5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICBpZiAoZS5lbmVteVR5cGUgPT09ICdtb3NxdWl0bycpIHsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBDT0xPUlMuTU9TUVVJVE87CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKGUueCArIGUud2lkdGggLyAyLCBlLnkgKyBlLmhlaWdodCAvIDIsIDUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC43KSc7CiAgICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gNTApICUgMiA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZWxsaXBzZShlLnggKyBlLndpZHRoIC8gMiwgZS55LCA4LCAzLCAwLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlLmVuZW15VHlwZSA9PT0gJ3lhY2FyZScpIHsKICAgICAgICAgICAgICAgIC8vIENoZWNrIHN1YnR5cGUgZm9yIHJlbmRlcmluZyBsb2dpYwogICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBsYW5kIHlhY2FyZQogICAgICAgICAgICAgICAgbGV0IGltZyA9IHlhY2FyZUxhbmRJbWFnZVJlZi5jdXJyZW50OwogICAgICAgICAgICAgICAgLy8gU0NBTEUgSU5DUkVBU0VEIEJZIDEwJSAoMC4xMSAtPiAwLjEyKQogICAgICAgICAgICAgICAgbGV0IHNjYWxlID0gMC4xMjsKICAgICAgICAgICAgICAgIC8vIEFkanVzdGVkIFZpc3VhbCBPZmZzZXQgdG8gcHVsbCB0aGVtIFVQOiBDaGFuZ2VkIGZyb20gLTUgdG8gLTE4IHRvIGZpeCBidXJpZWQgbG9vawogICAgICAgICAgICAgICAgbGV0IHlPZmZzZXQgPSAtMTg7CiAgICAgICAgICAgICAgICAvLyBTd2FwIHRvIHNuYWtlIGlmIHN1YnR5cGUgbWF0Y2hlcwogICAgICAgICAgICAgICAgaWYgKGUuc3VidHlwZSA9PT0gJ3NuYWtlX2xhbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgaW1nID0gc25ha2VNaW5pb25JbWFnZVJlZi5jdXJyZW50OwogICAgICAgICAgICAgICAgICAgIC8vIFNDQUxFIElOQ1JFQVNFRCBCWSAxMCUgKDAuMDggLT4gMC4wOSkKICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IDAuMDk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaW1nICYmIGltZy5jb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY2luZyA9IGUudnggPiAwID8gLTEgOiAxOwogICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShlLnggKyBlLndpZHRoIC8gMiwgZS55ICsgZS5oZWlnaHQgLyAyICsgeU9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNjYWxlKGZhY2luZyAqIHNjYWxlLCBzY2FsZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUuc3VidHlwZSAhPT0gJ3NuYWtlX2xhbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZmlsdGVyIHRoZSBvcmlnaW5hbCBsYW5kIHlhY2FyZSBpZiBuZWVkZWQsIG9yIHJlbW92ZSBmaWx0ZXIgZm9yIG5ldyBhc3NldHMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgcHJvdmlkZWQgYSBzcGVjaWZpYyBuZXcgYXNzZXQsIGxpa2VseSBkb2Vzbid0IG5lZWQgZmlsdGVyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAtaW1nLndpZHRoIC8gMiwgLWltZy5oZWlnaHQgLyAyKTsKICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IENPTE9SUy5ZQUNBUkU7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGUueCwgZS55ICsgMTAsIGUud2lkdGgsIGUuaGVpZ2h0IC0gMTApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUuZW5lbXlUeXBlID09PSAnYm9zcycpIHsKICAgICAgICAgICAgICAgIC8vIEJvc3MgRmFjaW5nIExvZ2ljOiBBbHdheXMgbG9vayBhdCB0aGUgcGxheWVyCiAgICAgICAgICAgICAgICBjb25zdCBmYWNpbmcgPSAoc3RhdGUucGxheWVyLnggPCBlLngpID8gMSA6IC0xOwogICAgICAgICAgICAgICAgaWYgKGUuYm9zc1ZhcmlhbnQgPT09ICdhbmFjb25kYScpIHsKICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQU5BQ09OREEgQk9TUyBSRU5ERVJJTkcgLS0tCiAgICAgICAgICAgICAgICAgICAgaWYgKGFuYWNvbmRhSW1hZ2VSZWYuY3VycmVudCAmJiBhbmFjb25kYUltYWdlUmVmLmN1cnJlbnQuY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gYW5hY29uZGFJbWFnZVJlZi5jdXJyZW50OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBJTkNSRUFTRUQgU0laRSBVUERBVEU6CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNjYWxlIGluY3JlYXNlZCBmcm9tIDAuNCB0byAwLjYgKDUwJSBiaWdnZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9mZnNldCBZIGFkanVzdGVkIGZyb20gLTU1IHRvIC04NSB0byBhbGlnbiBjb3JyZWN0bHkgdG8gdGhlIGZsb29yIHdpdGggbmV3IHNpemUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShlLnggKyBlLndpZHRoIC8gMiwgZS55ICsgZS5oZWlnaHQgLyAyIC0gODUpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IDAuNjsgLy8gSW5jcmVhc2VkIGZyb20gMC40CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zY2FsZShmYWNpbmcgKiBzY2FsZSwgc2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmlkIExvZ2ljOiAyNTYweDIwNDgsIDIwIGZyYW1lcwogICAgICAgICAgICAgICAgICAgICAgICAvLyAyNTYwIC8gNSA9IDUxMnB4IHdpZHRoCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIwNDggLyA0ID0gNTEycHggaGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyaWQ6IDUgY29sdW1ucywgNCByb3dzCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lU2l6ZSA9IDUxMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29scyA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsRnJhbWVzID0gMjA7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuaW1hdGlvbiBMb29wIChzbG93ZXIgc3BlZWQgODBtcyBwZXIgZnJhbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lSW5kZXggPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyA4MCkgJSB0b3RhbEZyYW1lczsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVDb2wgPSBmcmFtZUluZGV4ICUgY29sczsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVSb3cgPSBNYXRoLmZsb29yKGZyYW1lSW5kZXggLyBjb2xzKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIGZyYW1lQ29sICogZnJhbWVTaXplLCBmcmFtZVJvdyAqIGZyYW1lU2l6ZSwgZnJhbWVTaXplLCBmcmFtZVNpemUsIC1mcmFtZVNpemUgLyAyLCAtZnJhbWVTaXplIC8gMiwgZnJhbWVTaXplLCBmcmFtZVNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgcHJvY2VkdXJhbCBzbmFrZQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWNpbmdWID0gZS52eCA+IDAgPyAtMSA6IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoZS54ICsgZS53aWR0aCAvIDIsIGUueSArIGUuaGVpZ2h0IC8gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zY2FsZShmYWNpbmdWLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudHMgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50V2lkdGggPSBlLndpZHRoIC8gc2VnbWVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpICogMC4wMDU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IChpICogc2VnbWVudFdpZHRoKSAtIChlLndpZHRoIC8gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXZlWSA9IE1hdGguc2luKHRpbWUgKyBpKSAqIDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGkgJSAyID09PSAwID8gQ09MT1JTLkFOQUNPTkRBIDogQ09MT1JTLkFOQUNPTkRBX1NQT1Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYXJjKG9mZnNldFgsIHdhdmVZLCAyNSwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBZQUNBUkUgQk9TUyBSRU5ERVJJTkcgKFVQREFURUQpIC0tLQogICAgICAgICAgICAgICAgICAgIGlmICh5YWNhcmVCb3NzSW1hZ2VSZWYuY3VycmVudCAmJiB5YWNhcmVCb3NzSW1hZ2VSZWYuY3VycmVudC5jb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSB5YWNhcmVCb3NzSW1hZ2VSZWYuY3VycmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2Zmc2V0IFkgZml4ZWQ6IENoYW5nZWQgZnJvbSAtOTMgdG8gLTQzIHRvIGxvd2VyIGl0IHRvIHRoZSBmbG9vciAoc3RvcCBmbG9hdGluZykKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShlLnggKyBlLndpZHRoIC8gMiwgZS55ICsgZS5oZWlnaHQgLyAyIC0gNDMpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBTY2FsZSBmb3IgdmlzdWFsIGZpdAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoZmFjaW5nICogMC42LCAwLjYpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmlkIENhbGN1bGF0aW9uIGZvciAzMDcyeDMwNzIgc3ByaXRlLCAzNiBmcmFtZXMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMzA3MiAvIDYgPSA1MTJweCBwZXIgZnJhbWUuIDYgQ29scywgNiBSb3dzLgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFtZVNpemUgPSA1MTI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEZyYW1lcyA9IDM2OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gNTApICUgdG90YWxGcmFtZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lQ29sID0gZnJhbWVJbmRleCAlIGNvbHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lUm93ID0gTWF0aC5mbG9vcihmcmFtZUluZGV4IC8gY29scyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCBmcmFtZUNvbCAqIGZyYW1lU2l6ZSwgZnJhbWVSb3cgKiBmcmFtZVNpemUsIGZyYW1lU2l6ZSwgZnJhbWVTaXplLCAtZnJhbWVTaXplIC8gMiwgLWZyYW1lU2l6ZSAvIDIsIGZyYW1lU2l6ZSwgZnJhbWVTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIEJvc3MgUmVjdGFuZ2xlCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBDT0xPUlMuQk9TUzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGUueCwgZS55ICsgMjAsIGUud2lkdGgsIGUuaGVpZ2h0IC0gMjApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIE5vdGU6IEhlYWx0aCBiYXIgcmVuZGVyaW5nIG1vdmVkIHRvIEhVRCBsYXllciBiZWxvdwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gUHJvamVjdGlsZXMKICAgICAgICBzdGF0ZS5wcm9qZWN0aWxlcy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgICBpZiAocC50eXBlID09PSAncHJvamVjdGlsZScpIHsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBDT0xPUlMuVE9SVEFfRlJJVEE7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKHAueCArIHAud2lkdGggLyAyLCBwLnkgKyBwLmhlaWdodCAvIDIsIHAud2lkdGggLyAyLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgLy8gSW5uZXIgVG9ydGEgRnJpdGEgZGV0YWlsCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNFRjZDMDAnOwogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4LmFyYyhwLnggKyBwLndpZHRoIC8gMiwgcC55ICsgcC5oZWlnaHQgLyAyLCBwLndpZHRoIC8gNiwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzlDMjdCMCc7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKHAueCArIHAud2lkdGggLyAyLCBwLnkgKyBwLmhlaWdodCAvIDIsIDEwLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gUGxheWVyIC0gT25seSBkcmF3IGlmIHBsYXlpbmcgb3IgZ2FtZSBvdmVyIChISURFIElOIE1FTlUgVE9VUikKICAgICAgICBpZiAoc3RhdGUuc3RhdHVzICE9PSBHYW1lU3RhdHVzLk1FTlUpIHsKICAgICAgICAgICAgY29uc3QgcCA9IHN0YXRlLnBsYXllcjsKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgaWYgKHAuaW52aW5jaWJsZVVudGlsID4gMCAmJiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDApICUgMiA9PT0gMCkgewogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC41OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGZhY2luZyA9IHAuZmFjaW5nUmlnaHQgPyAxIDogLTE7CiAgICAgICAgICAgIGNvbnN0IGNlbnRlclggPSBwLnggKyBwLndpZHRoIC8gMjsKICAgICAgICAgICAgY29uc3QgY2VudGVyWSA9IHAueSArIHAuaGVpZ2h0IC8gMjsKICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjZW50ZXJYLCBjZW50ZXJZKTsKICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSAwLjU7IC8vIFNjYWxlIGRvd24gNTEyeDUxMiBzcHJpdGUKICAgICAgICAgICAgY3R4LnNjYWxlKGZhY2luZyAqIHNjYWxlLCBzY2FsZSk7CiAgICAgICAgICAgIC8vIERpc2FibGUgc21vb3RoaW5nIGZvciBwaXhlbCBhcnQgbG9vawogICAgICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7CiAgICAgICAgICAgIC8vIC0tLSBTcHJpdGUgU2VsZWN0aW9uIExvZ2ljIC0tLQogICAgICAgICAgICBsZXQgY3VycmVudEltYWdlID0gcGxheWVySW1hZ2VSZWYuY3VycmVudDsKICAgICAgICAgICAgbGV0IGlzSnVtcGluZyA9ICFwLmlzR3JvdW5kZWQ7CiAgICAgICAgICAgIGlmIChpc0p1bXBpbmcgJiYgcGxheWVySnVtcEltYWdlUmVmLmN1cnJlbnQgJiYgcGxheWVySnVtcEltYWdlUmVmLmN1cnJlbnQuY29tcGxldGUpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRJbWFnZSA9IHBsYXllckp1bXBJbWFnZVJlZi5jdXJyZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjdXJyZW50SW1hZ2UgJiYgY3VycmVudEltYWdlLmNvbXBsZXRlICYmIGN1cnJlbnRJbWFnZS5uYXR1cmFsSGVpZ2h0ICE9PSAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBjdXJyZW50SW1hZ2U7CiAgICAgICAgICAgICAgICBsZXQgZnJhbWVDb2xzID0gMTsKICAgICAgICAgICAgICAgIGxldCBmcmFtZVJvd3MgPSAxOwogICAgICAgICAgICAgICAgbGV0IGZyYW1lWCA9IDA7CiAgICAgICAgICAgICAgICBsZXQgZnJhbWVZID0gMDsKICAgICAgICAgICAgICAgIC8vIC0tLSBMYXlvdXQgRGV0ZWN0aW9uIC0tLQogICAgICAgICAgICAgICAgaWYgKGltZy5uYXR1cmFsV2lkdGggPT09IDI1NjAgJiYgaW1nLm5hdHVyYWxIZWlnaHQgPT09IDI1NjApIHsKICAgICAgICAgICAgICAgICAgICBmcmFtZUNvbHMgPSA1OwogICAgICAgICAgICAgICAgICAgIGZyYW1lUm93cyA9IDU7CiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyB0aGUgc3BlY2lmaWMgSnVtcCBTaGVldCAoY2hlY2tlZCBieSBjaGVja2luZyBpZiB3ZSBzZWxlY3RlZCB0aGUganVtcCBpbWFnZSkKICAgICAgICAgICAgICAgICAgICBpZiAoaW1nID09PSBwbGF5ZXJKdW1wSW1hZ2VSZWYuY3VycmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIFNoZWV0IExvZ2ljICgyNSBmcmFtZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN5Y2xlIHRocm91Z2ggYWxsIDI1IGZyYW1lcyBmb3IgYSBzbW9vdGggYW5pbWF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDI1IGZyYW1lcyBhdCAzMG1zIGVhY2ggPSA3NTBtcyB0b3RhbCBsb29wLiAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxGcmFtZXMgPSAyNTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVJbmRleCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDMwKSAlIHRvdGFsRnJhbWVzOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVggPSBmcmFtZUluZGV4ICUgNTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVZID0gTWF0aC5mbG9vcihmcmFtZUluZGV4IC8gNSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWluIFNoZWV0IExvZ2ljCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJvdyAwOiBJZGxlLCBSb3cgMTogV2FsaywgUm93IDI6IChPbGQgSnVtcCAtIHVudXNlZCksIFJvdyAzOiBBdHRhY2ssIFJvdyA0OiBEYW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAuY29vbGRvd24gPiAxMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXR0YWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVkgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVYID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gNTApICUgNTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChNYXRoLmFicyhwLnZ4KSA+IDAuMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVkgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5pbVNwZWVkID0gcC5pc1NwcmludGluZyA/IDgwIDogMTIwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVYID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gYW5pbVNwZWVkKSAlIDU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVYID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMjAwKSAlIDU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBmb3IgZGlmZmVyZW50IGxheW91dHMgKHN0YW5kYXJkIHN0cmlwcyBldGMpCiAgICAgICAgICAgICAgICAgICAgLy8gLi4uIFtQcmV2aW91cyBmYWxsYmFjayBsb2dpY10gLi4uCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5uYXR1cmFsV2lkdGggPiBpbWcubmF0dXJhbEhlaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZUNvbHMgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVJvd3MgPSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbWcubmF0dXJhbFdpZHRoICogNCA9PT0gaW1nLm5hdHVyYWxIZWlnaHQgKiAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lQ29scyA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lUm93cyA9IDQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGltZy5uYXR1cmFsV2lkdGggPT09IGltZy5uYXR1cmFsSGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWcubmF0dXJhbFdpZHRoIDwgMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZUNvbHMgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVSb3dzID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZnJhbWVDb2xzID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWRlUm93ID0gZnJhbWVSb3dzID4gMSA/IDIgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVkgPSBzaWRlUm93OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMocC52eCkgPiAwLjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1TcGVlZCA9IHAuaXNTcHJpbnRpbmcgPyA4MCA6IDEyMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZUNvbHMgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeWNsZSA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIGFuaW1TcGVlZCkgJSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lWCA9IGN5Y2xlID09PSAzID8gMSA6IGN5Y2xlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVYID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gYW5pbVNwZWVkKSAlIGZyYW1lQ29sczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lV2lkdGggPSBNYXRoLmZsb29yKGltZy5uYXR1cmFsV2lkdGggLyBmcmFtZUNvbHMpOwogICAgICAgICAgICAgICAgY29uc3QgZnJhbWVIZWlnaHQgPSBNYXRoLmZsb29yKGltZy5uYXR1cmFsSGVpZ2h0IC8gZnJhbWVSb3dzKTsKICAgICAgICAgICAgICAgIC8vIERyYXcgY2VudGVyZWQKICAgICAgICAgICAgICAgIGNvbnN0IGRyYXdTaXplID0gMjU2OwogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIGZyYW1lWCAqIGZyYW1lV2lkdGgsIGZyYW1lWSAqIGZyYW1lSGVpZ2h0LCBmcmFtZVdpZHRoLCBmcmFtZUhlaWdodCwgLWRyYXdTaXplIC8gMiwgLWRyYXdTaXplIC8gMiAtIDgsIGRyYXdTaXplLCBkcmF3U2l6ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBwcm9jZWR1cmFsIGRyYXdpbmcgKGlmIGltYWdlcyBmYWlsIHRvIGxvYWQpCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gQ09MT1JTLlBMQVlFUjsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGRyYXdSb3VuZGVkUmVjdChjdHgsIC0yMCwgLTE1LCA0MCwgMzAsIDUpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGRyYXdSb3VuZGVkUmVjdChjdHgsIDEwLCAtMjAsIDI1LCAyNSwgOCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNUQ0MDM3JzsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5hcmMoOCwgLTIwLCA0LCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKDIwLCAtMTIsIDIsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJzsKICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgzMiwgLTEwLCA0LCA4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0KICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIC8vIC0tLSBIVUQ6IEJvc3MgSGVhbHRoIEJhciAtLS0KICAgICAgICAvLyBEcmF3biBhZnRlciByZXN0b3JlKCkgc28gaXQgc3RheXMgZml4ZWQgb24gc2NyZWVuIHJlbGF0aXZlIHRvIGNhbWVyYQogICAgICAgIGlmIChzdGF0ZS5ib3NzQWN0aXZlKSB7CiAgICAgICAgICAgIGNvbnN0IGJvc3MgPSBzdGF0ZS5lbmVtaWVzLmZpbmQoZSA9PiBlLmVuZW15VHlwZSA9PT0gJ2Jvc3MnKTsKICAgICAgICAgICAgaWYgKGJvc3MgJiYgYm9zcy5oZWFsdGggPiAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBiYXJXaWR0aCA9IDIwMDsKICAgICAgICAgICAgICAgIGNvbnN0IGJhckhlaWdodCA9IDIwOwogICAgICAgICAgICAgICAgLy8gUG9zaXRpb25lZCBhdCBUb3AtUmlnaHQKICAgICAgICAgICAgICAgIGNvbnN0IHggPSBHQU1FX1dJRFRIIC0gYmFyV2lkdGggLSAyMDsKICAgICAgICAgICAgICAgIGNvbnN0IHkgPSAyMDsKICAgICAgICAgICAgICAgIC8vIEJhY2tncm91bmQKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjcpJzsKICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCBiYXJXaWR0aCArIDQsIGJhckhlaWdodCArIDQpOwogICAgICAgICAgICAgICAgLy8gQmFyCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNEMzJGMkYnOwogICAgICAgICAgICAgICAgY29uc3QgZmlsbFdpZHRoID0gKGJvc3MuaGVhbHRoIC8gYm9zcy5tYXhIZWFsdGgpICogYmFyV2lkdGg7CiAgICAgICAgICAgICAgICAvLyBGaWxsIGZyb20gcmlnaHQgdG8gbGVmdCBvciBsZWZ0IHRvIHJpZ2h0PyBTdGFuZGFyZCBsZWZ0LXRvLXJpZ2h0IGZpbGwgaW5zaWRlIHRoZSByaWdodC1hbGlnbmVkIGJveAogICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHggKyAyLCB5ICsgMiwgZmlsbFdpZHRoLCBiYXJIZWlnaHQpOwogICAgICAgICAgICAgICAgLy8gVGV4dAogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGJzsKICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzE2cHggVlQzMjMnOwogICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdyaWdodCc7CiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYm9zcy5ib3NzVmFyaWFudCA9PT0gJ2FuYWNvbmRhJyA/ICJBTkFDT05EQSIgOiAiUkVZIFlBQ0FSw4kiLCB4ICsgYmFyV2lkdGgsIHkgKyBiYXJIZWlnaHQgKyAxNSk7CiAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2xlZnQnOyAvLyBSZXNldAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGxvb3AgPSAodGltZSkgPT4gewogICAgICAgIGNvbnN0IGRlbHRhVGltZSA9IHRpbWUgLSBnYW1lU3RhdGUuY3VycmVudC5sYXN0VGltZTsKICAgICAgICBpZiAoZGVsdGFUaW1lID4gMTYpIHsKICAgICAgICAgICAgdXBkYXRlKCk7CiAgICAgICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50Lmxhc3RUaW1lID0gdGltZTsKICAgICAgICB9CiAgICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICAgICAgaWYgKGNhbnZhcykgewogICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgaWYgKGN0eCkKICAgICAgICAgICAgICAgIGRyYXcoY3R4KTsKICAgICAgICB9CiAgICAgICAgcmVxdWVzdFJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApOwogICAgfTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgcmVxdWVzdFJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApOwogICAgICAgIHJldHVybiAoKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXF1ZXN0UmVmLmN1cnJlbnQpCiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyZXF1ZXN0UmVmLmN1cnJlbnQpOwogICAgICAgIH07CiAgICB9LCBbXSk7CiAgICByZXR1cm4gKF9qc3goImNhbnZhcyIsIHsgcmVmOiBjYW52YXNSZWYsIHdpZHRoOiBHQU1FX1dJRFRILCBoZWlnaHQ6IEdBTUVfSEVJR0hULCBjbGFzc05hbWU6ICJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb250YWluIGJnLWJsYWNrIHNoYWRvdy0yeGwgcm91bmRlZC1sZyBib3JkZXItNCBib3JkZXItYW1iZXItODAwIGN1cnNvci1ub25lIiB9KSk7Cn07Cg==","@/services/levelGenerator":"data:application/javascript;base64,aW1wb3J0IHsgR2FtZVN0YXR1cyB9IGZyb20gJ0AvdHlwZXMnOwppbXBvcnQgeyBHQU1FX0hFSUdIVCwgR0FNRV9XSURUSCwgVElMRV9TSVpFLCBMRVZFTF9DT05GSUdTIH0gZnJvbSAnQC9jb25zdGFudHMnOwovLyBTZWVkZWQgUmFuZG9tIE51bWJlciBHZW5lcmF0b3IKbGV0IF9zZWVkID0gMTIzNDU7CmNvbnN0IHNldFNlZWQgPSAocykgPT4geyBfc2VlZCA9IHM7IH07CmNvbnN0IHJhbmRvbSA9ICgpID0+IHsKICAgIF9zZWVkID0gKF9zZWVkICogOTMwMSArIDQ5Mjk3KSAlIDIzMzI4MDsKICAgIHJldHVybiBfc2VlZCAvIDIzMzI4MDsKfTsKZXhwb3J0IGNvbnN0IGdlbmVyYXRlTGV2ZWwgPSAobGV2ZWxJbmRleCkgPT4gewogICAgY29uc3QgY29uZmlnID0gTEVWRUxfQ09ORklHU1tsZXZlbEluZGV4IC0gMV0gfHwgTEVWRUxfQ09ORklHU1swXTsKICAgIGNvbnN0IGRpZmZpY3VsdHlNdWx0aXBsaWVyID0gMSArIChsZXZlbEluZGV4ICogMC4yKTsKICAgIHNldFNlZWQoMTAwMCAqIGxldmVsSW5kZXggKyAxMjMpOwogICAgY29uc3QgcGxhdGZvcm1zID0gW107CiAgICBjb25zdCBlbmVtaWVzID0gW107CiAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgLy8gRGV0ZXJtaW5lIGVudmlyb25tZW50IHR5cGUgZm9yIGVuZW15IGdlbmVyYXRpb24KICAgIGNvbnN0IGlzSnVuZ2xlRW52aXJvbm1lbnQgPSBsZXZlbEluZGV4ID49IDQ7CiAgICAvLyBHcm91bmQgbGV2ZWwgc3RhcnQKICAgIGxldCBjdXJyZW50WCA9IDA7CiAgICAvLyBTdGFydGluZyBzYWZlIHpvbmUKICAgIHBsYXRmb3Jtcy5wdXNoKHsKICAgICAgICBpZDogJ3N0YXJ0X2dyb3VuZCcsCiAgICAgICAgdHlwZTogJ3BsYXRmb3JtJywKICAgICAgICBzdWJ0eXBlOiAnbm9ybWFsJywKICAgICAgICB4OiAwLAogICAgICAgIHk6IEdBTUVfSEVJR0hUIC0gVElMRV9TSVpFICogMiwKICAgICAgICB3aWR0aDogNjAwLAogICAgICAgIGhlaWdodDogVElMRV9TSVpFICogMiwKICAgICAgICB2eDogMCwKICAgICAgICB2eTogMAogICAgfSk7CiAgICBjdXJyZW50WCArPSA2MDA7CiAgICAvLyBUcmFjayBwcmV2aW91cyBwbGF0Zm9ybSBoZWlnaHQgdG8gZW5zdXJlIGp1bXBzIGFyZSByZWFjaGFibGUKICAgIGxldCBsYXN0UGxhdGZvcm1ZID0gR0FNRV9IRUlHSFQgLSBUSUxFX1NJWkUgKiAyOwogICAgLy8gQm9zcyBMZXZlbCBDaGVja3MKICAgIGNvbnN0IGlzWWFjYXJlQm9zcyA9IGxldmVsSW5kZXggPT09IDM7CiAgICBjb25zdCBpc0FuYWNvbmRhQm9zcyA9IGxldmVsSW5kZXggPT09IDY7CiAgICBjb25zdCBpc0Jvc3NMZXZlbCA9IGlzWWFjYXJlQm9zcyB8fCBpc0FuYWNvbmRhQm9zczsKICAgIC8vIEFkanVzdGVkIGludHJvIGxlbmd0aCBmb3IgYm9zcyBsZXZlbHMKICAgIGNvbnN0IGdlbmVyYXRpb25MZW5ndGggPSBpc0Jvc3NMZXZlbCA/IChpc0FuYWNvbmRhQm9zcyA/IDQwMDAgOiAzMDAwKSA6IGNvbmZpZy5sZW5ndGg7CiAgICB3aGlsZSAoY3VycmVudFggPCBnZW5lcmF0aW9uTGVuZ3RoKSB7CiAgICAgICAgLy8gR0FQIEdFTkVSQVRJT04KICAgICAgICAvLyBGaXg6IFJlZHVjZWQgbXVsdGlwbGllciBmb3IgTGV2ZWwgNiB0byBwcmV2ZW50IGltcG9zc2libGUganVtcHMgY29tYmluZWQgd2l0aCBib3NzIGRpZmZpY3VsdHkKICAgICAgICBjb25zdCBnYXBNdWx0aXBsaWVyID0gbGV2ZWxJbmRleCA9PT0gNiA/IDEuMiA6IChsZXZlbEluZGV4ID4gMyA/IDEuNSA6IDEpOwogICAgICAgIGxldCBnYXBTaXplID0gNTAgKyByYW5kb20oKSAqICgxMjAgKiBkaWZmaWN1bHR5TXVsdGlwbGllciAqIGdhcE11bHRpcGxpZXIpOwogICAgICAgIC8vIFNBRkVUWSBDQVA6IExpbWl0IG1heCBnYXAgdG8gMzAwcHggdG8gZW5zdXJlIHBsYXlhYmlsaXR5IChQbGF5ZXIgbWF4IGp1bXAgaXMgfjQwMHB4KQogICAgICAgIGlmIChnYXBTaXplID4gMzAwKQogICAgICAgICAgICBnYXBTaXplID0gMzAwOwogICAgICAgIC8vIFdhdGVyIGhhemFyZCBsb2dpYwogICAgICAgIGNvbnN0IGlzV2F0ZXJHYXAgPSBnYXBTaXplID4gMTIwOwogICAgICAgIGNvbnN0IHdhdGVyTGV2ZWxZID0gR0FNRV9IRUlHSFQgLSAzNTsKICAgICAgICAvLyBGbG9hdGluZyBZYWNhcmUgUGxhdGZvcm0gKExldmVsIDIrKQogICAgICAgIGlmIChpc1dhdGVyR2FwICYmIGxldmVsSW5kZXggPj0gMikgewogICAgICAgICAgICBjb25zdCB5YWNhcmVDb3VudCA9IE1hdGguZmxvb3IoZ2FwU2l6ZSAvIDEwMCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgeWFjYXJlQ291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgLy8gQWRqdXN0ZWQgWDogcHVzaGVkIGZ1cnRoZXIgaW50byB0aGUgZ2FwICgrNjApIHNvIG9zY2lsbGF0aW9uIGRvZXNuJ3QgaGl0IHRoZSBsZWZ0IGJhbmsKICAgICAgICAgICAgICAgIGNvbnN0IHlQb3MgPSB3YXRlckxldmVsWTsKICAgICAgICAgICAgICAgIHBsYXRmb3Jtcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogYGZsb2F0X3lhY2FyZV8ke2N1cnJlbnRYfV8ke2l9YCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGxhdGZvcm0nLAogICAgICAgICAgICAgICAgICAgIHN1YnR5cGU6ICd5YWNhcmVfZmxvYXRpbmcnLAogICAgICAgICAgICAgICAgICAgIHg6IGN1cnJlbnRYICsgKGkgKiAxMDApICsgNjAsCiAgICAgICAgICAgICAgICAgICAgeTogeVBvcywKICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMiwKICAgICAgICAgICAgICAgICAgICB2eDogMSwgLy8gTW92aW5nIHBsYXRmb3JtCiAgICAgICAgICAgICAgICAgICAgdnk6IDAsCiAgICAgICAgICAgICAgICAgICAgbWFya2VkRm9yRGVsZXRpb246IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjdXJyZW50WCArPSBnYXBTaXplOwogICAgICAgIC8vIFBMQVRGT1JNIEdFTkVSQVRJT04KICAgICAgICBjb25zdCBwbGF0Zm9ybVdpZHRoID0gMjAwICsgcmFuZG9tKCkgKiA0MDA7CiAgICAgICAgLy8gUmVsYXRpdmUgSGVpZ2h0IExvZ2ljIHRvIHByZXZlbnQgaW1wb3NzaWJsZSB2ZXJ0aWNhbCBjbGltYnMKICAgICAgICBsZXQgeTsKICAgICAgICBjb25zdCBtaW5IZWlnaHQgPSBUSUxFX1NJWkUgKiAyOyAvLyBLZWVwIGJlbG93IEhVRAogICAgICAgIGNvbnN0IG1heEhlaWdodCA9IEdBTUVfSEVJR0hUIC0gVElMRV9TSVpFOyAvLyBLZWVwIGFib3ZlIGJvdHRvbSB2b2lkCiAgICAgICAgaWYgKGlzV2F0ZXJHYXAgJiYgbGV2ZWxJbmRleCA+PSAyKSB7CiAgICAgICAgICAgIC8vIElmIGNvbWluZyBmcm9tIHdhdGVyL2Zsb2F0aW5nIHBsYXRmb3JtcywgdGhlIG5leHQgcGxhdGZvcm0gTVVTVCBiZSByZWFjaGFibGUgZnJvbSB3YXRlciBsZXZlbC4KICAgICAgICAgICAgLy8gTWF4IGNvbWZvcnRhYmxlIGp1bXAgdXAgZnJvbSB3YXRlciAofjQxNSkgaXMgYWJvdXQgMTIwcHggLT4gMjk1LgogICAgICAgICAgICBjb25zdCBtYXhVcEZyb21XYXRlciA9IDExMDsKICAgICAgICAgICAgY29uc3QgbG93ZXN0UmVhY2hhYmxlWSA9IHdhdGVyTGV2ZWxZIC0gbWF4VXBGcm9tV2F0ZXI7IC8vIGUuZy4gfjMwNQogICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIFkgdGhhdCBpcyBiZXR3ZWVuIHRoZSBsb3dlc3QgcmVhY2hhYmxlIHBvaW50IGFuZCB0aGUgZ3JvdW5kCiAgICAgICAgICAgIHkgPSBsb3dlc3RSZWFjaGFibGVZICsgcmFuZG9tKCkgKiAoR0FNRV9IRUlHSFQgLSBUSUxFX1NJWkUgLSBsb3dlc3RSZWFjaGFibGVZKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIE5vcm1hbCBqdW1wIGZyb20gcHJldmlvdXMgcGxhdGZvcm0KICAgICAgICAgICAgLy8gQWxsb3cgbW92aW5nIFVQIGJ5IH4xMjBweCBvciBET1dOIGJ5IH4xMDBweAogICAgICAgICAgICBjb25zdCBkZWx0YSA9IChyYW5kb20oKSAqIDIyMCkgLSAxMjA7CiAgICAgICAgICAgIHkgPSBsYXN0UGxhdGZvcm1ZICsgZGVsdGE7CiAgICAgICAgfQogICAgICAgIC8vIENsYW1wIFkgdG8gc2NyZWVuIGJvdW5kcwogICAgICAgIGlmICh5ID4gbWF4SGVpZ2h0KQogICAgICAgICAgICB5ID0gbWF4SGVpZ2h0OwogICAgICAgIGlmICh5IDwgbWluSGVpZ2h0KQogICAgICAgICAgICB5ID0gbWluSGVpZ2h0OwogICAgICAgIGxhc3RQbGF0Zm9ybVkgPSB5OwogICAgICAgIHBsYXRmb3Jtcy5wdXNoKHsKICAgICAgICAgICAgaWQ6IGBwbGF0XyR7Y3VycmVudFh9YCwKICAgICAgICAgICAgdHlwZTogJ3BsYXRmb3JtJywKICAgICAgICAgICAgc3VidHlwZTogJ25vcm1hbCcsCiAgICAgICAgICAgIHg6IGN1cnJlbnRYLAogICAgICAgICAgICB5OiB5LAogICAgICAgICAgICB3aWR0aDogcGxhdGZvcm1XaWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgICAgICAgIHZ4OiAwLAogICAgICAgICAgICB2eTogMAogICAgICAgIH0pOwogICAgICAgIC8vIEVuZW1pZXMKICAgICAgICBpZiAocmFuZG9tKCkgPiAwLjMpIHsKICAgICAgICAgICAgY29uc3QgdHlwZVJvbGwgPSByYW5kb20oKTsKICAgICAgICAgICAgaWYgKHR5cGVSb2xsID4gMC41KSB7CiAgICAgICAgICAgICAgICAvLyBNb3NxdWl0bwogICAgICAgICAgICAgICAgZW5lbWllcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogYGVuZW15XyR7Y3VycmVudFh9YCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW5lbXknLAogICAgICAgICAgICAgICAgICAgIGVuZW15VHlwZTogJ21vc3F1aXRvJywKICAgICAgICAgICAgICAgICAgICB4OiBjdXJyZW50WCArIHBsYXRmb3JtV2lkdGggLyAyLAogICAgICAgICAgICAgICAgICAgIHk6IHkgLSA4MCAtIHJhbmRvbSgpICogNTAsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIwLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgdng6IDAsCiAgICAgICAgICAgICAgICAgICAgdnk6IDAsCiAgICAgICAgICAgICAgICAgICAgcGF0cm9sU3RhcnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgcGF0cm9sRW5kOiAwLAogICAgICAgICAgICAgICAgICAgIGhlYWx0aDogMSwKICAgICAgICAgICAgICAgICAgICBtYXhIZWFsdGg6IDEKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gTGFuZCBFbmVteSAoWWFjYXJlIG9yIFNuYWtlIGRlcGVuZGluZyBvbiBsZXZlbCkKICAgICAgICAgICAgICAgIGNvbnN0IGxhbmRFbmVteVR5cGUgPSBpc0p1bmdsZUVudmlyb25tZW50ID8gJ3NuYWtlX2xhbmQnIDogJ3lhY2FyZV9sYW5kJzsKICAgICAgICAgICAgICAgIGNvbnN0IGVXaWR0aCA9IGlzSnVuZ2xlRW52aXJvbm1lbnQgPyAxNSA6IDE3OwogICAgICAgICAgICAgICAgY29uc3QgZUhlaWdodCA9IGlzSnVuZ2xlRW52aXJvbm1lbnQgPyAxMSA6IDEzOwogICAgICAgICAgICAgICAgY29uc3QgZVkgPSB5IC0gZUhlaWdodDsKICAgICAgICAgICAgICAgIGVuZW1pZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGBlbmVteV8ke2N1cnJlbnRYfWAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2VuZW15JywKICAgICAgICAgICAgICAgICAgICBlbmVteVR5cGU6ICd5YWNhcmUnLAogICAgICAgICAgICAgICAgICAgIHN1YnR5cGU6IGxhbmRFbmVteVR5cGUsCiAgICAgICAgICAgICAgICAgICAgeDogY3VycmVudFggKyA1MCwKICAgICAgICAgICAgICAgICAgICB5OiBlWSwKICAgICAgICAgICAgICAgICAgICB3aWR0aDogZVdpZHRoLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogZUhlaWdodCwKICAgICAgICAgICAgICAgICAgICB2eDogMS41ICogZGlmZmljdWx0eU11bHRpcGxpZXIsCiAgICAgICAgICAgICAgICAgICAgdnk6IDAsCiAgICAgICAgICAgICAgICAgICAgcGF0cm9sU3RhcnQ6IGN1cnJlbnRYLAogICAgICAgICAgICAgICAgICAgIHBhdHJvbEVuZDogY3VycmVudFggKyBwbGF0Zm9ybVdpZHRoIC0gNjAsCiAgICAgICAgICAgICAgICAgICAgaGVhbHRoOiAxLAogICAgICAgICAgICAgICAgICAgIG1heEhlYWx0aDogMQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gSXRlbXMKICAgICAgICBpZiAocmFuZG9tKCkgPiAwLjQpIHsKICAgICAgICAgICAgY29uc3QgaXRlbVggPSBjdXJyZW50WCArIHJhbmRvbSgpICogKHBsYXRmb3JtV2lkdGggLSA0MCk7CiAgICAgICAgICAgIGNvbnN0IGl0ZW1ZID0geSAtIDUwOwogICAgICAgICAgICBpZiAocmFuZG9tKCkgPiAwLjUpIHsKICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkOiBgbWF0ZV8ke2N1cnJlbnRYfWAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21hdGUnLAogICAgICAgICAgICAgICAgICAgIHg6IGl0ZW1YLAogICAgICAgICAgICAgICAgICAgIHk6IGl0ZW1ZLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMCwKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwLAogICAgICAgICAgICAgICAgICAgIHZ4OiAwLAogICAgICAgICAgICAgICAgICAgIHZ5OiAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkOiBgeWVyYmFfJHtjdXJyZW50WH1gLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd5ZXJiYScsCiAgICAgICAgICAgICAgICAgICAgeDogaXRlbVgsCiAgICAgICAgICAgICAgICAgICAgeTogaXRlbVksCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDI1LAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzUsCiAgICAgICAgICAgICAgICAgICAgdng6IDAsCiAgICAgICAgICAgICAgICAgICAgdnk6IDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGN1cnJlbnRYICs9IHBsYXRmb3JtV2lkdGg7CiAgICB9CiAgICAvLyBCb3NzIEFyZW5hIG9yIExldmVsIEVuZAogICAgaWYgKGlzQm9zc0xldmVsKSB7CiAgICAgICAgLy8gQ3JlYXRlIGEgYnJpZGdlIHRvIHRoZSBib3NzIGFyZW5hCiAgICAgICAgY29uc3QgYnJpZGdlU3RhcnQgPSBjdXJyZW50WDsKICAgICAgICAvLyBFbnN1cmUgYnJpZGdlIGlzIGFjY2Vzc2libGUgZnJvbSBsYXN0IHBsYXRmb3JtIChkcm9wIGRvd24gaWYgbmVlZGVkLCBvciByYW1wIHVwIHNsaWdodGx5KQogICAgICAgIC8vIFNpbmNlIGJyaWRnZSBpcyBhdCBncm91bmQgbGV2ZWwsIGFuZCBvdXIgbG9naWMga2VlcHMgcGxhdGZvcm1zIHJlYWNoYWJsZSwgYSBkcm9wIGlzIGZpbmUuCiAgICAgICAgY29uc3QgYnJpZGdlWSA9IEdBTUVfSEVJR0hUIC0gVElMRV9TSVpFICogMjsKICAgICAgICBwbGF0Zm9ybXMucHVzaCh7CiAgICAgICAgICAgIGlkOiAnYm9zc19icmlkZ2UnLAogICAgICAgICAgICB0eXBlOiAncGxhdGZvcm0nLAogICAgICAgICAgICBzdWJ0eXBlOiAnbm9ybWFsJywKICAgICAgICAgICAgeDogYnJpZGdlU3RhcnQsCiAgICAgICAgICAgIHk6IGJyaWRnZVksCiAgICAgICAgICAgIHdpZHRoOiA1MDAsCiAgICAgICAgICAgIGhlaWdodDogVElMRV9TSVpFICogMiwKICAgICAgICAgICAgdng6IDAsCiAgICAgICAgICAgIHZ5OiAwCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgYXJlbmFTdGFydCA9IGJyaWRnZVN0YXJ0ICsgNTAwOwogICAgICAgIGNvbnN0IGZsb29yWSA9IEdBTUVfSEVJR0hUIC0gVElMRV9TSVpFICogMjsKICAgICAgICAvLyBGSVhFRCBTQ1JFRU4gQk9TUyBGSUdIVDogQXJlbmEgaXMgZXhhY3RseSBHQU1FX1dJRFRIICg4MDApCiAgICAgICAgcGxhdGZvcm1zLnB1c2goewogICAgICAgICAgICBpZDogJ2Jvc3NfYXJlbmEnLAogICAgICAgICAgICB0eXBlOiAncGxhdGZvcm0nLAogICAgICAgICAgICBzdWJ0eXBlOiAnbm9ybWFsJywKICAgICAgICAgICAgeDogYXJlbmFTdGFydCwKICAgICAgICAgICAgeTogZmxvb3JZLAogICAgICAgICAgICB3aWR0aDogR0FNRV9XSURUSCwKICAgICAgICAgICAgaGVpZ2h0OiAyMDAsCiAgICAgICAgICAgIHZ4OiAwLAogICAgICAgICAgICB2eTogMAogICAgICAgIH0pOwogICAgICAgIC8vIEJPU1MgQ09ORklHVVJBVElPTgogICAgICAgIGNvbnN0IGJvc3NWYXJpYW50ID0gaXNBbmFjb25kYUJvc3MgPyAnYW5hY29uZGEnIDogJ3lhY2FyZSc7CiAgICAgICAgY29uc3QgYm9zc0hlYWx0aCA9IGlzQW5hY29uZGFCb3NzID8gODAgOiA0MDsKICAgICAgICBsZXQgYm9zc1dpZHRoID0gMjAwOwogICAgICAgIGxldCBib3NzSGVpZ2h0ID0gMTAwOwogICAgICAgIGlmIChpc0FuYWNvbmRhQm9zcykgewogICAgICAgICAgICBib3NzV2lkdGggPSAyMjU7CiAgICAgICAgICAgIGJvc3NIZWlnaHQgPSA2MDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGJvc3NXaWR0aCA9IDIwMDsKICAgICAgICAgICAgYm9zc0hlaWdodCA9IDEyMDsKICAgICAgICB9CiAgICAgICAgY29uc3QgYm9zc1kgPSBmbG9vclkgLSBib3NzSGVpZ2h0OwogICAgICAgIGNvbnN0IGJvc3NTcGF3blggPSBhcmVuYVN0YXJ0ICsgR0FNRV9XSURUSCAtIGJvc3NXaWR0aCAtIDUwOwogICAgICAgIGVuZW1pZXMucHVzaCh7CiAgICAgICAgICAgIGlkOiAnZmluYWxfYm9zcycsCiAgICAgICAgICAgIHR5cGU6ICdlbmVteScsCiAgICAgICAgICAgIGVuZW15VHlwZTogJ2Jvc3MnLAogICAgICAgICAgICBib3NzVmFyaWFudDogYm9zc1ZhcmlhbnQsCiAgICAgICAgICAgIHg6IGJvc3NTcGF3blgsCiAgICAgICAgICAgIHk6IGJvc3NZLAogICAgICAgICAgICB3aWR0aDogYm9zc1dpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IGJvc3NIZWlnaHQsCiAgICAgICAgICAgIHZ4OiAtMiwKICAgICAgICAgICAgdnk6IDAsCiAgICAgICAgICAgIHBhdHJvbFN0YXJ0OiBhcmVuYVN0YXJ0ICsgKEdBTUVfV0lEVEggLyAyKSwKICAgICAgICAgICAgcGF0cm9sRW5kOiBhcmVuYVN0YXJ0ICsgR0FNRV9XSURUSCAtIDIwLAogICAgICAgICAgICBoZWFsdGg6IGJvc3NIZWFsdGgsCiAgICAgICAgICAgIG1heEhlYWx0aDogYm9zc0hlYWx0aCwKICAgICAgICAgICAgYXR0YWNrQ29vbGRvd246IDE1MAogICAgICAgIH0pOwogICAgICAgIGN1cnJlbnRYID0gYXJlbmFTdGFydCArIEdBTUVfV0lEVEg7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAvLyBOb3JtYWwgbGV2ZWwgZW5kIChQb3J0YWwpCiAgICAgICAgY29uc3QgZW5kR3JvdW5kV2lkdGggPSA2MDA7CiAgICAgICAgcGxhdGZvcm1zLnB1c2goewogICAgICAgICAgICBpZDogJ2VuZF9ncm91bmQnLAogICAgICAgICAgICB0eXBlOiAncGxhdGZvcm0nLAogICAgICAgICAgICBzdWJ0eXBlOiAnbm9ybWFsJywKICAgICAgICAgICAgeDogY3VycmVudFgsCiAgICAgICAgICAgIHk6IEdBTUVfSEVJR0hUIC0gVElMRV9TSVpFICogMiwKICAgICAgICAgICAgd2lkdGg6IGVuZEdyb3VuZFdpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IFRJTEVfU0laRSAqIDIsCiAgICAgICAgICAgIHZ4OiAwLAogICAgICAgICAgICB2eTogMAogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgICBpZDogJ3BvcnRhbCcsCiAgICAgICAgICAgIHR5cGU6ICdwb3J0YWwnLAogICAgICAgICAgICB4OiBjdXJyZW50WCArIDMwMCwKICAgICAgICAgICAgeTogR0FNRV9IRUlHSFQgLSBUSUxFX1NJWkUgKiAyIC0gODAsCiAgICAgICAgICAgIHdpZHRoOiA2MCwKICAgICAgICAgICAgaGVpZ2h0OiA4MCwKICAgICAgICAgICAgdng6IDAsCiAgICAgICAgICAgIHZ5OiAwCiAgICAgICAgfSk7CiAgICAgICAgY3VycmVudFggKz0gZW5kR3JvdW5kV2lkdGg7CiAgICB9CiAgICByZXR1cm4geyBwbGF0Zm9ybXMsIGVuZW1pZXMsIGl0ZW1zLCBsZXZlbExlbmd0aDogY3VycmVudFggfTsKfTsKZXhwb3J0IGNvbnN0IHJlc2V0R2FtZSA9IChsZXZlbEluZGV4ID0gMSkgPT4gewogICAgY29uc3QgbGV2ZWxEYXRhID0gZ2VuZXJhdGVMZXZlbChsZXZlbEluZGV4KTsKICAgIHJldHVybiB7CiAgICAgICAgc3RhdHVzOiBHYW1lU3RhdHVzLk1FTlUsCiAgICAgICAgY3VycmVudExldmVsOiBsZXZlbEluZGV4LAogICAgICAgIHBsYXllcjogewogICAgICAgICAgICBpZDogJ3BsYXllcicsCiAgICAgICAgICAgIHR5cGU6ICdwbGF5ZXInLAogICAgICAgICAgICB4OiAxMDAsCiAgICAgICAgICAgIHk6IDEwMCwKICAgICAgICAgICAgd2lkdGg6IDEwMCwKICAgICAgICAgICAgaGVpZ2h0OiAxMDAsCiAgICAgICAgICAgIHZ4OiAwLAogICAgICAgICAgICB2eTogMCwKICAgICAgICAgICAgaXNHcm91bmRlZDogZmFsc2UsCiAgICAgICAgICAgIGZhY2luZ1JpZ2h0OiB0cnVlLAogICAgICAgICAgICB2aXRhbGl0eTogMTAwLAogICAgICAgICAgICBtYXhWaXRhbGl0eTogMTAwLAogICAgICAgICAgICBpbnZpbmNpYmxlVW50aWw6IDAsCiAgICAgICAgICAgIGNvb2xkb3duOiAwLAogICAgICAgICAgICBpc1NwcmludGluZzogZmFsc2UKICAgICAgICB9LAogICAgICAgIHBsYXRmb3JtczogbGV2ZWxEYXRhLnBsYXRmb3JtcyB8fCBbXSwKICAgICAgICBlbmVtaWVzOiBsZXZlbERhdGEuZW5lbWllcyB8fCBbXSwKICAgICAgICBpdGVtczogbGV2ZWxEYXRhLml0ZW1zIHx8IFtdLAogICAgICAgIHByb2plY3RpbGVzOiBbXSwKICAgICAgICBzY29yZTogMCwKICAgICAgICBkaXN0YW5jZTogMCwKICAgICAgICBsZXZlbExlbmd0aDogbGV2ZWxEYXRhLmxldmVsTGVuZ3RoIHx8IDUwMDAsCiAgICAgICAgY2FtZXJhOiB7IHg6IDAsIHk6IDAgfSwKICAgICAgICBsYXN0VGltZTogcGVyZm9ybWFuY2Uubm93KCksCiAgICAgICAgYm9zc0FjdGl2ZTogZmFsc2UKICAgIH07Cn07Cg==","@/App":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gInJlYWN0L2pzeC1ydW50aW1lIjsKaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IEdhbWVDYW52YXMgfSBmcm9tICdAL2NvbXBvbmVudHMvR2FtZUNhbnZhcyc7CmltcG9ydCB7IHJlc2V0R2FtZSB9IGZyb20gJ0Avc2VydmljZXMvbGV2ZWxHZW5lcmF0b3InOwppbXBvcnQgeyBhdWRpb01hbmFnZXIgfSBmcm9tICdAL3NlcnZpY2VzL2F1ZGlvTWFuYWdlcic7CmltcG9ydCB7IEdhbWVTdGF0dXMgfSBmcm9tICdAL3R5cGVzJzsKaW1wb3J0IHsgUGxheSwgUm90YXRlQ2N3LCBBd2FyZCwgU2t1bGwsIFRyb3BoeSwgUGF1c2UsIFRyYXNoMiwgSG9tZSwgU2F2ZSwgR2FtZXBhZDIsIFphcCwgQ2hldnJvblVwLCBDaGV2cm9uRG93biB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmltcG9ydCB7IExFVkVMX0NPTkZJR1MgfSBmcm9tICdAL2NvbnN0YW50cyc7CmNvbnN0IFBhdmFJY29uID0gKHsgc2l6ZSA9IDI0LCBjbGFzc05hbWUgPSAiIiB9KSA9PiAoX2pzeHMoInN2ZyIsIHsgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIHdpZHRoOiBzaXplLCBoZWlnaHQ6IHNpemUsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBjbGFzc05hbWU6IGNsYXNzTmFtZSwgY2hpbGRyZW46IFtfanN4KCJwYXRoIiwgeyBkOiAiTTYgOXY4YTIgMiAwIDAgMCAyIDJoOGEyIDIgMCAwIDAgMi0yVjkiIH0pLCBfanN4KCJwYXRoIiwgeyBkOiAiTTYgOWw4LTYgNCAyLTEgNCIgfSksIF9qc3goInBhdGgiLCB7IGQ6ICJNMTggMTFoM2ExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMWgtMyIgfSksIF9qc3goInBhdGgiLCB7IGQ6ICJNMiAxM2g0IiB9KSwgX2pzeCgicGF0aCIsIHsgZDogIk05IDNjLTEgMC0zIDEtMyAzIiB9KV0gfSkpOwovLyBDaGFyYWN0ZXIgc2V0IGZvciBOYW1lIEVudHJ5IChMZXR0ZXJzLCBOdW1iZXJzLCBTeW1ib2xzLCBTcGFjZSkKY29uc3QgQ0hBUl9TRVQgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5ICEtLj9AIyYiOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoKSB7CiAgICBjb25zdCBnYW1lU3RhdGUgPSB1c2VSZWYocmVzZXRHYW1lKDEpKTsKICAgIC8vIFVJIFN0YXRlCiAgICBjb25zdCBbdWlTdGF0ZSwgc2V0VWlTdGF0ZV0gPSB1c2VTdGF0ZSh7CiAgICAgICAgc3RhdHVzOiBHYW1lU3RhdHVzLk1FTlUsCiAgICAgICAgc2NvcmU6IDAsCiAgICAgICAgdml0YWxpdHk6IDEwMCwKICAgICAgICBkaXN0YW5jZTogMCwKICAgICAgICBsZXZlbDogMSwKICAgICAgICBoaWdoU2NvcmU6IDAsCiAgICAgICAgc2NvcmVBdFN0YXJ0OiAwLAogICAgICAgIGdhbWVwYWRDb25uZWN0ZWQ6IGZhbHNlCiAgICB9KTsKICAgIC8vIFNhdmVkIEdhbWUgU3RhdGUKICAgIGNvbnN0IFtzYXZlZEdhbWUsIHNldFNhdmVkR2FtZV0gPSB1c2VTdGF0ZShudWxsKTsKICAgIC8vIExlYWRlcmJvYXJkIFN0YXRlCiAgICBjb25zdCBbbGVhZGVyYm9hcmQsIHNldExlYWRlcmJvYXJkXSA9IHVzZVN0YXRlKFtdKTsKICAgIGNvbnN0IFtuYW1lRW50cnksIHNldE5hbWVFbnRyeV0gPSB1c2VTdGF0ZSh7CiAgICAgICAgaW5kaWNlczogWzAsIDAsIDBdLCAvLyBJbml0aWFsaXplIGFzICdBJywgJ0EnLCAnQScKICAgICAgICBwb3NpdGlvbjogMAogICAgfSk7CiAgICAvLyBSZWYgdG8gcHJldmVudCByYXBpZC1maXJlIHRyaWdnZXJpbmcgb2YgbWVudSBidXR0b25zIG9uIGdhbWVwYWQgaG9sZAogICAgLy8gVXNpbmcgYW4gYXJyYXkgdG8gdHJhY2sgbXVsdGlwbGUgYnV0dG9ucyAoSW5kZXggMj1TdGFydCwgND1MMSwgNT1SMSwgMTI9VXAsIDEzPURvd24sIDE0PUxlZnQsIDE1PVJpZ2h0LCAwPUEpCiAgICBjb25zdCBwcmV2QnV0dG9uU3RhdGUgPSB1c2VSZWYoW10pOwogICAgLy8gUmVmIGZvciBhbmFsb2cgc3RpY2sgdGhyb3R0bGluZwogICAgY29uc3QgbGFzdElucHV0VGltZSA9IHVzZVJlZigwKTsKICAgIC8vIExvYWQgRGF0YSBvbiBtb3VudAogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICAvLyBMZWdhY3kgSGlnaCBTY29yZQogICAgICAgIGNvbnN0IHNhdmVkU2NvcmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FycGluY2hvX2lzbGFuZF9oaWdoc2NvcmUnKTsKICAgICAgICBpZiAoc2F2ZWRTY29yZSkgewogICAgICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgaGlnaFNjb3JlOiBwYXJzZUludChzYXZlZFNjb3JlLCAxMCkgfSkpOwogICAgICAgIH0KICAgICAgICAvLyBTYXZlZCBMZXZlbAogICAgICAgIGNvbnN0IHNhdmVkTGV2ZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FycGluY2hvX2lzbGFuZF9zYXZlX2xldmVsJyk7CiAgICAgICAgY29uc3Qgc2F2ZWRHYW1lU2NvcmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FycGluY2hvX2lzbGFuZF9zYXZlX3Njb3JlJyk7CiAgICAgICAgaWYgKHNhdmVkTGV2ZWwgJiYgc2F2ZWRHYW1lU2NvcmUpIHsKICAgICAgICAgICAgc2V0U2F2ZWRHYW1lKHsKICAgICAgICAgICAgICAgIGxldmVsOiBwYXJzZUludChzYXZlZExldmVsLCAxMCksCiAgICAgICAgICAgICAgICBzY29yZTogcGFyc2VJbnQoc2F2ZWRHYW1lU2NvcmUsIDEwKQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy8gTG9hZCBMZWFkZXJib2FyZAogICAgICAgIGNvbnN0IHNhdmVkTGVhZGVyYm9hcmQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FycGluY2hvX2lzbGFuZF9sZWFkZXJib2FyZCcpOwogICAgICAgIGlmIChzYXZlZExlYWRlcmJvYXJkKSB7CiAgICAgICAgICAgIHNldExlYWRlcmJvYXJkKEpTT04ucGFyc2Uoc2F2ZWRMZWFkZXJib2FyZCkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBkdW1teSBsZWFkZXJib2FyZCBpZiBlbXB0eQogICAgICAgICAgICBjb25zdCBkdW1teSA9IFsKICAgICAgICAgICAgICAgIHsgbmFtZTogIkNBUCIsIHNjb3JlOiA1MDAwIH0sCiAgICAgICAgICAgICAgICB7IG5hbWU6ICJZQUMiLCBzY29yZTogNDAwMCB9LAogICAgICAgICAgICAgICAgeyBuYW1lOiAiQU5BIiwgc2NvcmU6IDMwMDAgfSwKICAgICAgICAgICAgICAgIHsgbmFtZTogIk1URSIsIHNjb3JlOiAyMDAwIH0sCiAgICAgICAgICAgICAgICB7IG5hbWU6ICJSSU8iLCBzY29yZTogMTAwMCB9CiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHNldExlYWRlcmJvYXJkKGR1bW15KTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnBpbmNob19pc2xhbmRfbGVhZGVyYm9hcmQnLCBKU09OLnN0cmluZ2lmeShkdW1teSkpOwogICAgICAgIH0KICAgICAgICBjb25zdCBoYW5kbGVHYW1lcGFkQ29ubmVjdCA9ICgpID0+IHNldFVpU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBnYW1lcGFkQ29ubmVjdGVkOiB0cnVlIH0pKTsKICAgICAgICBjb25zdCBoYW5kbGVHYW1lcGFkRGlzY29ubmVjdCA9ICgpID0+IHNldFVpU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBnYW1lcGFkQ29ubmVjdGVkOiBmYWxzZSB9KSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImdhbWVwYWRjb25uZWN0ZWQiLCBoYW5kbGVHYW1lcGFkQ29ubmVjdCk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImdhbWVwYWRkaXNjb25uZWN0ZWQiLCBoYW5kbGVHYW1lcGFkRGlzY29ubmVjdCk7CiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImdhbWVwYWRjb25uZWN0ZWQiLCBoYW5kbGVHYW1lcGFkQ29ubmVjdCk7CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJnYW1lcGFkZGlzY29ubmVjdGVkIiwgaGFuZGxlR2FtZXBhZERpc2Nvbm5lY3QpOwogICAgICAgIH07CiAgICB9LCBbXSk7CiAgICBjb25zdCBzdGFydEdhbWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgYXVkaW9NYW5hZ2VyLmluaXQoKTsKICAgICAgICBhdWRpb01hbmFnZXIuc3RvcEFtYmllbmNlKCk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLnN0YXJ0QW1iaWVuY2UoJ2xldmVsJyk7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQgPSByZXNldEdhbWUoMSk7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID0gR2FtZVN0YXR1cy5QTEFZSU5HOwogICAgICAgIHNldFVpU3RhdGUocHJldiA9PiAoewogICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICBzdGF0dXM6IEdhbWVTdGF0dXMuUExBWUlORywKICAgICAgICAgICAgc2NvcmU6IDAsCiAgICAgICAgICAgIGxldmVsOiAxLAogICAgICAgICAgICBzY29yZUF0U3RhcnQ6IDAKICAgICAgICB9KSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBjb250aW51ZUdhbWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgaWYgKCFzYXZlZEdhbWUpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBhdWRpb01hbmFnZXIuaW5pdCgpOwogICAgICAgIGF1ZGlvTWFuYWdlci5zdG9wQW1iaWVuY2UoKTsKICAgICAgICBhdWRpb01hbmFnZXIuc3RhcnRBbWJpZW5jZSgnbGV2ZWwnKTsKICAgICAgICBjb25zdCB7IGxldmVsLCBzY29yZSB9ID0gc2F2ZWRHYW1lOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50ID0gcmVzZXRHYW1lKGxldmVsKTsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5zY29yZSA9IHNjb3JlOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9IEdhbWVTdGF0dXMuUExBWUlORzsKICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsKICAgICAgICAgICAgLi4ucHJldiwKICAgICAgICAgICAgc3RhdHVzOiBHYW1lU3RhdHVzLlBMQVlJTkcsCiAgICAgICAgICAgIHNjb3JlOiBzY29yZSwKICAgICAgICAgICAgbGV2ZWw6IGxldmVsLAogICAgICAgICAgICBzY29yZUF0U3RhcnQ6IHNjb3JlCiAgICAgICAgfSkpOwogICAgfSwgW3NhdmVkR2FtZV0pOwogICAgLy8gLS0tIFNIT1JUQ1VUIEZVTkNUSU9OUyAtLS0KICAgIGNvbnN0IGp1bXBUb1lhY2FyZUJvc3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgYXVkaW9NYW5hZ2VyLmluaXQoKTsKICAgICAgICBhdWRpb01hbmFnZXIuc3RvcEFtYmllbmNlKCk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLnN0YXJ0QW1iaWVuY2UoJ2xldmVsJyk7CiAgICAgICAgY29uc3QgbHZsID0gMzsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudCA9IHJlc2V0R2FtZShsdmwpOwogICAgICAgIC8vIE1vdmUgcGxheWVyIHRvIHRoZSBib3NzIGJyaWRnZSBhcmVhCiAgICAgICAgY29uc3QgYm9zc0JyaWRnZVN0YXJ0ID0gMzAwMDsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5wbGF5ZXIueCA9IGJvc3NCcmlkZ2VTdGFydDsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5jYW1lcmEueCA9IGJvc3NCcmlkZ2VTdGFydCAtIDMwMDsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5zdGF0dXMgPSBHYW1lU3RhdHVzLlBMQVlJTkc7CiAgICAgICAgc2V0VWlTdGF0ZShwcmV2ID0+ICh7CiAgICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICAgIHN0YXR1czogR2FtZVN0YXR1cy5QTEFZSU5HLAogICAgICAgICAgICBsZXZlbDogbHZsLAogICAgICAgICAgICBzY29yZTogMCwKICAgICAgICAgICAgc2NvcmVBdFN0YXJ0OiAwCiAgICAgICAgfSkpOwogICAgfSwgW10pOwogICAgY29uc3QganVtcFRvQW5hY29uZGFCb3NzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgICAgIGF1ZGlvTWFuYWdlci5pbml0KCk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLnN0b3BBbWJpZW5jZSgpOwogICAgICAgIGF1ZGlvTWFuYWdlci5zdGFydEFtYmllbmNlKCdsZXZlbCcpOwogICAgICAgIGNvbnN0IGx2bCA9IDY7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQgPSByZXNldEdhbWUobHZsKTsKICAgICAgICAvLyBNb3ZlIHBsYXllciB0byB0aGUgYm9zcyBicmlkZ2UgYXJlYQogICAgICAgIGNvbnN0IGJvc3NCcmlkZ2VTdGFydCA9IDQwMDA7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQucGxheWVyLnggPSBib3NzQnJpZGdlU3RhcnQ7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuY2FtZXJhLnggPSBib3NzQnJpZGdlU3RhcnQgLSAzMDA7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID0gR2FtZVN0YXR1cy5QTEFZSU5HOwogICAgICAgIHNldFVpU3RhdGUocHJldiA9PiAoewogICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICBzdGF0dXM6IEdhbWVTdGF0dXMuUExBWUlORywKICAgICAgICAgICAgbGV2ZWw6IGx2bCwKICAgICAgICAgICAgc2NvcmU6IDAsCiAgICAgICAgICAgIHNjb3JlQXRTdGFydDogMAogICAgICAgIH0pKTsKICAgIH0sIFtdKTsKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgY29uc3QgcmVzdGFydExldmVsID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgICAgIGF1ZGlvTWFuYWdlci5pbml0KCk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLnN0b3BBbWJpZW5jZSgpOwogICAgICAgIGF1ZGlvTWFuYWdlci5zdGFydEFtYmllbmNlKCdsZXZlbCcpOwogICAgICAgIGNvbnN0IGN1cnJlbnRMZXZlbCA9IHVpU3RhdGUubGV2ZWw7CiAgICAgICAgY29uc3Qgc3RhcnRTY29yZSA9IHVpU3RhdGUuc2NvcmVBdFN0YXJ0OwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50ID0gcmVzZXRHYW1lKGN1cnJlbnRMZXZlbCk7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc2NvcmUgPSBzdGFydFNjb3JlOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9IEdhbWVTdGF0dXMuUExBWUlORzsKICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsKICAgICAgICAgICAgLi4ucHJldiwKICAgICAgICAgICAgc3RhdHVzOiBHYW1lU3RhdHVzLlBMQVlJTkcsCiAgICAgICAgICAgIHNjb3JlOiBzdGFydFNjb3JlCiAgICAgICAgfSkpOwogICAgfSwgW3VpU3RhdGUubGV2ZWwsIHVpU3RhdGUuc2NvcmVBdFN0YXJ0XSk7CiAgICBjb25zdCBnb1RvTWVudSA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgICAgICBhdWRpb01hbmFnZXIuc3RvcEFtYmllbmNlKCk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLnN0YXJ0QW1iaWVuY2UoJ21lbnUnKTsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5zdGF0dXMgPSBHYW1lU3RhdHVzLk1FTlU7CiAgICAgICAgc2V0VWlTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHN0YXR1czogR2FtZVN0YXR1cy5NRU5VIH0pKTsKICAgIH0sIFtdKTsKICAgIGNvbnN0IHRvZ2dsZVBhdXNlID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgICAgIGNvbnN0IG5ld1N0YXR1cyA9IGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9PT0gR2FtZVN0YXR1cy5QTEFZSU5HID8gR2FtZVN0YXR1cy5QQVVTRUQgOiBHYW1lU3RhdHVzLlBMQVlJTkc7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID0gbmV3U3RhdHVzOwogICAgICAgIHNldFVpU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBzdGF0dXM6IG5ld1N0YXR1cyB9KSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBuZXh0TGV2ZWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgYXVkaW9NYW5hZ2VyLnN0b3BBbWJpZW5jZSgpOwogICAgICAgIGF1ZGlvTWFuYWdlci5zdGFydEFtYmllbmNlKCdsZXZlbCcpOwogICAgICAgIGNvbnN0IG5leHRMdmwgPSBnYW1lU3RhdGUuY3VycmVudC5jdXJyZW50TGV2ZWwgKyAxOwogICAgICAgIGNvbnN0IG5ld1Njb3JlID0gdWlTdGF0ZS5zY29yZSArIDEwMDA7CiAgICAgICAgLy8gU2F2ZSBQcm9ncmVzcwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJwaW5jaG9faXNsYW5kX3NhdmVfbGV2ZWwnLCBuZXh0THZsLnRvU3RyaW5nKCkpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJwaW5jaG9faXNsYW5kX3NhdmVfc2NvcmUnLCBuZXdTY29yZS50b1N0cmluZygpKTsKICAgICAgICBzZXRTYXZlZEdhbWUoeyBsZXZlbDogbmV4dEx2bCwgc2NvcmU6IG5ld1Njb3JlIH0pOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50ID0gcmVzZXRHYW1lKG5leHRMdmwpOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnNjb3JlID0gbmV3U2NvcmU7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID0gR2FtZVN0YXR1cy5QTEFZSU5HOwogICAgICAgIHNldFVpU3RhdGUocHJldiA9PiAoewogICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICBzdGF0dXM6IEdhbWVTdGF0dXMuUExBWUlORywKICAgICAgICAgICAgbGV2ZWw6IG5leHRMdmwsCiAgICAgICAgICAgIHNjb3JlOiBuZXdTY29yZSwKICAgICAgICAgICAgc2NvcmVBdFN0YXJ0OiBuZXdTY29yZQogICAgICAgIH0pKTsKICAgIH0sIFt1aVN0YXRlLnNjb3JlXSk7CiAgICAvLyBDZW50cmFsaXplZCBBY3Rpb24gSGFuZGxlcgogICAgY29uc3QgaGFuZGxlR2xvYmFsQWN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgICAgIGNvbnN0IGN1cnJlbnRTdGF0dXMgPSBnYW1lU3RhdGUuY3VycmVudC5zdGF0dXM7CiAgICAgICAgYXVkaW9NYW5hZ2VyLmluaXQoKTsKICAgICAgICBpZiAoY3VycmVudFN0YXR1cyA9PT0gR2FtZVN0YXR1cy5NRU5VKSB7CiAgICAgICAgICAgIHN0YXJ0R2FtZSgpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChjdXJyZW50U3RhdHVzID09PSBHYW1lU3RhdHVzLlZJQ1RPUlkpIHsKICAgICAgICAgICAgLy8gRG8gbm90aGluZywgaGFuZGxlZCBieSBzcGVjaWZpYyBidXR0b25zIG9yIHRpbWVvdXQgdG8gbGVhZGVyYm9hcmQKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoY3VycmVudFN0YXR1cyA9PT0gR2FtZVN0YXR1cy5HQU1FX09WRVIpIHsKICAgICAgICAgICAgcmVzdGFydExldmVsKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGN1cnJlbnRTdGF0dXMgPT09IEdhbWVTdGF0dXMuTEVWRUxfVFJBTlNJVElPTikgewogICAgICAgICAgICBuZXh0TGV2ZWwoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoY3VycmVudFN0YXR1cyA9PT0gR2FtZVN0YXR1cy5QTEFZSU5HIHx8IGN1cnJlbnRTdGF0dXMgPT09IEdhbWVTdGF0dXMuUEFVU0VEKSB7CiAgICAgICAgICAgIHRvZ2dsZVBhdXNlKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGN1cnJlbnRTdGF0dXMgPT09IEdhbWVTdGF0dXMuTEVBREVSQk9BUkQpIHsKICAgICAgICAgICAgZ29Ub01lbnUoKTsKICAgICAgICB9CiAgICB9LCBbc3RhcnRHYW1lLCByZXN0YXJ0TGV2ZWwsIG5leHRMZXZlbCwgdG9nZ2xlUGF1c2UsIGdvVG9NZW51XSk7CiAgICAvLyBOYW1lIEVudHJ5IExvZ2ljIEhhbmRsZXJzCiAgICBjb25zdCBjaGFuZ2VDaGFyID0gdXNlQ2FsbGJhY2soKGRpcmVjdGlvbikgPT4gewogICAgICAgIHNldE5hbWVFbnRyeShwcmV2ID0+IHsKICAgICAgICAgICAgY29uc3QgbmV3SW5kaWNlcyA9IFsuLi5wcmV2LmluZGljZXNdOwogICAgICAgICAgICBsZXQgbmV3VmFsID0gbmV3SW5kaWNlc1twcmV2LnBvc2l0aW9uXSArIGRpcmVjdGlvbjsKICAgICAgICAgICAgaWYgKG5ld1ZhbCA8IDApCiAgICAgICAgICAgICAgICBuZXdWYWwgPSBDSEFSX1NFVC5sZW5ndGggLSAxOwogICAgICAgICAgICBpZiAobmV3VmFsID49IENIQVJfU0VULmxlbmd0aCkKICAgICAgICAgICAgICAgIG5ld1ZhbCA9IDA7CiAgICAgICAgICAgIG5ld0luZGljZXNbcHJldi5wb3NpdGlvbl0gPSBuZXdWYWw7CiAgICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIGluZGljZXM6IG5ld0luZGljZXMgfTsKICAgICAgICB9KTsKICAgICAgICBhdWRpb01hbmFnZXIuY29sbGVjdCgpOyAvLyBSZXVzZSBjb2xsZWN0IHNvdW5kIGZvciBtZW51IGJsaXAKICAgIH0sIFtdKTsKICAgIGNvbnN0IGNoYW5nZVBvc2l0aW9uID0gdXNlQ2FsbGJhY2soKGRpcmVjdGlvbikgPT4gewogICAgICAgIHNldE5hbWVFbnRyeShwcmV2ID0+IHsKICAgICAgICAgICAgbGV0IG5ld1BvcyA9IHByZXYucG9zaXRpb24gKyBkaXJlY3Rpb247CiAgICAgICAgICAgIGlmIChuZXdQb3MgPCAwKQogICAgICAgICAgICAgICAgbmV3UG9zID0gMjsKICAgICAgICAgICAgaWYgKG5ld1BvcyA+IDIpCiAgICAgICAgICAgICAgICBuZXdQb3MgPSAwOwogICAgICAgICAgICByZXR1cm4geyAuLi5wcmV2LCBwb3NpdGlvbjogbmV3UG9zIH07CiAgICAgICAgfSk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLmNvbGxlY3QoKTsKICAgIH0sIFtdKTsKICAgIGNvbnN0IHN1Ym1pdEhpZ2hTY29yZSA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgICAgICBjb25zdCBuYW1lID0gbmFtZUVudHJ5LmluZGljZXMubWFwKGkgPT4gQ0hBUl9TRVRbaV0pLmpvaW4oJycpOwogICAgICAgIGNvbnN0IHNjb3JlID0gZ2FtZVN0YXRlLmN1cnJlbnQuc2NvcmU7CiAgICAgICAgY29uc3QgbmV3RW50cnkgPSB7IG5hbWUsIHNjb3JlIH07CiAgICAgICAgY29uc3QgbmV3TGVhZGVyYm9hcmQgPSBbLi4ubGVhZGVyYm9hcmQsIG5ld0VudHJ5XQogICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpCiAgICAgICAgICAgIC5zbGljZSgwLCAxMCk7CiAgICAgICAgc2V0TGVhZGVyYm9hcmQobmV3TGVhZGVyYm9hcmQpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJwaW5jaG9faXNsYW5kX2xlYWRlcmJvYXJkJywgSlNPTi5zdHJpbmdpZnkobmV3TGVhZGVyYm9hcmQpKTsKICAgICAgICAvLyBVcGRhdGUgbG9jYWwgaGlnaCBzY29yZSBpZiB0aGlzIGlzIHRoZSBuZXcgYmVzdAogICAgICAgIGlmIChzY29yZSA+IHVpU3RhdGUuaGlnaFNjb3JlKSB7CiAgICAgICAgICAgIHNldFVpU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBoaWdoU2NvcmU6IHNjb3JlIH0pKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnBpbmNob19pc2xhbmRfaGlnaHNjb3JlJywgc2NvcmUudG9TdHJpbmcoKSk7CiAgICAgICAgfQogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9IEdhbWVTdGF0dXMuTEVBREVSQk9BUkQ7CiAgICAgICAgc2V0VWlTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHN0YXR1czogR2FtZVN0YXR1cy5MRUFERVJCT0FSRCB9KSk7CiAgICAgICAgYXVkaW9NYW5hZ2VyLmxldmVsV2luKCk7CiAgICB9LCBbbmFtZUVudHJ5LCBsZWFkZXJib2FyZCwgdWlTdGF0ZS5oaWdoU2NvcmVdKTsKICAgIC8vIEdsb2JhbCBLZXkgTGlzdGVuZXIKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1czsKICAgICAgICAgICAgLy8gTkFNRSBFTlRSWSBNT0RFIEtFWUJPQVJEIENPTlRST0xTCiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IEdhbWVTdGF0dXMuTkFNRV9FTlRSWSkgewogICAgICAgICAgICAgICAgLy8gUHJldmVudCBzY3JvbGxpbmcgb24gYXJyb3dzIHRvIGVuc3VyZSBnb29kIFVYCiAgICAgICAgICAgICAgICBpZiAoWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCddLmluY2x1ZGVzKGUuY29kZSkpIHsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dVcCcgfHwgZS5jb2RlID09PSAnS2V5VycpCiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQ2hhcigxKTsKICAgICAgICAgICAgICAgIGlmIChlLmNvZGUgPT09ICdBcnJvd0Rvd24nIHx8IGUuY29kZSA9PT0gJ0tleVMnKQogICAgICAgICAgICAgICAgICAgIGNoYW5nZUNoYXIoLTEpOwogICAgICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0Fycm93TGVmdCcgfHwgZS5jb2RlID09PSAnS2V5QScpCiAgICAgICAgICAgICAgICAgICAgY2hhbmdlUG9zaXRpb24oLTEpOwogICAgICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0Fycm93UmlnaHQnIHx8IGUuY29kZSA9PT0gJ0tleUQnKQogICAgICAgICAgICAgICAgICAgIGNoYW5nZVBvc2l0aW9uKDEpOwogICAgICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0VudGVyJyB8fCBlLmNvZGUgPT09ICdTcGFjZScpCiAgICAgICAgICAgICAgICAgICAgc3VibWl0SGlnaFNjb3JlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0VudGVyJykgewogICAgICAgICAgICAgICAgaGFuZGxlR2xvYmFsQWN0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQm9zcyBTaG9ydGN1dHMKICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0tleVonKSB7CiAgICAgICAgICAgICAgICBqdW1wVG9ZYWNhcmVCb3NzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0tleVgnKSB7CiAgICAgICAgICAgICAgICBqdW1wVG9BbmFjb25kYUJvc3MoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKGUuY29kZSA9PT0gJ0VzY2FwZScgfHwgZS5jb2RlID09PSAnS2V5UCcpICYmCiAgICAgICAgICAgICAgICAoc3RhdHVzID09PSBHYW1lU3RhdHVzLlBMQVlJTkcgfHwgc3RhdHVzID09PSBHYW1lU3RhdHVzLlBBVVNFRCkpIHsKICAgICAgICAgICAgICAgIHRvZ2dsZVBhdXNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgICAgICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgICB9LCBbaGFuZGxlR2xvYmFsQWN0aW9uLCB0b2dnbGVQYXVzZSwganVtcFRvWWFjYXJlQm9zcywganVtcFRvQW5hY29uZGFCb3NzLCBjaGFuZ2VDaGFyLCBjaGFuZ2VQb3NpdGlvbiwgc3VibWl0SGlnaFNjb3JlXSk7CiAgICAvLyBHYW1lcGFkIFBvbGxlcgogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBsZXQgYW5pbWF0aW9uRnJhbWVJZDsKICAgICAgICBjb25zdCBwb2xsR2FtZXBhZCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTsKICAgICAgICAgICAgY29uc3QgZ3AgPSBnYW1lcGFkc1swXTsKICAgICAgICAgICAgaWYgKGdwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBnYW1lU3RhdGUuY3VycmVudC5zdGF0dXM7CiAgICAgICAgICAgICAgICAvLyBNYXAgYnV0dG9ucwogICAgICAgICAgICAgICAgY29uc3QgYnRuQSA9IGdwLmJ1dHRvbnNbMF0/LnByZXNzZWQ7IC8vIENvbmZpcm0gLyBKdW1wIC8gRmlyZQogICAgICAgICAgICAgICAgY29uc3QgYnRuU3RhcnQgPSBncC5idXR0b25zWzldPy5wcmVzc2VkIHx8IGdwLmJ1dHRvbnNbMl0/LnByZXNzZWQ7IC8vIFN0YXJ0IChVc3VhbGx5IGluZGV4IDksIG1hcHBlZCB0byAyIGluIHNvbWUgbG9naWMpCiAgICAgICAgICAgICAgICBjb25zdCBkcGFkVXAgPSBncC5idXR0b25zWzEyXT8ucHJlc3NlZDsKICAgICAgICAgICAgICAgIGNvbnN0IGRwYWREb3duID0gZ3AuYnV0dG9uc1sxM10/LnByZXNzZWQ7CiAgICAgICAgICAgICAgICBjb25zdCBkcGFkTGVmdCA9IGdwLmJ1dHRvbnNbMTRdPy5wcmVzc2VkOwogICAgICAgICAgICAgICAgY29uc3QgZHBhZFJpZ2h0ID0gZ3AuYnV0dG9uc1sxNV0/LnByZXNzZWQ7CiAgICAgICAgICAgICAgICAvLyBOQU1FIEVOVFJZIExPR0lDIChEUEFEICsgQU5BTE9HIFNUSUNLKQogICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gR2FtZVN0YXR1cy5OQU1FX0VOVFJZKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICAvLyBUaHJvdHRsaW5nIGZvciBBbmFsb2cgU3RpY2svRHBhZCBob2xkICgxNTBtcyBkZWxheSkKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5Nb3ZlID0gbm93IC0gbGFzdElucHV0VGltZS5jdXJyZW50ID4gMTUwOwogICAgICAgICAgICAgICAgICAgIC8vIDEuIENoYXJhY3RlciBTZWxlY3QgKFVwL0Rvd24pCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgRHBhZCBvciBBbmFsb2cgU3RpY2sgWSBBeGlzIChBeGlzIDEpCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbk1vdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRwYWRVcCB8fCBncC5heGVzWzFdIDwgLTAuNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQ2hhcigxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbnB1dFRpbWUuY3VycmVudCA9IG5vdzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkcGFkRG93biB8fCBncC5heGVzWzFdID4gMC41KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VDaGFyKC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbnB1dFRpbWUuY3VycmVudCA9IG5vdzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBQb3NpdGlvbiBTZWxlY3QgKExlZnQvUmlnaHQpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIERwYWQgb3IgQW5hbG9nIFN0aWNrIFggQXhpcyAoQXhpcyAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkcGFkTGVmdCB8fCBncC5heGVzWzBdIDwgLTAuNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlUG9zaXRpb24oLTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdElucHV0VGltZS5jdXJyZW50ID0gbm93OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRwYWRSaWdodCB8fCBncC5heGVzWzBdID4gMC41KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQb3NpdGlvbigxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbnB1dFRpbWUuY3VycmVudCA9IG5vdzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBDb25maXJtCiAgICAgICAgICAgICAgICAgICAgaWYgKChidG5TdGFydCB8fCBidG5BKSAmJiAhcHJldkJ1dHRvblN0YXRlLmN1cnJlbnRbMl0gJiYgIXByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEhpZ2hTY29yZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIFNUQU5EQVJEIEdBTUVQTEFZIC8gTUVOVSBMT0dJQwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIDI6IFN0YXJ0L01lbnUgKFBsYXksIENvbnRpbnVlLCBldGMpCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRQcmVzc2VkID0gZ3AuYnV0dG9uc1syXT8ucHJlc3NlZDsKICAgICAgICAgICAgICAgICAgICAvLyBCdXR0b24gNDogTDEvTEIgKFlhY2FyZSBCb3NzKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGwxUHJlc3NlZCA9IGdwLmJ1dHRvbnNbNF0/LnByZXNzZWQ7CiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIDU6IFIxL1JCIChBbmFjb25kYSBCb3NzKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHIxUHJlc3NlZCA9IGdwLmJ1dHRvbnNbNV0/LnByZXNzZWQ7CiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIFN0YXJ0CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0UHJlc3NlZCAmJiAhcHJldkJ1dHRvblN0YXRlLmN1cnJlbnRbMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR2xvYmFsQWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBCb3NzIFNob3J0Y3V0cwogICAgICAgICAgICAgICAgICAgIGlmIChsMVByZXNzZWQgJiYgIXByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGp1bXBUb1lhY2FyZUJvc3MoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHIxUHJlc3NlZCAmJiAhcHJldkJ1dHRvblN0YXRlLmN1cnJlbnRbNV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAganVtcFRvQW5hY29uZGFCb3NzKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gVXBkYXRlIHByZXYgc3RhdGUKICAgICAgICAgICAgICAgIHByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzBdID0gYnRuQTsKICAgICAgICAgICAgICAgIHByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzJdID0gYnRuU3RhcnQgfHwgZ3AuYnV0dG9uc1syXT8ucHJlc3NlZDsKICAgICAgICAgICAgICAgIHByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzRdID0gZ3AuYnV0dG9uc1s0XT8ucHJlc3NlZDsKICAgICAgICAgICAgICAgIHByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzVdID0gZ3AuYnV0dG9uc1s1XT8ucHJlc3NlZDsKICAgICAgICAgICAgICAgIHByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzEyXSA9IGRwYWRVcDsKICAgICAgICAgICAgICAgIHByZXZCdXR0b25TdGF0ZS5jdXJyZW50WzEzXSA9IGRwYWREb3duOwogICAgICAgICAgICAgICAgcHJldkJ1dHRvblN0YXRlLmN1cnJlbnRbMTRdID0gZHBhZExlZnQ7CiAgICAgICAgICAgICAgICBwcmV2QnV0dG9uU3RhdGUuY3VycmVudFsxNV0gPSBkcGFkUmlnaHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShwb2xsR2FtZXBhZCk7CiAgICAgICAgfTsKICAgICAgICBwb2xsR2FtZXBhZCgpOwogICAgICAgIHJldHVybiAoKSA9PiBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZUlkKTsKICAgIH0sIFtoYW5kbGVHbG9iYWxBY3Rpb24sIGp1bXBUb1lhY2FyZUJvc3MsIGp1bXBUb0FuYWNvbmRhQm9zcywgY2hhbmdlQ2hhciwgY2hhbmdlUG9zaXRpb24sIHN1Ym1pdEhpZ2hTY29yZV0pOwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGdhbWVTdGF0ZS5jdXJyZW50OwogICAgICAgICAgICBpZiAoY3VycmVudC5zdGF0dXMgIT09IHVpU3RhdGUuc3RhdHVzIHx8CiAgICAgICAgICAgICAgICBNYXRoLmFicyhjdXJyZW50LnBsYXllci52aXRhbGl0eSAtIHVpU3RhdGUudml0YWxpdHkpID4gMSB8fAogICAgICAgICAgICAgICAgY3VycmVudC5zY29yZSAhPT0gdWlTdGF0ZS5zY29yZSB8fAogICAgICAgICAgICAgICAgY3VycmVudC5jdXJyZW50TGV2ZWwgIT09IHVpU3RhdGUubGV2ZWwpIHsKICAgICAgICAgICAgICAgIHNldFVpU3RhdGUocHJldiA9PiAoewogICAgICAgICAgICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBjdXJyZW50LnN0YXR1cywKICAgICAgICAgICAgICAgICAgICBzY29yZTogY3VycmVudC5zY29yZSwKICAgICAgICAgICAgICAgICAgICB2aXRhbGl0eTogTWF0aC5mbG9vcihjdXJyZW50LnBsYXllci52aXRhbGl0eSksCiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U6IGN1cnJlbnQuZGlzdGFuY2UsCiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IGN1cnJlbnQuY3VycmVudExldmVsCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCAxMDApOwogICAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTsKICAgIH0sIFt1aVN0YXRlLnN0YXR1cywgdWlTdGF0ZS52aXRhbGl0eSwgdWlTdGF0ZS5zY29yZSwgdWlTdGF0ZS5sZXZlbF0pOwogICAgLy8gU3BlY2lhbCBlZmZlY3QgZm9yIEVuZGluZyBDdXRzY2VuZSBUaW1lcgogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAodWlTdGF0ZS5zdGF0dXMgPT09IEdhbWVTdGF0dXMuRU5ESU5HX0NVVFNDRU5FKSB7CiAgICAgICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxvZ2ljIGZvciBWaWN0b3J5OiBDaGVjayBIaWdoIFNjb3JlCiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFNjb3JlID0gZ2FtZVN0YXRlLmN1cnJlbnQuc2NvcmU7CiAgICAgICAgICAgICAgICBjb25zdCBpc0hpZ2hTY29yZSA9IGxlYWRlcmJvYXJkLmxlbmd0aCA8IDEwIHx8IGZpbmFsU2NvcmUgPiBsZWFkZXJib2FyZFtsZWFkZXJib2FyZC5sZW5ndGggLSAxXS5zY29yZTsKICAgICAgICAgICAgICAgIGlmIChpc0hpZ2hTY29yZSkgewogICAgICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9IEdhbWVTdGF0dXMuTkFNRV9FTlRSWTsKICAgICAgICAgICAgICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc3RhdHVzOiBHYW1lU3RhdHVzLk5BTUVfRU5UUlkgfSkpOwogICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IG5hbWUgZW50cnkKICAgICAgICAgICAgICAgICAgICBzZXROYW1lRW50cnkoeyBpbmRpY2VzOiBbMCwgMCwgMF0sIHBvc2l0aW9uOiAwIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID0gR2FtZVN0YXR1cy5MRUFERVJCT0FSRDsKICAgICAgICAgICAgICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc3RhdHVzOiBHYW1lU3RhdHVzLkxFQURFUkJPQVJEIH0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMTAwMDApOwogICAgICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB9CiAgICB9LCBbdWlTdGF0ZS5zdGF0dXMsIGxlYWRlcmJvYXJkXSk7CiAgICBjb25zdCB1cGRhdGVIaWdoU2NvcmUgPSAoY3VycmVudFNjb3JlKSA9PiB7CiAgICAgICAgaWYgKGN1cnJlbnRTY29yZSA+IHVpU3RhdGUuaGlnaFNjb3JlKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJwaW5jaG9faXNsYW5kX2hpZ2hzY29yZScsIGN1cnJlbnRTY29yZS50b1N0cmluZygpKTsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTY29yZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVpU3RhdGUuaGlnaFNjb3JlOwogICAgfTsKICAgIGNvbnN0IGNsZWFyRGF0YSA9ICgpID0+IHsKICAgICAgICBpZiAoY29uZmlybSgnwr9Cb3JyYXIgcsOpY29yZCB5IHBhcnRpZGEgZ3VhcmRhZGE/JykpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhcnBpbmNob19pc2xhbmRfaGlnaHNjb3JlJyk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjYXJwaW5jaG9faXNsYW5kX3NhdmVfbGV2ZWwnKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhcnBpbmNob19pc2xhbmRfc2F2ZV9zY29yZScpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2FycGluY2hvX2lzbGFuZF9sZWFkZXJib2FyZCcpOwogICAgICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgaGlnaFNjb3JlOiAwIH0pKTsKICAgICAgICAgICAgc2V0TGVhZGVyYm9hcmQoW10pOwogICAgICAgICAgICBzZXRTYXZlZEdhbWUobnVsbCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhhbmRsZUdhbWVPdmVyID0gKGZpbmFsU2NvcmUsIHdpbikgPT4gewogICAgICAgIGF1ZGlvTWFuYWdlci5zdG9wQW1iaWVuY2UoKTsKICAgICAgICBjb25zdCBuZXdIaWdoU2NvcmUgPSB1cGRhdGVIaWdoU2NvcmUoZmluYWxTY29yZSk7CiAgICAgICAgLy8gTG9naWM6IAogICAgICAgIC8vIElmIFdJTiAtPiBHbyB0byBDVVRTQ0VORSAtPiBUaGVuIGNoZWNrIExlYWRlcmJvYXJkCiAgICAgICAgLy8gSWYgTE9TUyAtPiBDaGVjayBMZWFkZXJib2FyZCBpbW1lZGlhdGVseSAtPiBJZiBoaWdoIHNjb3JlLCBOYW1lIEVudHJ5LiBFbHNlIEdhbWUgT3ZlciBzY3JlZW4uCiAgICAgICAgaWYgKHdpbikgewogICAgICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5zdGF0dXMgPSBHYW1lU3RhdHVzLkVORElOR19DVVRTQ0VORTsKICAgICAgICAgICAgc2V0VWlTdGF0ZShwcmV2ID0+ICh7CiAgICAgICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICAgICAgc3RhdHVzOiBHYW1lU3RhdHVzLkVORElOR19DVVRTQ0VORSwKICAgICAgICAgICAgICAgIHNjb3JlOiBmaW5hbFNjb3JlLAogICAgICAgICAgICAgICAgaGlnaFNjb3JlOiBuZXdIaWdoU2NvcmUKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZWxpZ2libGUgZm9yIGxlYWRlcmJvYXJkCiAgICAgICAgICAgIGNvbnN0IGlzRWxpZ2libGUgPSBsZWFkZXJib2FyZC5sZW5ndGggPCAxMCB8fCBmaW5hbFNjb3JlID4gbGVhZGVyYm9hcmRbbGVhZGVyYm9hcmQubGVuZ3RoIC0gMV0uc2NvcmU7CiAgICAgICAgICAgIGlmIChpc0VsaWdpYmxlICYmIGZpbmFsU2NvcmUgPiAwKSB7CiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5zdGF0dXMgPSBHYW1lU3RhdHVzLk5BTUVfRU5UUlk7CiAgICAgICAgICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsKICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogR2FtZVN0YXR1cy5OQU1FX0VOVFJZLAogICAgICAgICAgICAgICAgICAgIHNjb3JlOiBmaW5hbFNjb3JlLAogICAgICAgICAgICAgICAgICAgIGhpZ2hTY29yZTogbmV3SGlnaFNjb3JlCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBzZXROYW1lRW50cnkoeyBpbmRpY2VzOiBbMCwgMCwgMF0sIHBvc2l0aW9uOiAwIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc3RhdHVzID0gR2FtZVN0YXR1cy5HQU1FX09WRVI7CiAgICAgICAgICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsKICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogR2FtZVN0YXR1cy5HQU1FX09WRVIsCiAgICAgICAgICAgICAgICAgICAgc2NvcmU6IGZpbmFsU2NvcmUsCiAgICAgICAgICAgICAgICAgICAgaGlnaFNjb3JlOiBuZXdIaWdoU2NvcmUKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVMZXZlbENvbXBsZXRlID0gKCkgPT4gewogICAgICAgIGF1ZGlvTWFuYWdlci5zdG9wQW1iaWVuY2UoKTsKICAgICAgICBzZXRVaVN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc3RhdHVzOiBHYW1lU3RhdHVzLkxFVkVMX1RSQU5TSVRJT04gfSkpOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnN0YXR1cyA9IEdhbWVTdGF0dXMuTEVWRUxfVFJBTlNJVElPTjsKICAgIH07CiAgICBjb25zdCBnZXRUZW1wQ29sb3IgPSAodmFsKSA9PiB7CiAgICAgICAgaWYgKHZhbCA+IDYwKQogICAgICAgICAgICByZXR1cm4gJ2JnLXJlZC01MDAnOwogICAgICAgIGlmICh2YWwgPiAzMCkKICAgICAgICAgICAgcmV0dXJuICdiZy1vcmFuZ2UtNDAwJzsKICAgICAgICByZXR1cm4gJ2JnLWJsdWUtMzAwJzsKICAgIH07CiAgICByZXR1cm4gKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAibWluLWgtc2NyZWVuIGJnLXN0b25lLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgc2VsZWN0LW5vbmUiLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgdy1mdWxsIG1heC13LTR4bCBhc3BlY3QtdmlkZW8gYmctYmxhY2sgcm91bmRlZC14bCBvdmVyZmxvdy1oaWRkZW4gc2hhZG93LTJ4bCByaW5nLTggcmluZy1hbWJlci05MDAvNTAiLCBjaGlsZHJlbjogW19qc3goR2FtZUNhbnZhcywgeyBnYW1lU3RhdGU6IGdhbWVTdGF0ZSwgb25HYW1lT3ZlcjogaGFuZGxlR2FtZU92ZXIsIG9uTGV2ZWxDb21wbGV0ZTogaGFuZGxlTGV2ZWxDb21wbGV0ZSB9KSwgKHVpU3RhdGUuc3RhdHVzID09PSBHYW1lU3RhdHVzLlBMQVlJTkcgfHwgdWlTdGF0ZS5zdGF0dXMgPT09IEdhbWVTdGF0dXMuUEFVU0VEKSAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy1mdWxsIHAtNCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCB0ZXh0LXdoaXRlIGZvbnQtbW9ubyB0ZXh0LXhsIG1kOnRleHQtMnhsIHotMjAiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLWJsYWNrLzUwIHAtMiByb3VuZGVkLWxnIGJhY2tkcm9wLWJsdXItc20gYm9yZGVyIGJvcmRlci13aGl0ZS8xMCIsIGNoaWxkcmVuOiBbX2pzeChQYXZhSWNvbiwgeyBjbGFzc05hbWU6IGAke3VpU3RhdGUudml0YWxpdHkgPiA2MCA/ICd0ZXh0LXJlZC01MDAnIDogdWlTdGF0ZS52aXRhbGl0eSA+IDMwID8gJ3RleHQtb3JhbmdlLTQwMCcgOiAndGV4dC1ibHVlLTMwMCd9YCwgc2l6ZTogMjQgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy0zMiBtZDp3LTQ4IGgtNCBiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIGJvcmRlciBib3JkZXItd2hpdGUvMjAiLCBjaGlsZHJlbjogX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IGBoLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwICR7Z2V0VGVtcENvbG9yKHVpU3RhdGUudml0YWxpdHkpfSAke3VpU3RhdGUudml0YWxpdHkgPCAyMCA/ICdhbmltYXRlLXB1bHNlJyA6ICcnfWAsIHN0eWxlOiB7IHdpZHRoOiBgJHt1aVN0YXRlLnZpdGFsaXR5fSVgIH0gfSkgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtYW1iZXItMzAwIGRyb3Atc2hhZG93LW1kIHRleHQtc20gbWQ6dGV4dC1iYXNlIiwgY2hpbGRyZW46IExFVkVMX0NPTkZJR1NbdWlTdGF0ZS5sZXZlbCAtIDFdPy5uYW1lIHx8IGBOaXZlbCAke3VpU3RhdGUubGV2ZWx9YCB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaXRlbXMtZW5kIGdhcC0xIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1ibGFjay81MCBweC00IHB5LTIgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIHRleHQteWVsbG93LTQwMCIsIGNoaWxkcmVuOiBbIlBUUzogIiwgdWlTdGF0ZS5zY29yZS50b1N0cmluZygpLnBhZFN0YXJ0KDYsICcwJyldIH0pLCB1aVN0YXRlLmhpZ2hTY29yZSA+IDAgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1zdG9uZS00MDAgYmctYmxhY2svMzAgcHgtMiByb3VuZGVkIiwgY2hpbGRyZW46IFsiUlx1MDBDOUNPUkQ6ICIsIHVpU3RhdGUuaGlnaFNjb3JlXSB9KSldIH0pXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBib3R0b20tNCByaWdodC00IHBvaW50ZXItZXZlbnRzLWF1dG8gZmxleCBnYXAtNCIsIGNoaWxkcmVuOiBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IHRvZ2dsZVBhdXNlLCBjbGFzc05hbWU6ICJiZy1zdG9uZS03MDAvODAgcC00IHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItd2hpdGUvNTAgYWN0aXZlOmJnLXN0b25lLTkwMCB0cmFuc2l0aW9uLWNvbG9ycyIsIGNoaWxkcmVuOiBfanN4KFBhdXNlLCB7IGNsYXNzTmFtZTogInRleHQtd2hpdGUiLCBzaXplOiAzMiB9KSB9KSB9KV0gfSkpLCB1aVN0YXRlLnN0YXR1cyA9PT0gR2FtZVN0YXR1cy5QQVVTRUQgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSB6LTQwIiwgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC02eGwgdGV4dC13aGl0ZSBmb250LWJvbGQgbWItOCBmb250LXZ0MzIzIHRyYWNraW5nLXdpZGVzdCIsIGNoaWxkcmVuOiAiUEFVU0EiIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC00IG1iLTQiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogdG9nZ2xlUGF1c2UsIGNsYXNzTmFtZTogImJnLWFtYmVyLTYwMCBob3ZlcjpiZy1hbWJlci01MDAgdGV4dC13aGl0ZSBweC04IHB5LTMgcm91bmRlZC1mdWxsIHRleHQtMnhsIGZvbnQtYm9sZCBmb250LXZ0MzIzIHNoYWRvdy1sZyIsIGNoaWxkcmVuOiAiQ09OVElOVUFSIiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBnb1RvTWVudSwgY2xhc3NOYW1lOiAiYmctc3RvbmUtNzAwIGhvdmVyOmJnLXN0b25lLTYwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMyByb3VuZGVkLWZ1bGwgc2hhZG93LWxnIiwgdGl0bGU6ICJNZW51IFByaW5jaXBhbCIsIGNoaWxkcmVuOiBfanN4KEhvbWUsIHsgc2l6ZTogMjQgfSkgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogIm10LTQgdGV4dC1zdG9uZS00MDAgdGV4dC1zbSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBnYXAtMSIsIGNoaWxkcmVuOiBfanN4KCJkaXYiLCB7IGNoaWxkcmVuOiAiUHJlc2lvbmEgRW50ZXIgbyBCb3RcdTAwRjNuIDMgcGFyYSBjb250aW51YXIiIH0pIH0pXSB9KSksIHVpU3RhdGUuc3RhdHVzID09PSBHYW1lU3RhdHVzLkxFVkVMX1RSQU5TSVRJT04gJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svOTAgYmFja2Ryb3AtYmx1ci1tZCB0ZXh0LWNlbnRlciBwLTggei0zMCIsIGNoaWxkcmVuOiBbdWlTdGF0ZS5sZXZlbCA9PT0gMyA/IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBhbmltYXRlLWluIGZhZGUtaW4gZHVyYXRpb24tMTAwMCIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtNXhsIHRleHQteWVsbG93LTQwMCBmb250LWJvbGQgbWItNCBmb250LXZ0MzIzIGRyb3Atc2hhZG93LW1kIiwgY2hpbGRyZW46ICJcdTAwQTFSRVkgWUFDQVJcdTAwQzkgREVSUk9UQURPISIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInJlbGF0aXZlIGJnLXN0b25lLTgwMCBwLTIgcGItOCBzaGFkb3ctMnhsIHJvdW5kZWQtc20gdy1mdWxsIG1heC13LXNtIG14LWF1dG8gbWItNiBib3JkZXIgYm9yZGVyLXN0b25lLTYwMCIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJyZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyIGJvcmRlci1zdG9uZS03MDAgc2hhZG93LWlubmVyIGJnLWJsYWNrIiwgY2hpbGRyZW46IF9qc3goImltZyIsIHsgc3JjOiAiaHR0cHM6Ly9pbWFnZXM0LmltYWdlYmFtLmNvbS9iNy9iNi9iNS9NRTE5U0hGS19vLnBuZyIsIGFsdDogIkJvc3MgRGVmZWF0ZWQiLCBjbGFzc05hbWU6ICJ3LWZ1bGwgaC1hdXRvIG9iamVjdC1jb3ZlciIgfSkgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgYm90dG9tLTIgbGVmdC0wIHctZnVsbCB0ZXh0LWNlbnRlciB0ZXh0LXN0b25lLTQwMCBmb250LXZ0MzIzIHRleHQteGwgdHJhY2tpbmctd2lkZXN0IiwgY2hpbGRyZW46ICJMVUNIQU5ETyBKVU5UT1MgUEFSQSBTQUxWQVIgTEEgSVNMQSIgfSldIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IG5leHRMZXZlbCwgY2xhc3NOYW1lOiAiYmctZ3JlZW4tNjAwIGhvdmVyOmJnLWdyZWVuLTUwMCB0ZXh0LXdoaXRlIHB4LTggcHktNCByb3VuZGVkLWZ1bGwgdGV4dC0yeGwgZm9udC1ib2xkIGZvbnQtdnQzMjMgYW5pbWF0ZS1ib3VuY2Ugc2hhZG93LVswXzBfMTVweF9yZ2JhKDM0LDE5Nyw5NCwwLjYpXSIsIGNoaWxkcmVuOiAiQVZBTlpBUiBBTCBDT1JBWlx1MDBEM04gREUgTEEgU0VMVkEgPiIgfSldIH0pKSA6IChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC00eGwgdGV4dC1ncmVlbi00MDAgZm9udC1ib2xkIG1iLTQgZm9udC12dDMyMyIsIGNoaWxkcmVuOiAiXHUwMEExTklWRUwgQ09NUExFVEFETyEiIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXdoaXRlIHRleHQteGwgbWItOCIsIGNoaWxkcmVuOiBbIlB1bnRvcyBhY3VtdWxhZG9zOiAiLCB1aVN0YXRlLnNjb3JlXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgdGV4dC15ZWxsb3ctNDAwIG1iLTggYW5pbWF0ZS1wdWxzZSIsIGNoaWxkcmVuOiBbX2pzeChTYXZlLCB7IHNpemU6IDIwIH0pLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJmb250LW1vbm8iLCBjaGlsZHJlbjogIlByb2dyZXNvIEd1YXJkYWRvIiB9KV0gfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogbmV4dExldmVsLCBjbGFzc05hbWU6ICJiZy1ncmVlbi02MDAgaG92ZXI6YmctZ3JlZW4tNTAwIHRleHQtd2hpdGUgcHgtOCBweS00IHJvdW5kZWQtZnVsbCB0ZXh0LTJ4bCBmb250LWJvbGQgZm9udC12dDMyMyBhbmltYXRlLWJvdW5jZSIsIGNoaWxkcmVuOiAiU0lHVUlFTlRFIE5JVkVMID4iIH0pXSB9KSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAibXQtNCB0ZXh0LXN0b25lLTQwMCB0ZXh0LXNtIiwgY2hpbGRyZW46ICJQcmVzaW9uYSBFbnRlciBvIEJvdFx1MDBGM24gMyIgfSldIH0pKSwgdWlTdGF0ZS5zdGF0dXMgPT09IEdhbWVTdGF0dXMuRU5ESU5HX0NVVFNDRU5FICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrIHotNTAgYW5pbWF0ZS1pbiBmYWRlLWluIGR1cmF0aW9uLTEwMDAiLCBjaGlsZHJlbjogW19qc3goImltZyIsIHsgc3JjOiAiaHR0cHM6Ly9pbWFnZXM0LmltYWdlYmFtLmNvbS9jZC9iNS83My9NRTE5U0dMQ19vLnBuZyIsIGFsdDogIlRoZSBFbmQiLCBjbGFzc05hbWU6ICJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb250YWluIG9wYWNpdHktOTAiIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGJvdHRvbS0xMCB0ZXh0LXdoaXRlLzgwIGZvbnQtdnQzMjMgdGV4dC0yeGwgYW5pbWF0ZS1wdWxzZSBiZy1ibGFjay81MCBweC00IHB5LTEgcm91bmRlZC1mdWxsIiwgY2hpbGRyZW46ICIuLi4iIH0pXSB9KSksIHVpU3RhdGUuc3RhdHVzID09PSBHYW1lU3RhdHVzLk5BTUVfRU5UUlkgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svOTAgei01MCB0ZXh0LXdoaXRlIGZvbnQtdnQzMjMiLCBjaGlsZHJlbjogW19qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTR4bCB0ZXh0LXllbGxvdy00MDAgbWItMiBhbmltYXRlLXB1bHNlIiwgY2hpbGRyZW46ICJcdTAwQTFOVUVWTyBSXHUwMEM5Q09SRCEiIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTJ4bCBtYi04IHRleHQtc3RvbmUtNDAwIiwgY2hpbGRyZW46IFsiUHVudGFqZTogIiwgdWlTdGF0ZS5zY29yZV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtNCBtYi04IiwgY2hpbGRyZW46IFswLCAxLCAyXS5tYXAoKGkpID0+IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeChDaGV2cm9uVXAsIHsgc2l6ZTogMjQsIGNsYXNzTmFtZTogYHRleHQtc3RvbmUtNTAwIG1iLTIgdHJhbnNpdGlvbi1vcGFjaXR5ICR7bmFtZUVudHJ5LnBvc2l0aW9uID09PSBpID8gJ29wYWNpdHktMTAwIGFuaW1hdGUtYm91bmNlJyA6ICdvcGFjaXR5LTAnfWAgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiBgdy0xNiBoLTIwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtNXhsIGJvcmRlci1iLTQgJHtuYW1lRW50cnkucG9zaXRpb24gPT09IGkgPyAnYm9yZGVyLXllbGxvdy00MDAgdGV4dC13aGl0ZSBiZy13aGl0ZS8xMCcgOiAnYm9yZGVyLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwMCd9YCwgY2hpbGRyZW46IENIQVJfU0VUW25hbWVFbnRyeS5pbmRpY2VzW2ldXSB9KSwgX2pzeChDaGV2cm9uRG93biwgeyBzaXplOiAyNCwgY2xhc3NOYW1lOiBgdGV4dC1zdG9uZS01MDAgbXQtMiB0cmFuc2l0aW9uLW9wYWNpdHkgJHtuYW1lRW50cnkucG9zaXRpb24gPT09IGkgPyAnb3BhY2l0eS0xMDAgYW5pbWF0ZS1ib3VuY2UnIDogJ29wYWNpdHktMCd9YCB9KV0gfSwgaSkpKSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB0ZXh0LXN0b25lLTUwMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeCgicCIsIHsgY2hpbGRyZW46ICJVc2EgRmxlY2hhcyAvIEpveXN0aWNrIHBhcmEgZWxlZ2lyIGluaWNpYWxlcyIgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogc3VibWl0SGlnaFNjb3JlLCBjbGFzc05hbWU6ICJtdC00IHB4LTggcHktMiBiZy15ZWxsb3ctNjAwIHRleHQtYmxhY2sgZm9udC1ib2xkIHJvdW5kZWQgaG92ZXI6YmcteWVsbG93LTUwMCB0ZXh0LXhsIiwgY2hpbGRyZW46ICJDT05GSVJNQVIgKEVOVEVSKSIgfSldIH0pXSB9KSksIHVpU3RhdGUuc3RhdHVzID09PSBHYW1lU3RhdHVzLkxFQURFUkJPQVJEICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXN0b25lLTkwMCB6LTUwIGZvbnQtdnQzMjMiLCBjaGlsZHJlbjogW19qc3goVHJvcGh5LCB7IHNpemU6IDQ4LCBjbGFzc05hbWU6ICJ0ZXh0LXllbGxvdy01MDAgbWItNCIgfSksIF9qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTV4bCB0ZXh0LXdoaXRlIG1iLTYgdHJhY2tpbmctd2lkZXN0IGJvcmRlci1iLTIgYm9yZGVyLXllbGxvdy01MDAvNTAgcGItMiIsIGNoaWxkcmVuOiAiTUVKT1JFUyBQVU5UQUpFUyIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInctZnVsbCBtYXgtdy1tZCBiZy1ibGFjay80MCByb3VuZGVkLWxnIHAtNiBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIG1iLTggbWF4LWgtWzUwdmhdIG92ZXJmbG93LXktYXV0byBjdXN0b20tc2Nyb2xsYmFyIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXN0b25lLTUwMCBtYi0yIHRleHQteGwgYm9yZGVyLWIgYm9yZGVyLXdoaXRlLzEwIHBiLTEiLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiUkFOR08iIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIk5PTUJSRSIgfSksIF9qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiUFVOVE9TIiB9KV0gfSksIGxlYWRlcmJvYXJkLm1hcCgoZW50cnksIGlkeCkgPT4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQtMnhsIHB5LTEgJHtpZHggPT09IDAgPyAndGV4dC15ZWxsb3ctNDAwIGZvbnQtYm9sZCcgOiBpZHggPCAzID8gJ3RleHQteWVsbG93LTIwMCcgOiAndGV4dC1zdG9uZS0zMDAnfWAsIGNoaWxkcmVuOiBbX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInctMTAiLCBjaGlsZHJlbjogWyIjIiwgaWR4ICsgMV0gfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRyYWNraW5nLXdpZGVzdCIsIGNoaWxkcmVuOiBlbnRyeS5uYW1lIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogZW50cnkuc2NvcmUudG9TdHJpbmcoKS5wYWRTdGFydCg2LCAnMCcpIH0pXSB9LCBpZHgpKSldIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiBnb1RvTWVudSwgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYmctc3RvbmUtNzAwIGhvdmVyOmJnLXN0b25lLTYwMCB0ZXh0LXdoaXRlIHB4LTggcHktMyByb3VuZGVkLWZ1bGwgdGV4dC0yeGwgdHJhbnNpdGlvbi1hbGwgc2hhZG93LWxnIiwgY2hpbGRyZW46IFtfanN4KEhvbWUsIHsgc2l6ZTogMjAgfSksICIgVk9MVkVSIEFMIE1FTlx1MDBEQSJdIH0pXSB9KSksIHVpU3RhdGUuc3RhdHVzID09PSBHYW1lU3RhdHVzLk1FTlUgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB5LTQgcHgtNCBiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtIHotMzAiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGZsZXgtc2hyaW5rLTAiLCBjaGlsZHJlbjogW19qc3goImgxIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTV4bCBtZDp0ZXh0LTd4bCB0ZXh0LWFtYmVyLTUwMCBmb250LWJvbGQgZHJvcC1zaGFkb3ctWzBfNXB4XzVweF9yZ2JhKDAsMCwwLDEpXSB0cmFja2luZy13aWRlc3QgZm9udC12dDMyMyBsZWFkaW5nLW5vbmUiLCBjaGlsZHJlbjogIklTTEEiIH0pLCBfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0zeGwgbWQ6dGV4dC01eGwgdGV4dC1ncmVlbi00MDAgZm9udC1ib2xkIGRyb3Atc2hhZG93LW1kIGZvbnQtdnQzMjMgdHJhY2tpbmctd2lkZXN0IGxlYWRpbmctbm9uZSBtYi0xIiwgY2hpbGRyZW46ICJDQVJQSU5DSE8iIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyB0ZXh0LXhzIG1kOnRleHQtc20iLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtc3RvbmUtNTAwIGZvbnQtbW9ubyIsIGNoaWxkcmVuOiAidjQuMS4wIChMZWFkZXJib2FyZHMpIiB9KSwgdWlTdGF0ZS5nYW1lcGFkQ29ubmVjdGVkICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTQwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBiZy1ibGFjay82MCBweC0yIHB5LTAuNSByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JlZW4tNTAwLzUwIiwgY2hpbGRyZW46IFtfanN4KEdhbWVwYWQyLCB7IHNpemU6IDE0IH0pLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJmb250LW1vbm8iLCBjaGlsZHJlbjogIkdBTUVQQUQgT0siIH0pXSB9KSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC1ncm93IGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgdy1mdWxsIG1heC13LTN4bCBteS0yIiwgY2hpbGRyZW46IFsobGVhZGVyYm9hcmQubGVuZ3RoID4gMCkgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInNlbGYtY2VudGVyIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC15ZWxsb3ctNDAwIGJnLWJsYWNrLzYwIHB4LTMgcHktMSByb3VuZGVkLWxnIGJvcmRlciBib3JkZXIteWVsbG93LTUwMC8zMCB0ZXh0LXhzIG1kOnRleHQtc20iLCBjaGlsZHJlbjogW19qc3goVHJvcGh5LCB7IHNpemU6IDE0IH0pLCBfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAiZm9udC1ib2xkIiwgY2hpbGRyZW46IFsiVE9QIDE6ICIsIGxlYWRlcmJvYXJkWzBdLm5hbWUsICIgLSAiLCBsZWFkZXJib2FyZFswXS5zY29yZV0gfSldIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LXJvdyBnYXAtMiBtZDpnYXAtNCBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLXN0b25lLTgwMC84MCBwLTIgbWQ6cC0zIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1zdG9uZS02MDAgc2hhZG93LXhsIGZsZXgtMSBtYXgtdy14cyIsIGNoaWxkcmVuOiBbX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQtY2VudGVyIHRleHQtYW1iZXItNTAwIGZvbnQtYm9sZCBtYi0xIGJvcmRlci1iIGJvcmRlci1zdG9uZS02MDAgdGV4dC1zbSBtZDp0ZXh0LWJhc2UiLCBjaGlsZHJlbjogIlRFQ0xBRE8iIH0pLCBfanN4cygidWwiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktMC41IHRleHQtWzEwcHhdIG1kOnRleHQtc20gdGV4dC1zdG9uZS0zMDAiLCBjaGlsZHJlbjogW19qc3hzKCJsaSIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4iLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiTW92ZXIiIH0pLCAiICIsIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtc3RvbmUtNDAwIiwgY2hpbGRyZW46ICJGbGVjaGFzIiB9KV0gfSksIF9qc3hzKCJsaSIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4iLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiU2FsdGFyIiB9KSwgIiAiLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXN0b25lLTQwMCIsIGNoaWxkcmVuOiAiUyIgfSldIH0pLCBfanN4cygibGkiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIkRpc3Bhcm8iIH0pLCAiICIsIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtc3RvbmUtNDAwIiwgY2hpbGRyZW46ICJBIiB9KV0gfSksIF9qc3hzKCJsaSIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4iLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiSW5pY2lvIiB9KSwgIiAiLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXN0b25lLTQwMCIsIGNoaWxkcmVuOiAiRW50ZXIiIH0pXSB9KV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1zdG9uZS04MDAvODAgcC0yIG1kOnAtMyByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItYW1iZXItNzAwIHNoYWRvdy14bCBmbGV4LTEgbWF4LXcteHMiLCBjaGlsZHJlbjogW19qc3goImgzIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWNlbnRlciB0ZXh0LWFtYmVyLTUwMCBmb250LWJvbGQgbWItMSBib3JkZXItYiBib3JkZXItc3RvbmUtNjAwIHRleHQtc20gbWQ6dGV4dC1iYXNlIiwgY2hpbGRyZW46ICJKT1lTVElDSyIgfSksIF9qc3hzKCJ1bCIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0wLjUgdGV4dC1bMTBweF0gbWQ6dGV4dC1zbSB0ZXh0LXN0b25lLTMwMCIsIGNoaWxkcmVuOiBbX2pzeHMoImxpIiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJNb3ZlciIgfSksICIgIiwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1zdG9uZS00MDAiLCBjaGlsZHJlbjogIkQtUGFkIiB9KV0gfSksIF9qc3hzKCJsaSIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4iLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiU2FsdGFyIiB9KSwgIiAiLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXN0b25lLTQwMCIsIGNoaWxkcmVuOiAiQnRuIDIiIH0pXSB9KSwgX2pzeHMoImxpIiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJEaXNwYXJvIiB9KSwgIiAiLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXN0b25lLTQwMCIsIGNoaWxkcmVuOiAiQnRuIDEiIH0pXSB9KSwgX2pzeHMoImxpIiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJJbmljaW8iIH0pLCAiICIsIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtc3RvbmUtNDAwIiwgY2hpbGRyZW46ICJCdG4gMyIgfSldIH0pXSB9KV0gfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTIgZmxleC1zaHJpbmstMCIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtMiBtZDpnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogc3RhcnRHYW1lLCBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBiZy1ncmVlbi02MDAgaG92ZXI6YmctZ3JlZW4tNTAwIHRleHQtd2hpdGUgcHgtNiBweS0yIG1kOnB4LTggbWQ6cHktMyByb3VuZGVkLWZ1bGwgdGV4dC1sZyBtZDp0ZXh0LTJ4bCBmb250LWJvbGQgdHJhbnNpdGlvbi10cmFuc2Zvcm0gdHJhbnNmb3JtIGhvdmVyOnNjYWxlLTEwNSBzaGFkb3ctWzBfMF8xNXB4X3JnYmEoMzQsMTk3LDk0LDAuNSldIiwgY2hpbGRyZW46IFtfanN4KFBsYXksIHsgZmlsbDogImN1cnJlbnRDb2xvciIsIHNpemU6IDIwIH0pLCAiIEpVR0FSIl0gfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFVpU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBzdGF0dXM6IEdhbWVTdGF0dXMuTEVBREVSQk9BUkQgfSkpLCBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBiZy1zdG9uZS03MDAgaG92ZXI6Ymctc3RvbmUtNjAwIHRleHQtd2hpdGUgcHgtNCBweS0yIG1kOnB4LTYgbWQ6cHktMyByb3VuZGVkLWZ1bGwgdGV4dC1sZyBtZDp0ZXh0LTJ4bCBmb250LWJvbGQgdHJhbnNpdGlvbi10cmFuc2Zvcm0gc2hhZG93LWxnIGJvcmRlciBib3JkZXItd2hpdGUvMjAiLCBjaGlsZHJlbjogW19qc3goVHJvcGh5LCB7IHNpemU6IDIwIH0pLCAiIFJcdTAwQzFOS0lORyJdIH0pLCBzYXZlZEdhbWUgJiYgKF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6IGNvbnRpbnVlR2FtZSwgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYmctYW1iZXItNjAwIGhvdmVyOmJnLWFtYmVyLTUwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiBtZDpweC02IG1kOnB5LTMgcm91bmRlZC1mdWxsIHRleHQtbGcgbWQ6dGV4dC0yeGwgZm9udC1ib2xkIHRyYW5zaXRpb24tdHJhbnNmb3JtIHNoYWRvdy1sZyBib3JkZXItMiBib3JkZXItYW1iZXItNDAwIGFuaW1hdGUtcHVsc2UiLCBjaGlsZHJlbjogWyJTRUdVSVIgIiwgX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtc20gb3BhY2l0eS04MCIsIGNoaWxkcmVuOiBbIihOdmwgIiwgc2F2ZWRHYW1lLmxldmVsLCAiKSJdIH0pXSB9KSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgZ2FwLTMgbXQtMSBiZy1ibGFjay80MCBweC0zIHB5LTEuNSByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCIsIGNoaWxkcmVuOiBbKHVpU3RhdGUuaGlnaFNjb3JlID4gMCB8fCBzYXZlZEdhbWUpICYmIChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IGNsZWFyRGF0YSwgY2xhc3NOYW1lOiAidGV4dC1yZWQtNDAwIGhvdmVyOnRleHQtcmVkLTMwMCB0ZXh0LVsxMHB4XSBtZDp0ZXh0LXhzIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktNTAgaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IiwgdGl0bGU6ICJCb3JyYXIgRGF0b3MiLCBjaGlsZHJlbjogX2pzeChUcmFzaDIsIHsgc2l6ZTogMTIgfSkgfSkpLCAodWlTdGF0ZS5oaWdoU2NvcmUgPiAwIHx8IHNhdmVkR2FtZSkgJiYgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LXB4IGgtMyBiZy13aGl0ZS8yMCIgfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6IGp1bXBUb1lhY2FyZUJvc3MsIGNsYXNzTmFtZTogInRleHQtb3JhbmdlLTQwMCBob3Zlcjp0ZXh0LW9yYW5nZS0yMDAgdGV4dC1bMTBweF0gbWQ6dGV4dC14cyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBvcGFjaXR5LTYwIGhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSIsIHRpdGxlOiAiSXIgYSBKZWZlIFlhY2FyXHUwMEU5IChOdmwgMykgW1ogLyBCdG4gNF0iLCBjaGlsZHJlbjogW19qc3goWmFwLCB7IHNpemU6IDEyIH0pLCAiIEplZmUgWWFjYXJcdTAwRTkiXSB9KSwgX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazoganVtcFRvQW5hY29uZGFCb3NzLCBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTQwMCBob3Zlcjp0ZXh0LWdyZWVuLTIwMCB0ZXh0LVsxMHB4XSBtZDp0ZXh0LXhzIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktNjAgaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IiwgdGl0bGU6ICJJciBhIEplZmUgQW5hY29uZGEgKE52bCA2KSBbWCAvIEJ0biA1XSIsIGNoaWxkcmVuOiBbX2pzeChaYXAsIHsgc2l6ZTogMTIgfSksICIgSmVmZSBBbmFjb25kYSJdIH0pXSB9KV0gfSldIH0pKSwgdWlTdGF0ZS5zdGF0dXMgPT09IEdhbWVTdGF0dXMuR0FNRV9PVkVSICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXJlZC05MDAvOTAgYmFja2Ryb3AtYmx1ci1tZCB0ZXh0LWNlbnRlciBwLTggei0zMCIsIGNoaWxkcmVuOiBbX2pzeChTa3VsbCwgeyBzaXplOiA2NCwgY2xhc3NOYW1lOiAidGV4dC13aGl0ZSBtYi00IG9wYWNpdHktODAiIH0pLCBfanN4KCJoMSIsIHsgY2xhc3NOYW1lOiAidGV4dC02eGwgdGV4dC13aGl0ZSBmb250LWJvbGQgbWItMiBmb250LXZ0MzIzIiwgY2hpbGRyZW46ICJGSU4gREVMIEpVRUdPIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYmxhY2svNDAgcC02IHJvdW5kZWQtbGcgbWItOCBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIHctNjQiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB0ZXh0LXN0b25lLTQwMCBtYi0xIiwgY2hpbGRyZW46ICJQdW50YWplIiB9KSwgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC0zeGwgdGV4dC15ZWxsb3ctNDAwIGZvbnQtbW9ubyBtYi00IiwgY2hpbGRyZW46IHVpU3RhdGUuc2NvcmUgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJvcmRlci10IGJvcmRlci13aGl0ZS8xMCBwdC00IiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtc20gdGV4dC1zdG9uZS00MDAgbWItMSIsIGNoaWxkcmVuOiAiUlx1MDBFOWNvcmQgUGVyc29uYWwiIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhsIHRleHQtd2hpdGUgZm9udC1tb25vIiwgY2hpbGRyZW46IHVpU3RhdGUuaGlnaFNjb3JlIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTQiLCBjaGlsZHJlbjogW19qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6IHJlc3RhcnRMZXZlbCwgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgYmctd2hpdGUgdGV4dC1yZWQtOTAwIGhvdmVyOmJnLWdyYXktMjAwIHB4LTggcHktMyByb3VuZGVkLWZ1bGwgdGV4dC14bCBmb250LWJvbGQgdHJhbnNpdGlvbi1hbGwgc2hhZG93LWxnIiwgY2hpbGRyZW46IFtfanN4KFJvdGF0ZUNjdywge30pLCAiIFJlaW50ZW50YXIgTml2ZWwiXSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBnb1RvTWVudSwgY2xhc3NOYW1lOiAiYmctYmxhY2svNDAgaG92ZXI6YmctYmxhY2svNjAgdGV4dC13aGl0ZSBweC00IHB5LTMgcm91bmRlZC1mdWxsIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLXdoaXRlLzIwIiwgdGl0bGU6ICJNZW51IFByaW5jaXBhbCIsIGNoaWxkcmVuOiBfanN4KEhvbWUsIHsgc2l6ZTogMjQgfSkgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogIm10LTQgdGV4dC13aGl0ZS81MCB0ZXh0LXNtIiwgY2hpbGRyZW46ICJQcmVzaW9uYSBFbnRlciBvIEJvdFx1MDBGM24gMyIgfSldIH0pKSwgdWlTdGF0ZS5zdGF0dXMgPT09IEdhbWVTdGF0dXMuVklDVE9SWSAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmVlbi05MDAvOTAgYmFja2Ryb3AtYmx1ci1tZCB0ZXh0LWNlbnRlciBwLTQgei01MCBvdmVyZmxvdy1oaWRkZW4iLCBjaGlsZHJlbjogW19qc3goQXdhcmQsIHsgc2l6ZTogNDgsIGNsYXNzTmFtZTogInRleHQteWVsbG93LTQwMCBtYi0yIGFuaW1hdGUtYm91bmNlIiB9KSwgX2pzeCgiaDEiLCB7IGNsYXNzTmFtZTogInRleHQtNnhsIHRleHQteWVsbG93LTMwMCBmb250LWJvbGQgbWItMiBmb250LXZ0MzIzIGRyb3Atc2hhZG93LW1kIiwgY2hpbGRyZW46ICJcdTAwQTFJU0xBIFNBTFZBREEhIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC00IG10LTgiLCBjaGlsZHJlbjogX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogZ29Ub01lbnUsIGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGJnLXllbGxvdy01MDAgdGV4dC1ncmVlbi05MDAgaG92ZXI6YmcteWVsbG93LTQwMCBweC04IHB5LTMgcm91bmRlZC1mdWxsIHRleHQteGwgZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIHNoYWRvdy1sZyIsIGNoaWxkcmVuOiBbX2pzeChQbGF5LCB7IGZpbGw6ICJjdXJyZW50Q29sb3IiIH0pLCAiIENvbnRpbnVhciJdIH0pIH0pXSB9KSldIH0pIH0pKTsKfQo=","@/services/audioManager":"data:application/javascript;base64,Ly8gU2ltcGxlIHN5bnRoIGZvciA4LWJpdCBzb3VuZHMgJiBwcm9jZWR1cmFsIG5hdHVyZSBhbWJpZW5jZQpsZXQgYXVkaW9DdHggPSBudWxsOwpsZXQgYW1iaWVuY2VUaW1lb3V0ID0gbnVsbDsKbGV0IGN1cnJlbnRNb2RlID0gbnVsbDsKLy8gTm9pc2UgYnVmZmVyIGZvciB3aW5kCmxldCBub2lzZUJ1ZmZlciA9IG51bGw7CmNvbnN0IGluaXRBdWRpbyA9ICgpID0+IHsKICAgIGlmICghYXVkaW9DdHgpIHsKICAgICAgICBhdWRpb0N0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOwogICAgICAgIC8vIENyZWF0ZSBOb2lzZSBCdWZmZXIgb25jZQogICAgICAgIGNvbnN0IGJ1ZmZlclNpemUgPSBhdWRpb0N0eC5zYW1wbGVSYXRlICogMjsgLy8gMiBzZWNvbmRzIG9mIG5vaXNlCiAgICAgICAgbm9pc2VCdWZmZXIgPSBhdWRpb0N0eC5jcmVhdGVCdWZmZXIoMSwgYnVmZmVyU2l6ZSwgYXVkaW9DdHguc2FtcGxlUmF0ZSk7CiAgICAgICAgY29uc3QgZGF0YSA9IG5vaXNlQnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIGRhdGFbaV0gPSBNYXRoLnJhbmRvbSgpICogMiAtIDE7CiAgICAgICAgfQogICAgfQogICAgaWYgKGF1ZGlvQ3R4LnN0YXRlID09PSAnc3VzcGVuZGVkJykgewogICAgICAgIGF1ZGlvQ3R4LnJlc3VtZSgpOwogICAgfQp9OwovLyAtLS0gU0ZYIElOU1RSVU1FTlRTIC0tLQpjb25zdCBwbGF5VG9uZSA9IChmcmVxLCB0eXBlLCBkdXJhdGlvbiwgdm9sID0gMC4xLCBzbGlkZVRvID0gbnVsbCkgPT4gewogICAgaWYgKCFhdWRpb0N0eCkKICAgICAgICByZXR1cm47CiAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICBjb25zdCBnYWluID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgb3NjLnR5cGUgPSB0eXBlOwogICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZShmcmVxLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICBpZiAoc2xpZGVUbykgewogICAgICAgIG9zYy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShzbGlkZVRvLCBhdWRpb0N0eC5jdXJyZW50VGltZSArIGR1cmF0aW9uKTsKICAgIH0KICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDEsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgZHVyYXRpb24pOwogICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgb3NjLnN0YXJ0KCk7CiAgICBvc2Muc3RvcChhdWRpb0N0eC5jdXJyZW50VGltZSArIGR1cmF0aW9uKTsKfTsKLy8gLS0tIE5BVFVSRSBHRU5FUkFUT1JTIC0tLQpjb25zdCBwbGF5V2luZCA9IChpbnRlbnNpdHkgPSAxKSA9PiB7CiAgICBpZiAoIWF1ZGlvQ3R4IHx8ICFub2lzZUJ1ZmZlcikKICAgICAgICByZXR1cm47CiAgICBjb25zdCBub2lzZSA9IGF1ZGlvQ3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgbm9pc2UuYnVmZmVyID0gbm9pc2VCdWZmZXI7CiAgICBub2lzZS5sb29wID0gdHJ1ZTsKICAgIGNvbnN0IGZpbHRlciA9IGF1ZGlvQ3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpOwogICAgZmlsdGVyLnR5cGUgPSAnbG93cGFzcyc7CiAgICBmaWx0ZXIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDIwMCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgLy8gTW9kdWxhdGUgZmlsdGVyIGZvciAiZ3VzdCIgZWZmZWN0CiAgICBmaWx0ZXIuZnJlcXVlbmN5LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDQwMCAqIGludGVuc2l0eSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAyKTsKICAgIGZpbHRlci5mcmVxdWVuY3kubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMjAwLCBhdWRpb0N0eC5jdXJyZW50VGltZSArIDQpOwogICAgY29uc3QgZ2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC4wNSAqIGludGVuc2l0eSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAxKTsKICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCBhdWRpb0N0eC5jdXJyZW50VGltZSArIDQpOyAvLyBGYWRlIG91dAogICAgbm9pc2UuY29ubmVjdChmaWx0ZXIpOwogICAgZmlsdGVyLmNvbm5lY3QoZ2Fpbik7CiAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgbm9pc2Uuc3RhcnQoKTsKICAgIG5vaXNlLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyA0KTsKfTsKY29uc3QgcGxheUJpcmQgPSAodHlwZSkgPT4gewogICAgaWYgKCFhdWRpb0N0eCkKICAgICAgICByZXR1cm47CiAgICBjb25zdCB0ID0gYXVkaW9DdHguY3VycmVudFRpbWU7CiAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICBjb25zdCBnYWluID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgaWYgKHR5cGUgPT09ICdjaGlycCcpIHsKICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDIwMDAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxMDAwLCB0ICsgMC4xKTsKICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4wNSwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIHQgKyAwLjEpOwogICAgICAgIG9zYy5zdGFydCh0KTsKICAgICAgICBvc2Muc3RvcCh0ICsgMC4xKTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjYWxsJykgewogICAgICAgIG9zYy50eXBlID0gJ3RyaWFuZ2xlJzsKICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDEyMDAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMTUwMCwgdCArIDAuMSk7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgxMjAwLCB0ICsgMC4yKTsKICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuMDUsIHQgKyAwLjA1KTsKICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgdCArIDAuMyk7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjMpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgLy8gVHdlZXQgKFJhcGlkIGZyZXEgbW9kdWxhdGlvbikKICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDI1MDAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMzAwMCwgdCArIDAuMDUpOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMjUwMCwgdCArIDAuMSk7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAuMDMsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCB0ICsgMC4xNSk7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjE1KTsKICAgIH0KfTsKY29uc3QgcGxheUNyaWNrZXQgPSAoKSA9PiB7CiAgICBpZiAoIWF1ZGlvQ3R4KQogICAgICAgIHJldHVybjsKICAgIGNvbnN0IHQgPSBhdWRpb0N0eC5jdXJyZW50VGltZTsKICAgIGNvbnN0IG9zYyA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICBvc2MudHlwZSA9ICdzcXVhcmUnOwogICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSg0MDAwLCB0KTsKICAgIC8vIFB1bHNlIGVmZmVjdCBtYW51YWxseQogICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgLy8gMyBzaG9ydCBjaGlycHMKICAgIGNvbnN0IGNoaXJwID0gKHN0YXJ0KSA9PiB7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHN0YXJ0KTsKICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC4wMiwgc3RhcnQgKyAwLjAxKTsKICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgc3RhcnQgKyAwLjA1KTsKICAgIH07CiAgICBjaGlycCh0KTsKICAgIGNoaXJwKHQgKyAwLjA4KTsKICAgIGNoaXJwKHQgKyAwLjE2KTsKICAgIG9zYy5zdGFydCh0KTsKICAgIG9zYy5zdG9wKHQgKyAwLjI1KTsKfTsKY29uc3QgcGxheUZyb2cgPSAoKSA9PiB7CiAgICBpZiAoIWF1ZGlvQ3R4KQogICAgICAgIHJldHVybjsKICAgIGNvbnN0IHQgPSBhdWRpb0N0eC5jdXJyZW50VGltZTsKICAgIGNvbnN0IG9zYyA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICBvc2MudHlwZSA9ICdzYXd0b290aCc7CiAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDE1MCwgdCk7CiAgICBvc2MuZnJlcXVlbmN5LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDEwMCwgdCArIDAuMik7IC8vIFBpdGNoIGRyb3AgKGNyb2FrKQogICAgY29uc3QgZmlsdGVyID0gYXVkaW9DdHguY3JlYXRlQmlxdWFkRmlsdGVyKCk7CiAgICBmaWx0ZXIudHlwZSA9ICdsb3dwYXNzJzsKICAgIGZpbHRlci5mcmVxdWVuY3kudmFsdWUgPSA2MDA7CiAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgdCk7CiAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC4wNSwgdCArIDAuMDUpOwogICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHQgKyAwLjMpOwogICAgb3NjLmNvbm5lY3QoZmlsdGVyKTsKICAgIGZpbHRlci5jb25uZWN0KGdhaW4pOwogICAgZ2Fpbi5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTsKICAgIG9zYy5zdGFydCh0KTsKICAgIG9zYy5zdG9wKHQgKyAwLjM1KTsKfTsKLy8gLS0tIEFNQklFTkNFIFNDSEVEVUxFUiAtLS0KY29uc3Qgc2NoZWR1bGVBbWJpZW5jZSA9ICgpID0+IHsKICAgIGlmICghYXVkaW9DdHggfHwgIWN1cnJlbnRNb2RlKQogICAgICAgIHJldHVybjsKICAgIC8vIFByb2JhYmlsaXRpZXMgYmFzZWQgb24gbW9kZQogICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCk7CiAgICBpZiAoY3VycmVudE1vZGUgPT09ICdtZW51JykgewogICAgICAgIC8vIE1FTlU6IENhbG0sIFdpbmR5LCBzcGFyc2UgYmlyZHMKICAgICAgICBpZiAociA8IDAuMSkKICAgICAgICAgICAgcGxheVdpbmQoMC44KTsKICAgICAgICBlbHNlIGlmIChyIDwgMC4yKQogICAgICAgICAgICBwbGF5QmlyZCgnY2FsbCcpOwogICAgICAgIGVsc2UgaWYgKHIgPCAwLjI1KQogICAgICAgICAgICBwbGF5QmlyZCgndHdlZXQnKTsKICAgIH0KICAgIGVsc2UgaWYgKGN1cnJlbnRNb2RlID09PSAnbGV2ZWwnKSB7CiAgICAgICAgLy8gTEVWRUw6IEFjdGl2ZSBqdW5nbGUKICAgICAgICBpZiAociA8IDAuMDUpCiAgICAgICAgICAgIHBsYXlXaW5kKDEuMik7IC8vIE9jY2FzaW9uYWwgZ3VzdHMKICAgICAgICBlbHNlIGlmIChyIDwgMC4yKQogICAgICAgICAgICBwbGF5Q3JpY2tldCgpOwogICAgICAgIGVsc2UgaWYgKHIgPCAwLjM1KQogICAgICAgICAgICBwbGF5QmlyZCgnY2hpcnAnKTsKICAgICAgICBlbHNlIGlmIChyIDwgMC40NSkKICAgICAgICAgICAgcGxheUJpcmQoJ3R3ZWV0Jyk7CiAgICAgICAgZWxzZSBpZiAociA8IDAuNTApCiAgICAgICAgICAgIHBsYXlGcm9nKCk7CiAgICB9CiAgICAvLyBTY2hlZHVsZSBuZXh0IGV2ZW50IChSYW5kb20gaW50ZXJ2YWwgYmV0d2VlbiAwLjVzIGFuZCAyLjVzKQogICAgY29uc3QgbmV4dFRpbWUgPSA1MDAgKyBNYXRoLnJhbmRvbSgpICogMjAwMDsKICAgIGFtYmllbmNlVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KHNjaGVkdWxlQW1iaWVuY2UsIG5leHRUaW1lKTsKfTsKZXhwb3J0IGNvbnN0IGF1ZGlvTWFuYWdlciA9IHsKICAgIGluaXQ6IGluaXRBdWRpbywKICAgIHN0YXJ0QW1iaWVuY2U6IChtb2RlKSA9PiB7CiAgICAgICAgaW5pdEF1ZGlvKCk7CiAgICAgICAgLy8gSWYgYWxyZWFkeSBwbGF5aW5nIHRoaXMgbW9kZSwgZG8gbm90aGluZwogICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gbW9kZSAmJiBhbWJpZW5jZVRpbWVvdXQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAvLyBTdG9wIHByZXZpb3VzCiAgICAgICAgaWYgKGFtYmllbmNlVGltZW91dCkKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFtYmllbmNlVGltZW91dCk7CiAgICAgICAgY3VycmVudE1vZGUgPSBtb2RlOwogICAgICAgIHNjaGVkdWxlQW1iaWVuY2UoKTsKICAgICAgICAvLyBJbml0aWFsIHdpbmQgZ3VzdCB0byBzZXQgbW9vZAogICAgICAgIGlmIChtb2RlID09PSAnbWVudScpCiAgICAgICAgICAgIHBsYXlXaW5kKDAuNSk7CiAgICB9LAogICAgc3RvcEFtYmllbmNlOiAoKSA9PiB7CiAgICAgICAgaWYgKGFtYmllbmNlVGltZW91dCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQoYW1iaWVuY2VUaW1lb3V0KTsKICAgICAgICAgICAgYW1iaWVuY2VUaW1lb3V0ID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgY3VycmVudE1vZGUgPSBudWxsOwogICAgfSwKICAgIGp1bXA6ICgpID0+IHBsYXlUb25lKDMwMCwgJ3NxdWFyZScsIDAuMSwgMC4xLCA2MDApLAogICAgc2hvb3Q6ICgpID0+IHBsYXlUb25lKDgwMCwgJ3Nhd3Rvb3RoJywgMC4xLCAwLjA1LCAyMDApLAogICAgaGl0OiAoKSA9PiBwbGF5VG9uZSgxNTAsICdzYXd0b290aCcsIDAuMiwgMC4yLCA1MCksCiAgICBjb2xsZWN0OiAoKSA9PiB7CiAgICAgICAgcGxheVRvbmUoMTAwMCwgJ3NpbmUnLCAwLjEsIDAuMSk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBwbGF5VG9uZSgxNTAwLCAnc2luZScsIDAuMiwgMC4xKSwgMTAwKTsKICAgIH0sCiAgICBlbmVteUhpdDogKCkgPT4gcGxheVRvbmUoNDAwLCAnc3F1YXJlJywgMC4xLCAwLjA1LCAxMDApLAogICAgYm9zc0hpdDogKCkgPT4gcGxheVRvbmUoMTAwLCAnc2F3dG9vdGgnLCAwLjIsIDAuMiwgNTApLAogICAgbGV2ZWxXaW46ICgpID0+IHsKICAgICAgICBwbGF5VG9uZSg1MjMuMjUsICdzcXVhcmUnLCAwLjIsIDAuMSk7IC8vIEMKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBsYXlUb25lKDY1OS4yNSwgJ3NxdWFyZScsIDAuMiwgMC4xKSwgMjAwKTsgLy8gRQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcGxheVRvbmUoNzgzLjk5LCAnc3F1YXJlJywgMC40LCAwLjEpLCA0MDApOyAvLyBHCiAgICB9LAogICAgZ2FtZU92ZXI6ICgpID0+IHsKICAgICAgICBwbGF5VG9uZSgzMDAsICdzYXd0b290aCcsIDAuNSwgMC4yLCA1MCk7CiAgICB9Cn07Cg=="}}</script>
        <script>
          window.APPLET_FILES = ["index.tsx","metadata.json","index.html","types.ts","constants.ts","components/GameCanvas.tsx","services/levelGenerator.ts","App.tsx","services/audioManager.ts"];
          </script>
        <script type="module">
        (() => {
  if (window.self === window.top) {
    // Do not run the shim in the main window, only in iframes.
    return;
  }

  window.API_KEY = 'GEMINI_API_KEY';
  window.GEMINI_API_KEY = 'GEMINI_API_KEY';
  window.process = window.process || {};
  window.process.env = window.process.env || {};
  window.process.env.API_KEY = window.API_KEY;
  window.process.env.GEMINI_API_KEY = window.GEMINI_API_KEY;

  const bootstrapChannel = new Promise((resolve) => {
    window.addEventListener('message', (event) => {
      if (event.origin !== 'https://aistudio.google.com') {
        return;
      }

      if (event.data.type === 'bootstrap') {
        resolve({
          port: event.ports[0],
          urlPatterns:
              event.data.urlPatterns.map((pattern) => new RegExp(pattern)),
        });
      }
    });
  });

  window.aistudio = window.aistudio || {
    handleFullscreenEsc: true,
    getHostUrl: async function() {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'get_host_url'},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data.url);
        };
      });
    },
    hasSelectedApiKey: async function() {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'has_selected_api_key'},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data);
        };
      });
    },
    openSelectKey: async function() {
      const hostPort = (await bootstrapChannel).port;
      const channel = new MessageChannel();
      hostPort.postMessage(
          {type: 'open_select_key'},
          [channel.port2]);
    },
    getModelQuota: async function(model) {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'get_model_quota', model},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data.modelQuota);
        };
      });
    },
  };

  const nativeFetch = window.fetch;

  /**
   * @param {string | URL | Request} resource The resource of the fetch request.
   * @param {RequestInit} options The options of the fetch request.
   * @return {Promise!} The promise of the fetch request.
   */
  async function fetch(resource, options) {
    const config = await bootstrapChannel;

    const request = resource instanceof Request ?
      resource.clone() :
      new Request(resource, options);

    if (!config.urlPatterns.some((pattern) => request.url.match(pattern))) {
      return nativeFetch(resource, options);
    }
    const hostPort = config.port;

    const channel = new MessageChannel();
    const port = channel.port1;
    let bodyBytes;
    const transfer = [channel.port2];
    const parts = [];
    const buffer = await request.arrayBuffer();
    if (buffer.byteLength) {
      bodyBytes = buffer;
      transfer.push(bodyBytes);
    }
    hostPort.postMessage(
        {
          type: 'fetch',
          url: request.url,
          method: request.method,
          headers: [...request.headers.entries()],
          body: bodyBytes,
        },
        transfer);

    let streamController;
    const body = new ReadableStream({
      start(controller) {
        streamController = controller;
      },
    });
    let resolveReceive;
    const receivePromise = new Promise((resolve) => {
      resolveReceive = resolve;
    });
    port.onmessage = (message) => {
      switch (message.data.type) {
        case 'response':
          resolveReceive(new Response(body, {
            status: message.data.status,
            statusText: message.data.statusText,
            headers: new Headers(message.data.headers),
          }));
          break;
        case 'body':
          streamController.enqueue(message.data.data);
          break;
        case 'body_done':
          streamController.close();
          break;
      }
    };
    return receivePromise;
  }

  Object.defineProperty(window, 'fetch', {
    get: function() {
      return fetch;
    },
  });

  // See details in: https://github.com/angular/angular/issues/63064.
  function patchHistoryStateFunctionForAngular(originalFn, baseHref) {
    return (state, unused, url) => {
      if (typeof url === 'string' && !url.startsWith('blob:')) {
        url = baseHref + url;
      }
      return originalFn.apply(window.history, [state, unused, url]);
    };
  }

  if (false) {
    const baseHref = window.location.href;
    window.history.replaceState = patchHistoryStateFunctionForAngular(window.history.replaceState, baseHref);
    window.history.pushState = patchHistoryStateFunctionForAngular(window.history.pushState, baseHref);
  }

  const originalWebSocket = window.WebSocket;
  class ProxiedWebSocket extends EventTarget {
    /**
     * @param {string} url The url of the websocket.
     * @param {Object!} protocols The protocols of the websocket.
     */
    constructor(url, protocols) {
      super();
      this.url = url;
      this.protocols = protocols;

      this.open();
    }

    /** Opens the websocket. */
    async open() {
      const hostPort = (await bootstrapChannel).port;
      const channel = new MessageChannel();
      hostPort.postMessage(
          {type: 'websocket_open', url: this.url, protocols: this.protocols},
          [channel.port2]);
      this.port = channel.port1;
      this.port.onmessage = (message) => {
        if (message.data.type === 'close') {
          const event = new CloseEvent('close', {
            code: message.data.code,
            reason: message.data.reason,
            wasClean: message.data.wasClean,
          });
          if (this.onclose) {
            this.onclose(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'open') {
          const event = new Event('open');
          if (this.onopen) {
            this.onopen(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'message') {
          let data = message.data.data;
          if (message.data.messageType === 'text' || message.data.messageType === 'message') {
            data = new TextDecoder().decode(data);
          }
          const event = new MessageEvent('message', {
            data,
            type: message.data.messageType,
          });
          if (this.onmessage) {
            this.onmessage(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'error') {
          const event = new ErrorEvent('error', {
            message: message.data.message,
          });
          if (this.onerror) {
            this.onerror(event);
          }
          this.dispatchEvent(event);
          return;
        }
        console.error('received unknown message in frame', event.data);
      };
    }
    /**
     * @param {string|ArrayBuffer!} data The data to send.
     */
    send(data) {
      if (typeof data === 'string') {
        this.port.postMessage({type: 'send', data});
      } else {
        this.port.postMessage({type: 'send', data}, [data.buffer]);
      }
    }

    /**
     * @param {number} code The code of the close event.
     * @param {string} reason The reason of the close event.
     */
    close(code, reason) {
      this.port.postMessage({type: 'close', code, reason});
    }
  }

  /**
   * @param {string} url The url of the websocket.
   * @param {Object!} protocols The protocols of the websocket.
   * @return {WebSocket!} The websocket.
   */
  function createWebSocket(url, protocols) {
    // This should come from the bootstrap channel, but we want this to
    // work for the synchronous constructor here.
    if (url.startsWith('wss://generativelanguage.googleapis.com/')) {
      return Reflect.construct(ProxiedWebSocket, [url, protocols]);
    }
    return Reflect.construct(originalWebSocket, [url, protocols]);
  }

  Object.defineProperty(window, 'WebSocket', {
    get: function() {
      return createWebSocket;
    },
  });

  async function instrumentErrorReporting() {
    const errors = [];
    let hostPort;

    function reportError(message) {
      if (!hostPort) {
        errors.push(message);
      } else {
        hostPort.postMessage({type: 'error', message: message}, message);
      }
    }

    function serialize(args) {
      return args.map((a) => {
        if (a instanceof Error || a instanceof ErrorEvent) {
          return a.message;
        }
        if(a instanceof CloseEvent) {
          return {code: a.code, reason: a.reason, wasClean: a.wasClean};
        }
        if( a instanceof Map) {
          return JSON.parse(JSON.stringify([...a.entries()]));
        }
        if( a instanceof Set) {
          return JSON.parse(JSON.stringify([...a.values()]));
        }
        if (a instanceof Object) {
          return JSON.parse(JSON.stringify(a));
        }
        return a;
      });
    }

    const originalConsole = window.console;
    const originalConsoleLog = window.console.log;
    const originalConsoleError = window.console.error;
    const originalConsoleWarn = window.console.warn;
    const originalConsoleDebug = window.console.debug;
    window.console = {
      ...originalConsole,
      log: (message, ...args) => {
        originalConsoleLog.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_log', message: combined });
      },
      debug: (message, ...args) => {
        originalConsoleDebug.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_debug', message: combined });
      },
      error: (message, ...args) => {
        originalConsoleError.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_error', message: combined });
      },
      warn: (message, ...args) => {
        originalConsoleWarn.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_warn', message: combined });
      },
    };

    window.onerror = (message, source, lineno, colno, error) => {
      reportError({type: 'error', message: serialize([message]), source, lineno, colno, error});
    };

    window.onunhandledrejection = (event) => {
      reportError({type: 'unhandledrejection', message: serialize([event.reason])});
    };

    window.alert = (message) => {
      reportError({type: 'alert', message: serialize([message]) });
    };

    hostPort = (await bootstrapChannel).port;
    for(const error of errors) {
      hostPort.postMessage({type: 'error', message: error});
    }
  }

  const availableFiles = new Set(window.APPLET_FILES || []);

  instrumentErrorReporting();

  if (false) {
    const notifyLocationChange = async () => {
      const hostPort = (await bootstrapChannel).port;
      hostPort.postMessage({type: 'locationchange', href: location.href});
    };

    // Send initial state on load.
    notifyLocationChange();

    const originalPushState = history.pushState;
    history.pushState = (...args) => {
      originalPushState.apply(history, args);
      notifyLocationChange();
    };

    const originalReplaceState = history.replaceState;
    history.replaceState = (...args) => {
      originalReplaceState.apply(history, args);
      notifyLocationChange();
    };
    window.addEventListener('popstate', (e) => {
      notifyLocationChange();
    });
  }

  window.addEventListener('hashchange', async (e) =>{
    const config = await bootstrapChannel;
    const hostPort = config.port;
    hostPort.postMessage({type: 'hashchange', hash: window.location.hash});
    if (false) {
      hostPort.postMessage({
        type: 'locationchange',
        href: location.href,
      });
    }
  });

  if (true) {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/html2canvas-pro';
    script.onload = () => {
      window.addEventListener('message', async (event) => {
        if (event.data?.type === 'capture-screenshot') {
          try {
            const canvas = await html2canvas(document.documentElement, {
              logging: false,
              useCORS: true,
              backgroundColor: null,
              scale: 1,
            });
            const hostPort = (await bootstrapChannel).port;
            hostPort.postMessage(
              {
                type: 'screenshot-result',
                dataUrl: canvas.toDataURL('image/png'),
                requestId: event.data.requestId,
                scrollX: document.body.scrollLeft,
                scrollY: document.body.scrollTop,
              },
            );
          } catch (e) {
            const hostPort = (await bootstrapChannel).port;
            hostPort.postMessage(
              {
                type: 'screenshot-error',
                error: e.message,
                requestId: event.data.requestId,
              });
          }
        }
      });
    };
    document.head.appendChild(script);
  }

  if (false) {
    const MAX_ANCESTOR_LEVEL = 3;
    const MAX_DESCENDANT_LEVEL = 3;

    function getElementSelector(el) {
      if (!el || el.nodeType !== 1) {
        return '';
      }
      const parts = [];
      while(el && el.nodeType === 1 && el.tagName.toLowerCase() !== 'body') {
        let part = el.tagName.toLowerCase();
        if (el.id) {
          part += '#' + CSS.escape(el.id);
        }

        const parent = el.parentElement;
        if (parent) {
          let nth = 1;
          let prev = el.previousElementSibling;
          while(prev) {
            if (prev.tagName === el.tagName) {
              nth++;
            }
            prev = prev.previousElementSibling;
          }
          part += ':nth-of-type(' + nth + ')';
        }

        parts.unshift(part);
        el = el.parentElement;
      }
      return parts.join(' > ');
    }

    function getDomTreeAsString(element, depth, maxDepth) {
      if (!element || element.nodeType !== 1 || depth > maxDepth) {
        return '';
      }
      const tagName = element.tagName.toLowerCase();
      let attrs = [];
      if (element.id) {
        attrs.push('id="' + element.id + '"');
      }
      if (element.classList.length > 0) {
        attrs.push('class="' + element.classList.value + '"');
      }
      const attrString = attrs.length > 0 ? ' ' + attrs.join(' ') : '';

      let content = '';
      for (const node of element.childNodes) {
        if (node.nodeType === 1) { // Element node
          content += getDomTreeAsString(node, depth + 1, maxDepth);
        } else if (node.nodeType === 3) { // Text node
          content += node.textContent;
        }
      }

      return '<' + tagName + attrString + '>' + content + '</' + tagName + '>';
    }

    const style = document.createElement('style');
    style.textContent =
      '.aistudio-focus-mode-highlight { box-shadow: inset 0 0 0 0.5px white, inset 0 0 0 1.5px #87a9ff !important; }' +
      '#aistudio-focus-mode-tag { position: absolute; display: none; background: #87a9ff; border-radius: 4px; border: 0.5px solid white; z-index: 10000; text-transform: lowercase; padding: 2px 4px; color: #32302c; font-family: Inter, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; line-height: 16px; pointer-events: none; }';
    document.head.appendChild(style);

    let highlightedElement = null;
    let focusTag = null;
    let resizeObserver = null;
    let iframeLoaded = false;

    function positionFocusTag() {
      if (!highlightedElement || !focusTag) return;
      requestAnimationFrame(() => {
        focusTag.style.display = 'inline-flex';
        const rect = highlightedElement.getBoundingClientRect();
        focusTag.style.top =
          rect.top + window.scrollY - focusTag.offsetHeight - 5 + 'px';
        focusTag.style.left = rect.left + window.scrollX + 'px';
      });
    }

    if (window.ResizeObserver) {
      resizeObserver = new ResizeObserver(() => {
        positionFocusTag();
      });
    }

    function highlight(element) {
      if (!iframeLoaded) return; // Do not highlight if iframe is not loaded
      if (!focusTag) {
        focusTag = document.createElement('div');
        focusTag.id = 'aistudio-focus-mode-tag';
        document.body.appendChild(focusTag);
      }

      const hadHighlightedElement = !!highlightedElement;
      if (highlightedElement) {
        highlightedElement.classList.remove('aistudio-focus-mode-highlight');
        highlightedElement.removeAttribute('data-aistudio-tag-name');
        if (resizeObserver) {
          resizeObserver.unobserve(highlightedElement);
        }
      }
      focusTag.style.display = 'none';
      highlightedElement = element;
      const hasHighlightedElement = !!highlightedElement;

      if (!hadHighlightedElement && hasHighlightedElement) {
        window.addEventListener('resize', positionFocusTag);
        window.addEventListener('scroll', positionFocusTag, true);
      } else if (hadHighlightedElement && !hasHighlightedElement) {
        window.removeEventListener('resize', positionFocusTag);
        window.removeEventListener('scroll', positionFocusTag, true);
      }

      if (highlightedElement) {
        highlightedElement.setAttribute(
          'data-aistudio-tag-name',
          highlightedElement.tagName,
        );
        highlightedElement.classList.add('aistudio-focus-mode-highlight');
        focusTag.textContent = highlightedElement.tagName.toLowerCase();
        positionFocusTag();
        if (resizeObserver) {
          resizeObserver.observe(highlightedElement);
        }
      }
    }

    window.addEventListener('load', () => {
      iframeLoaded = true;
    });

    window.addEventListener('message', async (event) => {
      if (event.data?.type === 'highlight-element-at-point') {
        try {
          const element = document.elementFromPoint(
            event.data.x,
            event.data.y,
          );
          highlight(element);
        } catch (e) {
          highlight(null);
        }
      } else if (event.data?.type === 'highlight-element-by-selector') {
        try {
          const selector = event.data.selector;
          if (selector) {
            const element = document.querySelector(selector);
            highlight(element);
          } else {
            highlight(null);
          }
        } catch (e) {
          highlight(null);
        }
      } else if (event.data?.type === 'get-element-at-point') {
        try {
          const element = document.elementFromPoint(
            event.data.x,
            event.data.y,
          );
          const hostPort = (await bootstrapChannel).port;
          if (!element) {
            hostPort.postMessage({
              type: 'element-at-point-error',
              error: 'No element found at point',
              requestId: event.data.requestId,
            });
            return;
          }
          const selector = getElementSelector(element);

          let levelsUp = 0;
          let root = element;
          while(levelsUp < MAX_ANCESTOR_LEVEL && root.parentElement && root.parentElement.tagName.toLowerCase() !== 'html') {
            root = root.parentElement;
            levelsUp++;
          }
          const domString = getDomTreeAsString(root, 0, levelsUp + MAX_DESCENDANT_LEVEL);

          const styles = window.getComputedStyle(element);
          const css = {};
          for (let i = 0; i < styles.length; i++) {
            const key = styles[i];
            css[key] = styles.getPropertyValue(key);
          }
          hostPort.postMessage({
            type: 'element-at-point-result',
            element: {
              selector: selector,
              domString: domString,
              css: css,
              x: event.data.x,
              y: event.data.y,
            },
            requestId: event.data.requestId,
          });
        } catch (e) {
          const hostPort = (await bootstrapChannel).port;
          hostPort.postMessage({
            type: 'element-at-point-error',
            error: e.message,
            requestId: event.data.requestId,
          });
        }
      } else if (event.data?.type === 'change-element-style') {
        try {
          const selector = event.data.selector;
          if (selector) {
            const element = document.querySelector(selector);
            if (element) {
              element.style.setProperty(
                event.data.property,
                event.data.value,
                'important',
              );
              positionFocusTag();
            }
          }
        } catch (e) {}
      }
    });
  }

  window.addEventListener('keydown', async (event) => {
    if (event.key === 'Escape' && window.aistudio?.handleFullscreenEsc) {
      const hostPort = (await bootstrapChannel).port;
      hostPort.postMessage({type: 'exit-fullscreen'});
    }
  });
})();
// # sourceURL=iframe_shim.js
        </script>
        <!--<base href="https://ai.studio">--><base href=".">


  
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isla Carpincho</title>
    <script src="https://cdn.tailwindcss.com/"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&amp;display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'VT323', monospace;
        overflow: hidden;
        background-color: #1a202c;
        touch-action: none; /* Prevent zooming on mobile */
      }
      canvas {
        image-rendering: pixelated;
      }
    </style>
  <style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.bottom-4{bottom:1rem}.left-0{left:0px}.right-4{right:1rem}.top-0{top:0px}.bottom-2{bottom:0.5rem}.z-30{z-index:30}.z-20{z-index:20}.z-50{z-index:50}.my-2{margin-top:0.5rem;margin-bottom:0.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:0.25rem}.mt-1{margin-top:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mt-4{margin-top:1rem}.mb-8{margin-bottom:2rem}.mt-2{margin-top:0.5rem}.flex{display:flex}.aspect-video{aspect-ratio:16 / 9}.h-full{height:100%}.h-3{height:0.75rem}.h-4{height:1rem}.h-auto{height:auto}.h-20{height:5rem}.max-h-\[50vh\]{max-height:50vh}.min-h-screen{min-height:100vh}.w-full{width:100%}.w-px{width:1px}.w-32{width:8rem}.w-16{width:4rem}.w-10{width:2.5rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-xs{max-width:20rem}.max-w-sm{max-width:24rem}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}@keyframes bounce{0%, 100%{transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,0.2,1)}}.animate-bounce{animation:bounce 1s infinite}.cursor-none{cursor:none}.select-none{-webkit-user-select:none;user-select:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.space-y-0\.5 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.125rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.125rem * var(--tw-space-y-reverse))}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.rounded{border-radius:0.25rem}.rounded-sm{border-radius:0.125rem}.border{border-width:1px}.border-4{border-width:4px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-4{border-bottom-width:4px}.border-b-2{border-bottom-width:2px}.border-amber-700{--tw-border-opacity:1;border-color:rgb(180 83 9 / var(--tw-border-opacity, 1))}.border-amber-800{--tw-border-opacity:1;border-color:rgb(146 64 14 / var(--tw-border-opacity, 1))}.border-stone-600{--tw-border-opacity:1;border-color:rgb(87 83 78 / var(--tw-border-opacity, 1))}.border-white\/10{border-color:rgb(255 255 255 / 0.1)}.border-white\/20{border-color:rgb(255 255 255 / 0.2)}.border-amber-400{--tw-border-opacity:1;border-color:rgb(251 191 36 / var(--tw-border-opacity, 1))}.border-yellow-500\/30{border-color:rgb(234 179 8 / 0.3)}.border-green-500\/50{border-color:rgb(34 197 94 / 0.5)}.border-white\/50{border-color:rgb(255 255 255 / 0.5)}.border-stone-700{--tw-border-opacity:1;border-color:rgb(68 64 60 / var(--tw-border-opacity, 1))}.border-yellow-400{--tw-border-opacity:1;border-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.border-yellow-500\/50{border-color:rgb(234 179 8 / 0.5)}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/40{background-color:rgb(0 0 0 / 0.4)}.bg-black\/60{background-color:rgb(0 0 0 / 0.6)}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-stone-700{--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.bg-stone-800\/80{background-color:rgb(41 37 36 / 0.8)}.bg-stone-900{--tw-bg-opacity:1;background-color:rgb(28 25 23 / var(--tw-bg-opacity, 1))}.bg-amber-600{--tw-bg-opacity:1;background-color:rgb(217 119 6 / var(--tw-bg-opacity, 1))}.bg-white\/20{background-color:rgb(255 255 255 / 0.2)}.bg-black\/30{background-color:rgb(0 0 0 / 0.3)}.bg-black\/50{background-color:rgb(0 0 0 / 0.5)}.bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-stone-700\/80{background-color:rgb(68 64 60 / 0.8)}.bg-black\/90{background-color:rgb(0 0 0 / 0.9)}.bg-stone-800{--tw-bg-opacity:1;background-color:rgb(41 37 36 / var(--tw-bg-opacity, 1))}.bg-orange-400{--tw-bg-opacity:1;background-color:rgb(251 146 60 / var(--tw-bg-opacity, 1))}.bg-blue-300{--tw-bg-opacity:1;background-color:rgb(147 197 253 / var(--tw-bg-opacity, 1))}.bg-white\/10{background-color:rgb(255 255 255 / 0.1)}.bg-yellow-600{--tw-bg-opacity:1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-2{padding:0.5rem}.p-4{padding:1rem}.p-8{padding:2rem}.p-6{padding:1.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.py-0\.5{padding-top:0.125rem;padding-bottom:0.125rem}.px-8{padding-left:2rem;padding-right:2rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.pb-8{padding-bottom:2rem}.pb-1{padding-bottom:0.25rem}.pb-2{padding-bottom:0.5rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-bold{font-weight:700}.leading-none{line-height:1}.tracking-widest{letter-spacing:0.1em}.text-amber-500{--tw-text-opacity:1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity:1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-orange-400{--tw-text-opacity:1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.text-stone-300{--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.text-stone-400{--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}.text-stone-500{--tw-text-opacity:1;color:rgb(120 113 108 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-amber-300{--tw-text-opacity:1;color:rgb(252 211 77 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-blue-300{--tw-text-opacity:1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-yellow-200{--tw-text-opacity:1;color:rgb(254 240 138 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.opacity-60{opacity:0.6}.opacity-50{opacity:0.5}.opacity-80{opacity:0.8}.opacity-0{opacity:0}.opacity-100{opacity:1}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_0_15px_rgba\(34\2c 197\2c 94\2c 0\.5\)\]{--tw-shadow:0 0 15px rgba(34,197,94,0.5);--tw-shadow-colored:0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_0_15px_rgba\(34\2c 197\2c 94\2c 0\.6\)\]{--tw-shadow:0 0 15px rgba(34,197,94,0.6);--tw-shadow-colored:0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.ring-8{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(8px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.ring-amber-900\/50{--tw-ring-color:rgb(120 53 15 / 0.5)}.drop-shadow-\[0_5px_5px_rgba\(0\2c 0\2c 0\2c 1\)\]{--tw-drop-shadow:drop-shadow(0 5px 5px rgba(0,0,0,1));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-200{transition-duration:200ms}.duration-1000{transition-duration:1000ms}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-green-500:hover{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.hover\:bg-stone-600:hover{--tw-bg-opacity:1;background-color:rgb(87 83 78 / var(--tw-bg-opacity, 1))}.hover\:bg-amber-500:hover{--tw-bg-opacity:1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.hover\:bg-yellow-500:hover{--tw-bg-opacity:1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.hover\:text-green-200:hover{--tw-text-opacity:1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.hover\:text-orange-200:hover{--tw-text-opacity:1;color:rgb(254 215 170 / var(--tw-text-opacity, 1))}.hover\:text-red-300:hover{--tw-text-opacity:1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.hover\:opacity-100:hover{opacity:1}.active\:bg-stone-900:active{--tw-bg-opacity:1;background-color:rgb(28 25 23 / var(--tw-bg-opacity, 1))}@media (min-width: 768px){.md\:w-48{width:12rem}.md\:gap-4{gap:1rem}.md\:p-3{padding:0.75rem}.md\:px-6{padding-left:1.5rem;padding-right:1.5rem}.md\:px-8{padding-left:2rem;padding-right:2rem}.md\:py-3{padding-top:0.75rem;padding-bottom:0.75rem}.md\:text-2xl{font-size:1.5rem;line-height:2rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-7xl{font-size:4.5rem;line-height:1}.md\:text-base{font-size:1rem;line-height:1.5rem}.md\:text-sm{font-size:0.875rem;line-height:1.25rem}.md\:text-xs{font-size:0.75rem;line-height:1rem}}</style><script src="https://cdn.jsdelivr.net/npm/html2canvas-pro"></script></head>
  <body>
    <div id="root"><div class="min-h-screen bg-stone-900 flex items-center justify-center p-4 select-none"><div class="relative w-full max-w-4xl aspect-video bg-black rounded-xl overflow-hidden shadow-2xl ring-8 ring-amber-900/50"><canvas width="800" height="450" class="w-full h-full object-contain bg-black shadow-2xl rounded-lg border-4 border-amber-800 cursor-none"></canvas><div class="absolute inset-0 flex flex-col items-center justify-center bg-stone-900 z-50 font-vt323"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trophy text-yellow-500 mb-4" aria-hidden="true"><path d="M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978"></path><path d="M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978"></path><path d="M18 9h1.5a1 1 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z"></path><path d="M6 9H4.5a1 1 0 0 1 0-5H6"></path></svg><h2 class="text-5xl text-white mb-6 tracking-widest border-b-2 border-yellow-500/50 pb-2">MEJORES PUNTAJES</h2><div class="w-full max-w-md bg-black/40 rounded-lg p-6 border border-white/10 mb-8 max-h-[50vh] overflow-y-auto custom-scrollbar"><div class="flex justify-between text-stone-500 mb-2 text-xl border-b border-white/10 pb-1"><span>RANGO</span><span>NOMBRE</span><span>PUNTOS</span></div><div class="flex justify-between text-2xl py-1 text-yellow-400 font-bold"><span class="w-10">#1</span><span class="tracking-widest">G P</span><span>005200</span></div><div class="flex justify-between text-2xl py-1 text-yellow-200"><span class="w-10">#2</span><span class="tracking-widest">CAP</span><span>005000</span></div><div class="flex justify-between text-2xl py-1 text-yellow-200"><span class="w-10">#3</span><span class="tracking-widest">YAC</span><span>004000</span></div><div class="flex justify-between text-2xl py-1 text-stone-300"><span class="w-10">#4</span><span class="tracking-widest">AAA</span><span>003200</span></div><div class="flex justify-between text-2xl py-1 text-stone-300"><span class="w-10">#5</span><span class="tracking-widest">ANA</span><span>003000</span></div><div class="flex justify-between text-2xl py-1 text-stone-300"><span class="w-10">#6</span><span class="tracking-widest">MTE</span><span>002000</span></div><div class="flex justify-between text-2xl py-1 text-stone-300"><span class="w-10">#7</span><span class="tracking-widest">RIO</span><span>001000</span></div></div><button class="flex items-center gap-2 bg-stone-700 hover:bg-stone-600 text-white px-8 py-3 rounded-full text-2xl transition-all shadow-lg"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house" aria-hidden="true"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg> VOLVER AL MEN</button></div></div></div></div>
  

        <script type="module" onerror="console.warn(&#39;Failed to load the app. Try reloading it.&#39;)">import '@/index';</script>
        </body></html>